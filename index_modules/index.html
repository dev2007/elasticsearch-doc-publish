<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>索引模块 | Elasticsearch 中文文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8380975615223941" crossorigin="anonymous"></script>
    <meta name="description" content="Elasticsearch 中文文档，基于 v7.11 官方文档开始翻译">
    <meta name="keywords" content="Elastic,Elasticsearch,ElasticStack,ELK,Document,docs,文档,中文文档,入门">
    
    <link rel="preload" href="/assets/css/0.styles.87a55001.css" as="style"><link rel="preload" href="/assets/js/app.f54b6f9f.js" as="script"><link rel="preload" href="/assets/js/2.c3078b94.js" as="script"><link rel="preload" href="/assets/js/16.8ab752a5.js" as="script"><link rel="prefetch" href="/assets/js/10.0268c297.js"><link rel="prefetch" href="/assets/js/100.9de07136.js"><link rel="prefetch" href="/assets/js/101.6b8f1eb5.js"><link rel="prefetch" href="/assets/js/102.40ae2247.js"><link rel="prefetch" href="/assets/js/103.15f45561.js"><link rel="prefetch" href="/assets/js/104.08813b13.js"><link rel="prefetch" href="/assets/js/105.072ab95d.js"><link rel="prefetch" href="/assets/js/106.5c4e70b8.js"><link rel="prefetch" href="/assets/js/107.7033c270.js"><link rel="prefetch" href="/assets/js/108.684c837a.js"><link rel="prefetch" href="/assets/js/109.c45629d4.js"><link rel="prefetch" href="/assets/js/11.2421a902.js"><link rel="prefetch" href="/assets/js/110.ecbd4962.js"><link rel="prefetch" href="/assets/js/111.60ec4b97.js"><link rel="prefetch" href="/assets/js/112.6d00c06a.js"><link rel="prefetch" href="/assets/js/113.cd021933.js"><link rel="prefetch" href="/assets/js/114.300acbcd.js"><link rel="prefetch" href="/assets/js/115.b42b7a52.js"><link rel="prefetch" href="/assets/js/116.5e3de158.js"><link rel="prefetch" href="/assets/js/117.b497aeca.js"><link rel="prefetch" href="/assets/js/118.c40d791b.js"><link rel="prefetch" href="/assets/js/119.15083082.js"><link rel="prefetch" href="/assets/js/12.7db7d3e7.js"><link rel="prefetch" href="/assets/js/120.93860c72.js"><link rel="prefetch" href="/assets/js/121.3ad921c9.js"><link rel="prefetch" href="/assets/js/122.0aec2afd.js"><link rel="prefetch" href="/assets/js/123.3b3820d1.js"><link rel="prefetch" href="/assets/js/124.370c6e81.js"><link rel="prefetch" href="/assets/js/125.403d0704.js"><link rel="prefetch" href="/assets/js/126.18292c99.js"><link rel="prefetch" href="/assets/js/127.5e25a5ff.js"><link rel="prefetch" href="/assets/js/128.b4926d7e.js"><link rel="prefetch" href="/assets/js/129.5cfc0795.js"><link rel="prefetch" href="/assets/js/13.f7bd7d98.js"><link rel="prefetch" href="/assets/js/130.daed387b.js"><link rel="prefetch" href="/assets/js/131.11298c7e.js"><link rel="prefetch" href="/assets/js/132.3fa1e674.js"><link rel="prefetch" href="/assets/js/133.bf6623b7.js"><link rel="prefetch" href="/assets/js/134.5a756904.js"><link rel="prefetch" href="/assets/js/135.4ed99321.js"><link rel="prefetch" href="/assets/js/136.f474120f.js"><link rel="prefetch" href="/assets/js/137.0e230c25.js"><link rel="prefetch" href="/assets/js/14.2bcba9b1.js"><link rel="prefetch" href="/assets/js/15.9712105c.js"><link rel="prefetch" href="/assets/js/17.6de20a2a.js"><link rel="prefetch" href="/assets/js/18.e504e957.js"><link rel="prefetch" href="/assets/js/19.208be713.js"><link rel="prefetch" href="/assets/js/20.2e9bdc63.js"><link rel="prefetch" href="/assets/js/21.d4a49a8b.js"><link rel="prefetch" href="/assets/js/22.0446ed10.js"><link rel="prefetch" href="/assets/js/23.a4fb764c.js"><link rel="prefetch" href="/assets/js/24.6c75ce3f.js"><link rel="prefetch" href="/assets/js/25.d670158f.js"><link rel="prefetch" href="/assets/js/26.03f10ce6.js"><link rel="prefetch" href="/assets/js/27.a37dedd5.js"><link rel="prefetch" href="/assets/js/28.27fa4b32.js"><link rel="prefetch" href="/assets/js/29.5ce688fe.js"><link rel="prefetch" href="/assets/js/3.f849e4bc.js"><link rel="prefetch" href="/assets/js/30.a951767b.js"><link rel="prefetch" href="/assets/js/31.349c7c0f.js"><link rel="prefetch" href="/assets/js/32.1560337b.js"><link rel="prefetch" href="/assets/js/33.47920c4a.js"><link rel="prefetch" href="/assets/js/34.019af1d9.js"><link rel="prefetch" href="/assets/js/35.4f48f0bf.js"><link rel="prefetch" href="/assets/js/36.dcadddfc.js"><link rel="prefetch" href="/assets/js/37.6168f6a2.js"><link rel="prefetch" href="/assets/js/38.b9973ed9.js"><link rel="prefetch" href="/assets/js/39.f676d7e9.js"><link rel="prefetch" href="/assets/js/4.b8adb022.js"><link rel="prefetch" href="/assets/js/40.6f283444.js"><link rel="prefetch" href="/assets/js/41.1bee86e3.js"><link rel="prefetch" href="/assets/js/42.ad482e2b.js"><link rel="prefetch" href="/assets/js/43.8b46d9cb.js"><link rel="prefetch" href="/assets/js/44.a3fe224e.js"><link rel="prefetch" href="/assets/js/45.b254769d.js"><link rel="prefetch" href="/assets/js/46.47ad3d4b.js"><link rel="prefetch" href="/assets/js/47.61da0555.js"><link rel="prefetch" href="/assets/js/48.23054156.js"><link rel="prefetch" href="/assets/js/49.1ccb0d07.js"><link rel="prefetch" href="/assets/js/5.ff5c5ea8.js"><link rel="prefetch" href="/assets/js/50.d9ebcadb.js"><link rel="prefetch" href="/assets/js/51.ed72c753.js"><link rel="prefetch" href="/assets/js/52.30faa61c.js"><link rel="prefetch" href="/assets/js/53.93256120.js"><link rel="prefetch" href="/assets/js/54.74850984.js"><link rel="prefetch" href="/assets/js/55.dd83a54b.js"><link rel="prefetch" href="/assets/js/56.5b6d142e.js"><link rel="prefetch" href="/assets/js/57.e57da23c.js"><link rel="prefetch" href="/assets/js/58.be41490d.js"><link rel="prefetch" href="/assets/js/59.080acdfe.js"><link rel="prefetch" href="/assets/js/6.ed3f2a05.js"><link rel="prefetch" href="/assets/js/60.e691b08c.js"><link rel="prefetch" href="/assets/js/61.7f9e8bc5.js"><link rel="prefetch" href="/assets/js/62.ee63803f.js"><link rel="prefetch" href="/assets/js/63.aae89af4.js"><link rel="prefetch" href="/assets/js/64.d247c52a.js"><link rel="prefetch" href="/assets/js/65.2ee8bba7.js"><link rel="prefetch" href="/assets/js/66.272b1339.js"><link rel="prefetch" href="/assets/js/67.066e8bdc.js"><link rel="prefetch" href="/assets/js/68.336efe2d.js"><link rel="prefetch" href="/assets/js/69.989b1eea.js"><link rel="prefetch" href="/assets/js/7.4a9e0db8.js"><link rel="prefetch" href="/assets/js/70.34beee4d.js"><link rel="prefetch" href="/assets/js/71.a3d541e7.js"><link rel="prefetch" href="/assets/js/72.b03d17a3.js"><link rel="prefetch" href="/assets/js/73.aa6f0650.js"><link rel="prefetch" href="/assets/js/74.68a87ef1.js"><link rel="prefetch" href="/assets/js/75.0e6785de.js"><link rel="prefetch" href="/assets/js/76.de95365c.js"><link rel="prefetch" href="/assets/js/77.14e67824.js"><link rel="prefetch" href="/assets/js/78.f79a8a2b.js"><link rel="prefetch" href="/assets/js/79.b2471459.js"><link rel="prefetch" href="/assets/js/8.13a80b3e.js"><link rel="prefetch" href="/assets/js/80.5112b96d.js"><link rel="prefetch" href="/assets/js/81.6b29f29e.js"><link rel="prefetch" href="/assets/js/82.20896295.js"><link rel="prefetch" href="/assets/js/83.13f55595.js"><link rel="prefetch" href="/assets/js/84.6c82c67a.js"><link rel="prefetch" href="/assets/js/85.4e171f21.js"><link rel="prefetch" href="/assets/js/86.de1f7aca.js"><link rel="prefetch" href="/assets/js/87.dc55c361.js"><link rel="prefetch" href="/assets/js/88.483af93d.js"><link rel="prefetch" href="/assets/js/89.1f89586e.js"><link rel="prefetch" href="/assets/js/9.0b2c6418.js"><link rel="prefetch" href="/assets/js/90.f2aa4c43.js"><link rel="prefetch" href="/assets/js/91.4314d8d8.js"><link rel="prefetch" href="/assets/js/92.494eccaf.js"><link rel="prefetch" href="/assets/js/93.0def2ee8.js"><link rel="prefetch" href="/assets/js/94.07681219.js"><link rel="prefetch" href="/assets/js/95.0a36c10d.js"><link rel="prefetch" href="/assets/js/96.f1f4aafe.js"><link rel="prefetch" href="/assets/js/97.c65f9c4f.js"><link rel="prefetch" href="/assets/js/98.dee248d7.js"><link rel="prefetch" href="/assets/js/99.018666f7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.87a55001.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.ico" alt="Elasticsearch 中文文档" class="logo"> <span class="site-name can-hide">Elasticsearch 中文文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  BookHub 首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://pdf.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  计算机书库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/dev2007/elasticsearch-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  BookHub 首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://docs.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://pdf.bookhub.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  计算机书库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/dev2007/elasticsearch-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Elasticsearch 翻译说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#感谢与支持" class="sidebar-link">感谢与支持</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><a href="/intro" class="sidebar-heading clickable"><span>什么是 Elasticsearch？</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/getting_started" class="sidebar-heading clickable"><span>Elasticsearch 入门</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/set_up_elasticsearch" class="sidebar-heading clickable"><span>设置 Elasticsearch</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/index_modules" aria-current="page" class="sidebar-heading clickable router-link-exact-active router-link-active"><span>索引模块</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/rest_apis" class="sidebar-heading clickable"><span>REST API</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="索引模块"><a href="#索引模块" class="header-anchor">#</a> 索引模块</h1> <p>索引模块是按索引创建的模块，控制有关索引的所有方面。</p> <InArticleAdsense data-ad-client="ca-pub-8380975615223941" data-ad-slot="9428292757"></InArticleAdsense> <h2 id="索引设置"><a href="#索引设置" class="header-anchor">#</a> 索引设置</h2> <p>可以为每个索引设置索引级的设置。设置如下：</p> <ul><li>静态设置</li></ul> <p>只能在索引创建时，或者<a href="/rest_apis/index_apis/open_index">关闭的索引</a>上设置。</p> <ul><li>动态设置</li></ul> <p>可以通过<a href="/rest_apis/index_apis/update_index_settings">更新索引 API</a> 在活动的索引上修改。</p> <div class="custom-block danger"><p class="custom-block-title">警告</p> <p>在关闭的索引上修改静态或动态索引设置，可能会导致不正确的设置。如果不删除并重建索引，是无法修正这些设置。</p></div> <h2 id="静态索引设置"><a href="#静态索引设置" class="header-anchor">#</a> 静态索引设置</h2> <p>以下是与特定索引模块无关的静态索引设置的列表：</p> <ul><li><code>index.number_of_shards</code></li></ul> <p>索引应该具有的主分片数量。默认为 <code>1</code>。此设置只能在创建索引时设置。在关闭的索引上也不能修改。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>每个分片数量限定为 <code>1,024</code>。这是一个安全限定，以防止意外创建索引，而这些索引会由于资源分配而破坏集群的稳定性。这个限定可以通过指定 <code>export ES_JAVA_OPTS=&quot;-Des.index.max_number_of_shards=128&quot;</code> 系统属性来修改，这个属性属于集群的每个节点。</p></div> <ul><li><code>index.number_of_routing_shards</code></li></ul> <p>用于<a href="/rest_apis/index_apis/split_api">拆分</a>索引的路由分片数。
例如，<code>number_of_routing_shards</code> 设置为 <code>30</code>（<code>5 x 3 x 2</code>）的 5 分片索引，可以除以因子 <code>2</code> 或 <code>3</code>。换言之，可以按以下方式拆分：</p> <ul><li><code>5</code> → <code>10</code> → <code>30</code> (除以 2, 再除以 3)</li> <li><code>5</code> → <code>15</code> → <code>30</code> (除以 3, 再除以 2)</li> <li><code>5</code> → <code>30</code> (除以 6)</li></ul> <p>这个设置的默认值基于索引的主分片数。默认情况下，允许按 2 的因子拆分最多 1,024 个分片。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>在 Elasticsearch 7.0.0 以及更新的版本，这个设置影响文档在分片中的分布方式。使用自定义路由重新索引旧索引时，你必须显式设置 <code>index.number_of_routing_shards</code> 以维持相同的文档分布。参阅<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.0/breaking-changes-7.0.html#_document_distribution_changes" target="_blank" rel="noopener noreferrer">相关的碎裂变化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div> <ul><li><code>index.shard.check_on_startup</code></li></ul> <p>在打开之前是否应该检查分片是否损坏。当检测到损坏时，它将阻止打开分片，允许的值：</p> <div class="language- extra-class"><pre><code>- `false`
（默认值）当打开分片时不检测损坏。
- `checksum`
检测物理损坏。
- `true`
检测物理和逻辑损坏。这会消耗更高的 CPU 和内存。
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">警告</p> <p>仅限专家。在大型索引上检查分片可能花费更多的时间。</p></div> <ul><li><p><code>index.codec</code> <code>default</code> 值使用 LZ4 压缩来压缩存储的数据，但可以设置为 <code>best_compression</code>,即使用 <a href="https://en.wikipedia.org/wiki/DEFLATE" target="_blank" rel="noopener noreferrer">DEFLATE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来获得更高的压缩比，但会降低存储字段的性能。如果要更新压缩类型，合并段后将应用新的压缩类型。段合并可以使用<a href="/rest_apis/index_apis/force_merge">强制合并</a>来强制合并。</p></li> <li><p><code>index.routing_partition_size</code></p></li></ul> <p>自定义路由值可以转到的分片数。默认为 1，只能在索引创建时设置。此值必须小于 <code>index.number_of_shards</code>，除非 <code>index.number_of_shards</code> 值也是 1。参阅<a href="/mapping/metadata/_routing#%E8%B7%AF%E7%94%B1%E5%88%B0%E7%B4%A2%E5%BC%95%E5%88%86%E5%8C%BA">路由到索引分区</a>，获取如何使用此设置的更多信息。</p> <ul><li><code>index.soft_deletes.enabled</code></li></ul> <p>标示索引是否允许软删除。软删除只能在索引创建时设置，也只能配置在 Elasticsearch 6.5.0 及后续版本创建的索引上。默认为 <code>true</code>。（7.6.0版本就不推荐，不推荐禁用软删除创建索引，并在未来版本移除此设置）</p> <ul><li><code>index.soft_deletes.retention_lease.period</code></li></ul> <p>分片历史保持租约在它被认为过期前的最大周期。分片历史保留租约，确保在 Lucene 索引上进行合并时保留软删除。如果软删除在可以复制到跟随者之前被合并，由于领导者的历史记录不完整，后续过程将失败。默认为 <code>12h</code>。</p> <ul><li><code>index.load_fixed_bitset_filters_eagerly</code></li></ul> <p>标示是否为嵌套查询预加载<a href="/query_dsl/query">缓存过滤器</a>。可能值为 <code>true</code>（默认值）和 <code>false</code>。</p> <ul><li><code>index.hidden</code></li></ul> <p>标示默认情况下，索引是否应该隐藏。当使用通配符表达式时，隐藏索引默认不会返回。通过 <code>expand_wildcards</code> 参数，每个请求都可以控制此行为。可能的值为 <code>true</code> 和 <code>false</code>（默认值）。</p> <h2 id="动态索引设置"><a href="#动态索引设置" class="header-anchor">#</a> 动态索引设置</h2> <p>以下是与任何特定索引模块无关的所有动态设置列表：</p> <ul><li><code>index.number_of_replicas</code></li></ul> <p>每个主分片的副本数。默认为 1。</p> <ul><li><code>index.auto_expand_replicas</code></li></ul> <p>根据集群中数据节点的数量，自动扩展副本的数量。设置为以连接符分隔的下限和上限（如，<code>0-5</code>）或者使用 <code>all</code> 作为上限（如，<code>0-all</code>）。默认为 <code>false</code>（即禁用）。请注意自动扩展的副本数量只考虑<a href="/index_modules/index_shard/shard_allocation">分配筛选</a>规则，而忽略其他分配规则，如<a href="/set_up_elasticsearch/configuring_elasticsearch/cluster_level#%E5%88%86%E7%89%87%E5%88%86%E9%85%8D%E6%84%9F%E7%9F%A5">分片分配感知</a>和<a href="/index_modules/index_shard/total_shards">每个节点分片总数</a>，如果适用规则阻止分配所有副本，则这可能导致集群健康变为 <code>YELLOW</code>（黄色）。</p> <ul><li><code>index.search.idle.after</code></li></ul> <p>在被认为是搜索空闲之前，分片不能接收搜索或获取请求的时间。（默认值为 <code>30s</code>）</p> <ul><li><code>index.refresh_interval</code></li></ul> <p>执行刷新操作的频率，它可以使最近对索引的修改对搜索可见。默认为 <code>1s</code>。可以设置为 <code>-1</code> 为禁止刷新。如果这个设置未显示设置，则至少在 <code>index.search.idle.after</code> 秒后，未看到搜索流量的分片在收到搜索请求前不会接收后台刷新。此行为旨在在默认情况下，当不执行搜索时自动优化批量索引。为了选择退出此行为，应将显式值 <code>1s</code> 设置为刷新间隔。</p> <ul><li><code>index.max_result_window</code></li></ul> <p>搜索到此索引的 <code>from + size</code> 的最大值。默认为 <code>10,000</code>。搜索请求占用的堆内存和时间，与 <code>from + size</code> 成比例，这也限制了内存。参阅<a href="/search/paginate#%E6%BB%9A%E5%8A%A8%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C">Scroll</a>或<a href="/search/paginate#search_after">Search After</a>，以获得更有效的替换提高这一点。</p> <ul><li><code>index.max_inner_result_window</code></li></ul> <p>此索引的内部命中定义和顶级命中聚合的 <code>from + size</code> 的最大值。默认为 <code>100</code>。内部命中和顶级命中聚合占用的堆内存和时间，与 <code>from + size</code> 成比例，这也限制了内存。</p> <ul><li><code>index.max_rescore_window</code></li></ul> <p>此索引的搜索中 <code>rescore</code> 请求的 <code>window_size</code> 最大值。默认为 <code>index.max_result_window</code>的值（默认为 <code>10,000</code>）。搜索请求占用的堆内存和时间与 <code>max(window_size, from + size)</code> 成比例，这也限制了内存。</p> <ul><li><code>index.max_docvalue_fields_search</code></li></ul> <p>查询中允许的 <code>docvalue_fields</code> 最大值。默认为 <code>100</code>。文档值字段代价高昂，因为它们可能会导致每个文档查找每个字段。</p> <ul><li><code>index.max_script_fields</code></li></ul> <p>查询中允许的 <code>script_fields</code> 最大值。 默认为 <code>32</code>。</p> <ul><li><code>index.max_ngram_diff</code></li></ul> <p>NGramTokenizer 和 NGramTokenFilter的 min_gram 和 max_gram 允许差值。默认为 <code>1</code>。</p> <ul><li><code>index.max_shingle_diff</code></li></ul> <p><a href="/text_analysis/token/shingle"><code>shingle</code> 标记过滤器</a>在 max_shingle_size 和 min_shingle_size 间允许的最大差异。默认为 <code>3</code>。</p> <ul><li><code>index.max_refresh_listeners</code></li></ul> <p>索引的每个分片上可用的刷新监听器的最大值。监听器常实现 <a href="/rest_apis/document_apis/refresh"><code>refresh=wait_for</code></a></p> <ul><li><code>index.analyze.max_token_count</code></li></ul> <p>使用 _analyze API 的可以生成的最大标记数。默认为 <code>10,000</code>。</p> <ul><li><code>index.highlight.max_analyzed_offset</code></li></ul> <p>用于高亮请求的分析的最大字符数。此设置仅用于对文本的高亮请求——此文本被不带偏移量或词语向量索引。默认为 <code>1,000,000</code>。</p> <ul><li><code>index.max_terms_count</code></li></ul> <p>用于词语查询（Terms Query）的词语最大值。默认为 <code>65,536</code>。</p> <ul><li><code>index.max_regex_length</code></li></ul> <p>用于正则查询（Regexp Query）的正则最大长度。默认为 <code>1,000</code>。</p> <ul><li><code>index.query.default_field</code></li></ul> <p>（字符串或字符串数组）匹配一个或多个字段的通配符（*）模式。默认情况下，以下查询类型搜索这些匹配字段：</p> <ul><li><a href="/query_dsl/specialized_queries/more_like_this">更像这样</a></li> <li><a href="/query_dsl/full_text_queries/multi_match">多重匹配</a></li> <li><a href="/query_dsl/full_text_queries/query_string">查询字符串</a></li> <li><a href="/query_dsl/full_text_queries/simple_query_string">简单查询字符串</a></li></ul> <p>默认为 * ，它匹配所有符合<a href="/query_dsl/term_level_queries/term_level_queries">词语级查询</a>的字段，不包括元数据字段。</p> <ul><li><code>index.routing.allocation.enable</code></li></ul> <p>控制索引的分片分配。可设置为：</p> <ul><li><p><code>all</code> (默认) - 允许所有分片分片分配。</p></li> <li><p><code>primaries</code> - 允许主分片分片分配。</p></li> <li><p><code>new_primaries</code> - 允许新创建的主分片分片分配。</p></li> <li><p><code>none</code> - 不允许分片分配。</p></li> <li><p><code>index.routing.rebalance.enable</code></p></li></ul> <p>允许索引分片重平衡。可设置为：</p> <ul><li><p><code>all</code>（默认） - 允许所有分片分片重平衡。</p></li> <li><p><code>primaries</code> - 允许主分片分片重平衡。</p></li> <li><p><code>replicas</code> - 允许副本分片分片重平衡。</p></li> <li><p><code>none</code> - 不允许分片重平衡。</p></li> <li><p><code>index.gc_deletes</code></p></li></ul> <p><a href="/rest_apis/document_apis/delete#%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">已删除文档版本号</a>仍可用于<a href="/rest_apis/index_apis#%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">进一步版本化操作</a>的时长。默认为 <code>60s</code>。</p> <ul><li><code>index.default_pipeline</code></li></ul> <p>默认的索引<a href="/ingest/ingest">输入节点</a>管道。如果设置了默认管道，管道又不存在，索引请求将失败。可以使用 <code>pipeline</code> 参数覆盖默认值。特定的管道名称 <code>_none</code> 表明不运行输入管道。</p> <ul><li><code>index.final_pipeline</code></li></ul> <p>最终的索引<a href="/ingest/ingest">输入节点</a>管道。如果设置了默认管道，管道又不存在，索引请求将失败。最终管道始终在请求管道（如果指定）和默认管道（如果存在）之后运行。特定的管道名称 <code>_none</code> 表明不运行输入管道。</p> <h2 id="其他索引模块中的设置"><a href="#其他索引模块中的设置" class="header-anchor">#</a> 其他索引模块中的设置</h2> <p>索引模块中的其他设置：</p> <ul><li><a href="/text_analysis">分析</a></li></ul> <p>设置默认的分析器、分词器、标记过滤器和字符过滤器。</p> <ul><li><a href="/index_modules/index_shard/index_shard">索引分片分配</a></li></ul> <p>控制分片分配给节点的位置、时间和方式。</p> <ul><li><a href="/index_modules/mapper">映射</a></li></ul> <p>允许或禁用索引的动态映射。</p> <ul><li><a href="/index_modules/merge">合并</a></li></ul> <p>控制如何通过后台合并进程合并分片。</p> <ul><li><a href="/index_modules/similarity">相似性</a></li></ul> <p>配置自定义相似性设置以自定义搜索结果的评分方式。</p> <ul><li><a href="/index_modules/slow_log">慢日志</a></li></ul> <p>控制如何记录慢查询和取出请求（fetch query）日志。</p> <ul><li><a href="/index_modules/store/store">存储</a></li></ul> <p>配置用于访问分片数据的文件系统类型。</p> <ul><li><a href="/index_modules/translog">事务日志</a></li></ul> <p>控制事务日志和后台刷新操作。</p> <ul><li><a href="/index_modules/history_retention">历史保留</a></li></ul> <p>控制索引操作历史的保留。</p> <ul><li><a href="/index_modules/indexing_pressure">索引压力</a></li></ul> <p>配置索引背压限制。</p> <h2 id="x-pack-索引设置-x-pack"><a href="#x-pack-索引设置-x-pack" class="header-anchor">#</a> X-Pack 索引设置 [<code>X-Pack</code>]</h2> <ul><li><a href="/set_up_elasticsearch/configuring_elasticsearch/index_lifecycle">索引生命周期管理</a></li></ul> <p>指定的索引的生命周期策略和翻转别名。</p> <blockquote><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html" target="_blank" rel="noopener noreferrer">原文链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f54b6f9f.js" defer></script><script src="/assets/js/2.c3078b94.js" defer></script><script src="/assets/js/16.8ab752a5.js" defer></script>
  </body>
</html>
