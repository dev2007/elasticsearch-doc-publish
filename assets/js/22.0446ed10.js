(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{302:function(s,n,t){"use strict";t.r(n);var a=t(13),e=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"索引恢复优先级"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#索引恢复优先级"}},[s._v("#")]),s._v(" 索引恢复优先级")]),s._v(" "),n("p",[s._v("无论何时，尽可能的按优先级顺序恢复未分析的分片。索引按优先级顺序排序，如下：")]),s._v(" "),n("ul",[n("li",[s._v("可选的 "),n("code",[s._v("index.priority")]),s._v(" 设置（先高后低）")]),s._v(" "),n("li",[s._v("索引创建日期（先高后低）")]),s._v(" "),n("li",[s._v("索引名字（先高后低）")])]),s._v(" "),n("p",[s._v("这意味着，默认情况下，新索引比旧索引先恢复。")]),s._v(" "),n("p",[s._v("使用每个索引动态可更新的 "),n("code",[s._v("index.priority")]),s._v(" 设置用于自定义索引优先级顺序。例如：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("PUT index_1\n\nPUT index_2\n\nPUT index_3\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.priority"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nPUT index_4\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.priority"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("在以上例子中：")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("index_3")]),s._v(" 会首先恢复，因为它有最高的 "),n("code",[s._v("index.priority")]),s._v("。")]),s._v(" "),n("li",[n("code",[s._v("index_4")]),s._v(" 会接着恢复，因为它有第二高的优先级。")]),s._v(" "),n("li",[n("code",[s._v("index_2")]),s._v(" 会接着恢复，因为它是最近创建的。")]),s._v(" "),n("li",[n("code",[s._v("index_1")]),s._v(" 会最后恢复。")])]),s._v(" "),n("p",[s._v("这个设置接受一个整数，也可以通过"),n("a",{attrs:{href:"/rest_apis/index_apis/update_index_settings"}},[s._v("更新索引设置 API")]),s._v(" 在活动索引中更新。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("PUT index_4/_settings\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.priority"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/recovery-prioritization.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=e.exports}}]);