(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{334:function(s,a,t){"use strict";t.r(a);var n=t(13),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"创建或更新组件模板-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建或更新组件模板-api"}},[s._v("#")]),s._v(" 创建或更新组件模板 API")]),s._v(" "),a("p",[s._v("创建或更新组件模板。组件模板是构造"),a("a",{attrs:{href:"/index_templates/index_templates"}},[s._v("索引模板")]),s._v("的构建块，用于指定索引"),a("a",{attrs:{href:"/mapping/mapping"}},[s._v("映射")]),s._v("、"),a("a",{attrs:{href:"/index_modules"}},[s._v("设置")]),s._v("和"),a("a",{attrs:{href:"/aliases"}},[s._v("别名")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PUT _component_template/template_1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number_of_shards"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_source"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"enabled"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"host_name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"created_at"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"date"')]),s._v(",\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"format"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EEE MMM dd HH:mm:ss Z yyyy"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("h2",{attrs:{id:"请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[s._v("#")]),s._v(" 请求")]),s._v(" "),a("p",[a("code",[s._v("PUT /_component_template/<component-template>")])]),s._v(" "),a("h2",{attrs:{id:"前置条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前置条件"}},[s._v("#")]),s._v(" 前置条件")]),s._v(" "),a("ul",[a("li",[s._v("如果 Elasticsearch 安全特性启用，你使用此 API 必须有 "),a("code",[s._v("manage_index_templates")]),s._v(" 或 "),a("code",[s._v("manage")]),s._v(" "),a("a",{attrs:{href:"/secure_the_elastic_statck/user_authorization/security_privileges#%E9%9B%86%E7%BE%A4%E6%9D%83%E9%99%90"}},[s._v("集群权限")]),s._v("。")])]),s._v(" "),a("h2",{attrs:{id:"描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#描述"}},[s._v("#")]),s._v(" 描述")]),s._v(" "),a("p",[s._v("索引模板可以由多个组件模板组成。要使用组件模板，请在索引模板的 "),a("code",[s._v("composed_of")]),s._v(" 列表中指定它。组件模板仅作为匹配索引模板的一部分应用于新数据流和索引。")]),s._v(" "),a("p",[s._v("直接在索引模板或"),a("a",{attrs:{href:"/rest_apis/index_apis/create_index"}},[s._v("创建索引")]),s._v("请求中指定设置和映射，将覆盖组件模板中指定的任何设置或映射。")]),s._v(" "),a("p",[s._v("组件模板仅在创建索引期间使用。对于数据流，包括创建数据流和创建流的备份索引。对组件模板的更改不会影响现有索引，包括流的备份索引。")]),s._v(" "),a("h2",{attrs:{id:"组件模板中的备注"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件模板中的备注"}},[s._v("#")]),s._v(" 组件模板中的备注")]),s._v(" "),a("p",[s._v("你可以在索引模板中使用 C 风格的 /* */ 块注释。除了在大括号之前，你可以在请求体任何地方包含注释。")]),s._v(" "),a("h2",{attrs:{id:"路径参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路径参数"}},[s._v("#")]),s._v(" 路径参数")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("<component-template>")])])]),s._v(" "),a("p",[s._v("（必需，字符串）待创建的组件模板名字")]),s._v(" "),a("blockquote",[a("p",[s._v("Elasticsearch 包含以下内置的组件模板：")]),s._v(" "),a("ul",[a("li",[s._v("logs-mappings")]),s._v(" "),a("li",[s._v("logs-settings")]),s._v(" "),a("li",[s._v("metrics-mappings")]),s._v(" "),a("li",[s._v("metrics-settings")]),s._v(" "),a("li",[s._v("synthetics-mapping")]),s._v(" "),a("li",[s._v("synthetics-settings")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/fleet/7.14/fleet-overview.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Elastic 代理"),a("OutboundLink")],1),s._v(" 使用这些模板为其数据流配置备份索引。如果使用 Elastic 代理，并希望覆盖其中一个模板，请将替换模板的版本设置为高于当前版本。")]),s._v(" "),a("p",[s._v("如果你不使用 Elastic 代理，又想禁用内置的组件和索引模板，通过"),a("a",{attrs:{href:"/rest_apis/cluster_apis/cluster_update_settings"}},[s._v("集群更新设置 API")]),s._v("设置 "),a("code",[s._v("stack.templates.enabled")]),s._v(" 为 "),a("code",[s._v("false")]),s._v("。")])]),s._v(" "),a("h2",{attrs:{id:"查询参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询参数"}},[s._v("#")]),s._v(" 查询参数")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("create")])])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，请求不会覆盖或更新已有组件模板。默认为 "),a("code",[s._v("false")]),s._v("。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("master_timeout")])])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/rest_apis/api_convention/common_options#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D"}},[s._v("时间单位")]),s._v("）等待连接到主节点的时间。如果在超时过期前没有收到响应，则请求失败并返回错误。默认为 "),a("code",[s._v("30s")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"请求体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求体"}},[s._v("#")]),s._v(" 请求体")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("template")])]),s._v(" "),a("p",[s._v("（必需，对象）将应用的模板，可包括映射（"),a("code",[s._v("mappings")]),s._v("）、设置（"),a("code",[s._v("settings")]),s._v("）或别名（"),a("code",[s._v("aliases")]),s._v("）配置。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("template")]),s._v(" 属性\n"),a("ul",[a("li",[a("p",[a("code",[s._v("aliases")])]),s._v(" "),a("p",[s._v("（可选，对象）索引的别名。如果索引模板包含数据流("),a("code",[s._v("data_stream")]),s._v(")，此参数不支持。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("aliases")]),s._v(" 对象属性\n"),a("ul",[a("li",[a("p",[a("code",[s._v("<alias>")])]),s._v(" "),a("p",[s._v("（必需，对象）键为别名名字。支持"),a("a",{attrs:{href:"/rest_apis/api_convention/date_math_support_in_index_names"}},[s._v("日期数学")]),s._v("。\n对象体包含别名的选项。支持空对象。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("<alias>")]),s._v(" 属性\n"),a("ul",[a("li",[a("p",[a("code",[s._v("filter")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/query_dsl/query_dsl"}},[s._v("查询 DSL 对象")]),s._v("）用于限制别名查询时可以访问的文档。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("index_routing")])]),s._v(" "),a("p",[s._v("（可选，字符串）用于将索引操作路由到特定分片的值。如果指定，这将覆盖索引操作的路由值。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("is_hidden")])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，别名是"),a("a",{attrs:{href:"/rest_apis/api_conventions/multi-target_syntax#%E9%9A%90%E8%97%8F%E6%95%B0%E6%8D%AE%E6%B5%81%E5%92%8C%E7%B4%A2%E5%BC%95"}},[s._v("隐藏的")]),s._v("。默认为 "),a("code",[s._v("false")]),s._v("。别名所有的索引必须有相同的 "),a("code",[s._v("is_hidden")]),s._v(" 值。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("is_write_index")])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，索引是别名的"),a("a",{attrs:{href:"/rest_apis/index_apis/aliases#%E5%86%99%E7%B4%A2%E5%BC%95"}},[s._v("写索引")]),s._v("。默认为"),a("code",[s._v("false")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("routing")])]),s._v(" "),a("p",[s._v("（可选，字符串）用于将索引和搜索操作路由到特定分片的值。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("search_routing")])]),s._v(" "),a("p",[s._v("（可选，字符串）用于将搜索操作路由到特定分片的值。如果指定，这将覆盖搜索操作的 "),a("code",[s._v("routing")]),s._v(" 值。")])])])])])])])])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("mappings")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/mapping/mapping"}},[s._v("映射对象")]),s._v("）索引中字段的映射。如果指定，此映射可以包括：")]),s._v(" "),a("ul",[a("li",[s._v("字段名字")]),s._v(" "),a("li",[a("a",{attrs:{href:"/mapping/filed_data_types/filed_data_types"}},[s._v("字段数据类型")])]),s._v(" "),a("li",[a("a",{attrs:{href:"/mapping/mapping_parameters/mapping_parameters"}},[s._v("映射参数")])])]),s._v(" "),a("p",[s._v("参阅"),a("a",{attrs:{href:"/mapping/mapping"}},[s._v("映射")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("settings")]),s._v("\n（可选，"),a("a",{attrs:{href:"/index_modules#%E7%B4%A2%E5%BC%95%E8%AE%BE%E7%BD%AE"}},[s._v("索引设置对象")]),s._v("）索引配置选项。参阅"),a("a",{attrs:{href:"/index_modules#%E7%B4%A2%E5%BC%95%E8%AE%BE%E7%BD%AE"}},[s._v("索引设置")]),s._v("。")])])])])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("version")])]),s._v(" "),a("p",[s._v("（可选，整数）用于显式管理组件模板的版本号。Elasticsearch 不会自动生成或增加此数字。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("allow_auto_create")])]),s._v(" "),a("p",[s._v("（可选，布尔值）此设置覆盖了集群设置中的 "),a("a",{attrs:{href:"/rest_apis/document_apis/esindex#%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E6%B5%81%E5%92%8C%E7%B4%A2%E5%BC%95"}},[a("code",[s._v("action.auto_create_index")])]),s._v(" 的值。如果在模板中设置为 "),a("code",[s._v("true")]),s._v("，即使通过 "),a("code",[s._v("actions.auto_create_index")]),s._v(" 禁用了自动创建索引，索引也能通过这个模板自动创建。如果设置为 "),a("code",[s._v("false")]),s._v("，匹配模板的索引或数据流必须被显示创建，且可能永远不会被自动创建。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("_meta")])]),s._v(" "),a("p",[s._v("（可选，对象）可选的有关组件模板的用户元数据。可以有任何内容。Elasticsearch 不会自动生成此内容。")])])]),s._v(" "),a("h2",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("h3",{attrs:{id:"带索引别名的组件模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#带索引别名的组件模板"}},[s._v("#")]),s._v(" 带索引别名的组件模板")]),s._v(" "),a("p",[s._v("你可以在组件模板中包含"),a("a",{attrs:{href:"/aliases"}},[s._v("索引别名")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PUT _component_template/template_1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number_of_shards"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aliases"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"alias1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"alias2"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"filter"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"term"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user.id"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kimchy"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"routing"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shard-1"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{index}-alias"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("ul",[a("li",[a("code",[s._v('"{index}-alias" : {}')]),s._v("： 在别名中的 "),a("code",[s._v("{index}")]),s._v(" 占位符，会在索引创建时应用模板时，替换为真实的索引名字。")])]),s._v(" "),a("h3",{attrs:{id:"应用组件模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用组件模板"}},[s._v("#")]),s._v(" 应用组件模板")]),s._v(" "),a("p",[s._v("不能直接将组件模板应用于数据流或索引。若要应用，组件模板必须包含在索引模板的 "),a("code",[s._v("composed_of")]),s._v(" 列表中。参阅"),a("a",{attrs:{href:"/index_templates/index_templates"}},[s._v("索引模板")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"组件模板版本控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件模板版本控制"}},[s._v("#")]),s._v(" 组件模板版本控制")]),s._v(" "),a("p",[s._v("可以使用 "),a("code",[s._v("version")]),s._v(" 参数向组件模板添加版本号。外部系统可以使用这些版本号来简化模板管理。")]),s._v(" "),a("p",[a("code",[s._v("version")]),s._v(" 参数是可选的，Elasticsearch 不会自动生成或使用它。")]),s._v(" "),a("p",[s._v("若要取消设置 "),a("code",[s._v("version")]),s._v("，请在不指定模板的情况下替换模板。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PUT /_component_template/template_1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number_of_shards"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("为了检查 "),a("code",[s._v("version")]),s._v("，你可以使用"),a("a",{attrs:{href:"/rest_apis/index_apis/get_component_template"}},[s._v("获取组件模板 API")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"组件模板元数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件模板元数据"}},[s._v("#")]),s._v(" 组件模板元数据")]),s._v(" "),a("p",[s._v("你可以使用 "),a("code",[s._v("_meta")]),s._v(" 参数向组件模板添加任意元数据。此用户定义的对象存储在集群状态，因此最好保持其简短。")]),s._v(" "),a("p",[a("code",[s._v("_meta")]),s._v(" 参数是可选的，Elasticsearch 不会自动生成或使用它。")]),s._v(" "),a("p",[s._v("要取消设置 "),a("code",[s._v("_meta")]),s._v("，请在不指定模板的情况下替换模板。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PUT /_component_template/template_1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number_of_shards"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_meta"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"description"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"set number of shards to one"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"serialization"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"class"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MyComponentTemplate"')]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("为了检查 "),a("code",[s._v("_meta")]),s._v("，你可以使用"),a("a",{attrs:{href:"/rest_apis/index_apis/get_component_template"}},[s._v("获取组件模板 API")]),s._v("。")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-component-template.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);