(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{408:function(s,e,t){"use strict";t.r(e);var a=t(13),r=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"安全设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安全设置"}},[s._v("#")]),s._v(" 安全设置")]),s._v(" "),e("p",[s._v("有些设置是敏感的，依靠文件系统权限来保护它们的值是不够的。对于这个用例，Elasticsearch 提供一个密钥存储库和 "),e("a",{attrs:{href:"/command_line_tools/elasticsearch_keystore"}},[s._v("elasticsearch-keystore")]),s._v(" 工具来管理密钥存储库中的设置。")]),s._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[s._v("重要")]),s._v(" "),e("p",[s._v("只有一些设置被设计为从密钥库中读取。但是，密钥库没有验证来阻止不支持的设置。向密钥库中添加不支持的设置将导致 Elasticsearch 启动失败。要查看密钥存储库中是否支持某个设置，请在设置引用中查找 “Secure” 限定符。")])]),s._v(" "),e("p",[s._v("所有对密钥库的修改只有在重新启动 Elasticsearch 后才会生效。")]),s._v(" "),e("p",[s._v("这些设置，就像配置文件 "),e("code",[s._v("elasticsearch.yml")]),s._v(" 中的常规设置一样，需要在集群中的每个节点上指定。目前，所有安全设置都是特定于节点的设置，必须在每个节点上具有相同的值。")]),s._v(" "),e("h2",{attrs:{id:"可重新加载的安全设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可重新加载的安全设置"}},[s._v("#")]),s._v(" 可重新加载的安全设置")]),s._v(" "),e("p",[s._v("就像 "),e("code",[s._v("elasticsearch.yml")]),s._v(" 中的设置值一样中，对密钥存储库内容的更改不会自动应用到正在运行的 Elasticsearch 节点。重新读取设置需要重新启动节点。但是，某些安全设置被标记为 "),e("strong",[s._v("reloadable（可重新加载）")]),s._v("。这些设置可以重新读取并应用到运行中的节点上。")]),s._v(" "),e("p",[s._v("所有安全设置的值(无论是否"),e("strong",[s._v("reloadable（可重新加载）")]),s._v(")，必须在所有集群节点上相同。在完成所需的安全设置更改后，使用bin/elasticsearch-keystore add命令，调用:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("POST _nodes/reload_secure_settings\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"secure_settings_password"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keystore-password"')]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ol",[e("li",[e("code",[s._v('"secure_settings_password": "keystore-password"')]),s._v("：Elasticsearch 密钥存储库使用的加密密码。")])]),s._v(" "),e("p",[s._v("该 API 在每个集群节点上解密并重新读取整个密钥存储库，但只应用 **reloadable（可重新加载）**的安全设置。对其他设置的更改直到下一次重启才生效。一旦调用返回，重新加载就完成了，这意味着依赖于这些设置的所有内部数据结构都已被更改。一切都应该看起来好像设置从一开始就有了新的值。")]),s._v(" "),e("p",[s._v("在更改多个 **reloadable（可重新加载）**的安全设置时，在每个集群节点上修改所有这些设置，然后发出 "),e("a",{attrs:{href:"/rest_apis/cluster_apis/nodes_reload_secure_settings"}},[s._v("reload_secure_settings")]),s._v(" 调用，而不是在每次修改后重新加载。")]),s._v(" "),e("p",[s._v("有可重新加载的安全设置:")]),s._v(" "),e("ul",[e("li",[e("p",[e("a",{attrs:{href:"/snapshot_and_restore/azure_repository"}},[s._v("Azure 存储库插件")])])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/plugins/8.4/discovery-ec2-usage.html#_configuring_ec2_discovery",target:"_blank",rel:"noopener noreferrer"}},[s._v("EC2 发现插件"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"/snapshot_and_restore/google_cloud_storage_repository"}},[s._v("GCS 存储库插件")])])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"/snapshot_and_restore/s3_repository"}},[s._v("S3 存储库插件")])])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/secure_settings"}},[s._v("监控设置")])])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/watcher_settings"}},[s._v("观察器设置")])])])]),s._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=r.exports}}]);