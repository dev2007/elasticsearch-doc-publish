(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{300:function(e,t,a){"use strict";a.r(t);var _=a(13),r=Object(_.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"索引级数据层分配过滤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引级数据层分配过滤"}},[e._v("#")]),e._v(" 索引级数据层分配过滤")]),e._v(" "),t("p",[e._v("你可以使用索引级别分配设置来控制将索引分配到哪个"),t("a",{attrs:{href:"/data_management/data_tiers"}},[e._v("数据层")]),e._v("。数据层分配器是一个使用两个内置节点属性的分片分配过滤器："),t("code",[e._v("_tier")]),e._v(" 和 "),t("code",[e._v("_tier_preference")]),e._v("。")]),e._v(" "),t("p",[e._v("这些层属性通过这些数据角色设置：")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/node#%E5%86%85%E5%AE%B9%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9"}},[e._v("data_content")])]),e._v(" "),t("li",[t("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/node#%E7%83%AD%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9"}},[e._v("data_hot")])]),e._v(" "),t("li",[t("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/node#%E6%B8%A9%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9"}},[e._v("data_warm")])]),e._v(" "),t("li",[t("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/node#%E5%86%B7%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9"}},[e._v("data_cold")])]),e._v(" "),t("li",[t("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/node#%E5%86%BB%E7%BB%93%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9"}},[e._v("data_frozen")])])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),t("p",[t("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/node#%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9"}},[e._v("数据")]),e._v("角色不是有效的数据层，不能用于数据层筛选。"),t("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/node#%E5%86%BB%E7%BB%93%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9"}},[e._v("data_frozen")]),e._v(" 角色只能用于搜索挂载了 shared_cache 选项的快照。")])]),e._v(" "),t("h2",{attrs:{id:"数据层分配设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据层分配设置"}},[e._v("#")]),e._v(" 数据层分配设置")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("index.routing.allocation.include._tier")])])]),e._v(" "),t("p",[e._v("分配索引给节点，节点的 "),t("code",[e._v("node.roles")]),e._v(" 配置至少有一个逗号分隔的值。")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("index.routing.allocation.require._tier")])])]),e._v(" "),t("p",[e._v("分配索引给节点，节点的 "),t("code",[e._v("node.roles")]),e._v(" 配置有所有逗号分隔的值。")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("index.routing.allocation.exclude._tier")])])]),e._v(" "),t("p",[e._v("分配索引给节点，节点的 "),t("code",[e._v("node.roles")]),e._v(" 配置没有任何逗号分隔的值。")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("index.routing.allocation.include._tier_preference")])])]),e._v(" "),t("p",[e._v("分配索引给列表中具有可用节点的第一层。如果优先层中没有节点，这会阻止索引保持未分配状态。例如，如果你设置 "),t("code",[e._v("index.routing.allocation.include._tier_preference")]),e._v(" 为 "),t("code",[e._v("data_warm,data_hot")]),e._v("，那么如果有节点具有 "),t("code",[e._v("data_warm")]),e._v(" 角色，索引会被分配到温（warm）层。如果在温层没有节点，但有节点具有 "),t("code",[e._v("data_hot")]),e._v(" 角色，索引分被分配到热（hot）层。")]),e._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/data-tier-shard-filtering.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("原文链接"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);