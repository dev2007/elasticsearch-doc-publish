(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{360:function(s,a,t){"use strict";t.r(a);var n=t(13),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"翻转-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#翻转-api"}},[s._v("#")]),s._v(" 翻转 API")]),s._v(" "),a("p",[s._v("为"),a("a",{attrs:{href:"/data_streams/data_streams"}},[s._v("数据流")]),s._v("或"),a("a",{attrs:{href:"/rest_apis/index_apis/create_or_update_index_alias"}},[s._v("索引别名")]),s._v("创建一个新的索引。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("POST my-data-stream/_rollover\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[s._v("#")]),s._v(" 请求")]),s._v(" "),a("p",[a("code",[s._v("POST /<rollover-target>/_rollover/")])]),s._v(" "),a("p",[a("code",[s._v("POST /<rollover-target>/_rollover/<target-index>")])]),s._v(" "),a("h2",{attrs:{id:"前置条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前置条件"}},[s._v("#")]),s._v(" 前置条件")]),s._v(" "),a("ul",[a("li",[s._v("如果 Elasticsearch 安全特性启用，你对翻转目标必须有 "),a("code",[s._v("manage")]),s._v(" "),a("a",{attrs:{href:"/secure_the_elastic_statck/user_authorization/security_privileges#%E7%B4%A2%E5%BC%95%E6%9D%83%E9%99%90"}},[s._v("索引权限")]),s._v("。")])]),s._v(" "),a("h2",{attrs:{id:"描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#描述"}},[s._v("#")]),s._v(" 描述")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("我们推荐使用 ILM 的"),a("a",{attrs:{href:"/ILM_manage_the_index_lifecycle/index_lifecycle_actions/rollover"}},[s._v("翻转")]),s._v("操作来自动执行翻转。参阅"),a("a",{attrs:{href:"/set_up_elasticsearch/index_lifecycle"}},[s._v("索引生命周期")])])]),s._v(" "),a("p",[s._v("翻转 API 为数据流或索引别名创建一个新索引。API 的行为依赖翻转的目标。")]),s._v(" "),a("h3",{attrs:{id:"翻转数据流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#翻转数据流"}},[s._v("#")]),s._v(" 翻转数据流")]),s._v(" "),a("p",[s._v("如果你翻转数据流，API 将为数据流创建一个新的写索引。流的前一个写索引会变为常规的协助索引。翻转还会增加数据流的辈分（generation）。")]),s._v(" "),a("h3",{attrs:{id:"翻转带有写索引的索引别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#翻转带有写索引的索引别名"}},[s._v("#")]),s._v(" 翻转带有写索引的索引别名")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("在 Elasticsearch 7.9 之前，你通常会使用带有写索引的"),a("a",{attrs:{href:"/rest_apis/index_apis/create_or_update_index_alias"}},[s._v("索引别名")]),s._v("来管理时序数据。数据流取代了这一功能，需要较少的维护，并自动与数据层集成。\n参阅"),a("a",{attrs:{href:"/data_streams/set_up_a_data_stream#%E8%BD%AC%E6%8D%A2%E7%B4%A2%E5%BC%95%E5%88%AB%E5%90%8D%E4%B8%BA%E6%95%B0%E6%8D%AE%E6%B5%81"}},[s._v("转换索引别名为数据流")]),s._v("。")])]),s._v(" "),a("p",[s._v("如果一个索引别名指向多个索引，其中一个索引必须为"),a("a",{attrs:{href:"/rest_apis/index_apis/aliases#%E5%86%99%E7%B4%A2%E5%BC%95"}},[s._v("写索引")]),s._v("。翻转 API 为别名创建一个新的写索引，并将它的 "),a("code",[s._v("is_write_index")]),s._v(" 设置为 "),a("code",[s._v("true")]),s._v("。API 也会将前一个写索引设置 "),a("code",[s._v("is_write_index")]),s._v(" 为 "),a("code",[s._v("false")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"翻转带有一个索引的索引别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#翻转带有一个索引的索引别名"}},[s._v("#")]),s._v(" 翻转带有一个索引的索引别名")]),s._v(" "),a("p",[s._v("如果你翻转仅指向一个索引的索引别名，API 将为别名创建新索引，并从别名移除原始索引。")]),s._v(" "),a("h2",{attrs:{id:"为别名增加索引名字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为别名增加索引名字"}},[s._v("#")]),s._v(" 为别名增加索引名字")]),s._v(" "),a("p",[s._v("当你翻转索引别名时，你可以为新索引指定名字。如果你不指定名字，且当前索引以 "),a("code",[s._v("-")]),s._v(" 和数字结尾，比如 "),a("code",[s._v("my-index-000001")]),s._v(" 或 "),a("code",[s._v("my-index-3")]),s._v("，新的索引名字会增加数字。例如，你翻转一个带有当前索引名字为 "),a("code",[s._v("my-index-000001")]),s._v(" 的别名，翻转操作会创建一个名为 "),a("code",[s._v("my-index-000002")]),s._v(" 的新索引。无论前一个索引名字是什么，这个数字总是 6 个字符并以 0 填充。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("将日期数学与索引别名翻转一起使用")]),s._v("\n如果你为时序数据使用索引别名，你可以在索引名字中使用"),a("a",{attrs:{href:"/rest_apis/api_convention/date_math_support_in_index_names"}},[s._v("日期数学")]),s._v("以追踪翻转日期。例如，你可以创建一个指向索引名为 "),a("code",[s._v("<my-index-{now/d}-000001>")]),s._v(" 的别名。如果你在2099年5月6日创建索引，索引名为 "),a("code",[s._v("my-index-2099.05.06-000001")]),s._v("。如果你在2099年5月7日翻转这个别名，新索引的名字为 "),a("code",[s._v("my-index-2099.05.07-000002")]),s._v("。例如，参阅"),a("a",{attrs:{href:"/rest_apis/index_apis/rollover_index#%E7%BF%BB%E8%BD%AC%E5%B8%A6%E6%9C%89%E5%86%99%E7%B4%A2%E5%BC%95%E7%9A%84%E7%B4%A2%E5%BC%95%E5%88%AB%E5%90%8D"}},[s._v("翻转带有写索引的索引别名")])])]),s._v(" "),a("h2",{attrs:{id:"等待活动分片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#等待活动分片"}},[s._v("#")]),s._v(" 等待活动分片")]),s._v(" "),a("p",[s._v("翻转创建一个新的索引，并受限于设置 "),a("a",{attrs:{href:"/rest_apis/index_apis/create_index#%E7%AD%89%E5%BE%85%E6%B4%BB%E5%8A%A8%E5%88%86%E7%89%87"}},[a("code",[s._v("wait_for_active_shards")])]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"路径参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路径参数"}},[s._v("#")]),s._v(" 路径参数")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("<rollover-target>")])]),s._v(" "),a("p",[s._v("（必需的，字符串）待翻转的数据流或索引别名的名字。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("<target-index>")])]),s._v(" "),a("p",[s._v("（可选的，字符串）创建的目标索引名称。支持"),a("a",{attrs:{href:"/rest_apis/api_convention/date_math_support_in_index_names"}},[s._v("日期数学")]),s._v("。数据流不支持这个参数。")]),s._v(" "),a("p",[s._v("如果别名的当前写索引的名字不以 "),a("code",[s._v("-")]),s._v(" 和数字结尾，例如 "),a("code",[s._v("my-index-000001")]),s._v(" 或 "),a("code",[s._v("my-index-3")]),s._v(",这个参数是必需的。")]),s._v(" "),a("p",[s._v("索引名字必须符合以下约定：")]),s._v(" "),a("ol",[a("li",[s._v("只能是小写字符")]),s._v(" "),a("li",[s._v("不能包含字符："),a("code",[s._v("\\")]),s._v("、"),a("code",[s._v("/")]),s._v("、"),a("code",[s._v("*")]),s._v("、"),a("code",[s._v("?")]),s._v("、"),a("code",[s._v('"')]),s._v("、"),a("code",[s._v("<")]),s._v("、"),a("code",[s._v(">")]),s._v("、"),a("code",[s._v("|")]),s._v("、"),a("code"),s._v("(空格)、"),a("code",[s._v(",")]),s._v("、"),a("code",[s._v("#")])]),s._v(" "),a("li",[s._v("7.0 之前索引可以包含冒号（:），但在 7.0 之后不推荐。")]),s._v(" "),a("li",[s._v("不能以 "),a("code",[s._v("-")]),s._v("、"),a("code",[s._v("_")]),s._v("、"),a("code",[s._v("+")]),s._v(" 开头")]),s._v(" "),a("li",[s._v("不能是 "),a("code",[s._v(".")]),s._v(" 或 "),a("code",[s._v("..")])]),s._v(" "),a("li",[s._v("长度不能超过 255 字节（注意是字节，所以多字节字符会更快达到 255 的限制）")]),s._v(" "),a("li",[s._v("名字以 "),a("code",[s._v(".")]),s._v(" 开头不推荐，除非由插件管理的"),a("a",{attrs:{href:"/index_modules"}},[s._v("隐藏索引")]),s._v("和内部索引")])])])]),s._v(" "),a("h2",{attrs:{id:"查询参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询参数"}},[s._v("#")]),s._v(" 查询参数")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("dry_run")])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，则检查当前索引是否匹配一个或多个指定条件（"),a("code",[s._v("conditions")]),s._v("），但不执行翻转。默认为 "),a("code",[s._v("false")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("include_type_name")])]),s._v(" "),a("p",[s._v("["),a("s",[s._v("7.0.0")]),s._v("开始不推荐]（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v(",映射体中需要映射类型。默认为 "),a("code",[s._v("false")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("wait_for_active_shards")])]),s._v(" "),a("p",[s._v("（可选，字符串）在操作执行之前必须活动的分片复制数量。设置为 "),a("code",[s._v("all")]),s._v(" 或任何正整数，最大值为索引分片总数（"),a("code",[s._v("number_of_replicas+1")]),s._v("）。默认为：1，主分片。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("master_timeout")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/rest_apis/api_convention/common_options#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D"}},[s._v("时间单位")]),s._v("）等待连接到主节点的时间。如果在超时过期前没有收到响应，则请求失败并返回错误。默认为 "),a("code",[s._v("30s")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("timeout")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/rest_apis/api_convention/common_options#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D"}},[s._v("时间单位")]),s._v("）等待响应的时间。如果在超时过期之前没有收到响应，则请求失败并返回错误。默认为 "),a("code",[s._v("30s")]),s._v("。")])])]),s._v(" "),a("h2",{attrs:{id:"请求体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求体"}},[s._v("#")]),s._v(" 请求体")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("aliases")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/rest_apis/idnex_apis/bulk_index_alias"}},[s._v("别名对象")]),s._v("）包含目标索引的索引别名。索引别名名字支持"),a("a",{attrs:{href:"/rest_apis/api_convention/date_math_support_in_index_names"}},[s._v("日期数学")]),s._v("。")])])]),s._v(" "),a("p",[s._v("数据流不支持这个参数。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("conditions")])]),s._v(" "),a("p",[s._v("（可选，对象）翻转的条件。如果指定，Elasticsearch 仅在当前索引满足以下一个或多个条件时执行翻转。如果参数未指定，Elasticsearch 无条件执行翻转。")]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),a("p",[s._v("为了触发翻转，当前索引在请求时必须满足这些条件。Elasticsearch 不会在 API 响应后监视索引。要自动化翻转，改用 ILM 的"),a("a",{attrs:{href:"/ILM_manage_the_index_lifecycle/index_lifecycle_actions/rollover"}},[s._v("翻转")]),s._v("。")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("conditions")]),s._v(" 的属性")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("max_age")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/rest_apis/api_convention/common_options#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D"}},[s._v("时间单位")]),s._v("）在达到创建索引所用的最长时间后触发翻转。从索引创建时间开始，始终计算运行的时间，即使索引起始日期配置为自定义日期，例如当使用设置 "),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/index_lifecycle_management_settings"}},[a("code",[s._v("index.lifecycle.parse_origination_date")])]),s._v(" 或 "),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/index_lifecycle_management_settings"}},[a("code",[s._v("index.lifecycle.origination_date")])]),s._v(" 。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("max_docs")])]),s._v(" "),a("p",[s._v("（可选，整数）在达到指定的最大文档数后触发翻转。自上次刷新以来添加的文档不包括在文档计数中。文档计数不包括副本分片中的文档。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("max_size")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/rest_apis/api_convention/common_options#%E5%AD%97%E8%8A%82%E5%A4%A7%E5%B0%8F%E5%8D%95%E4%BD%8D"}},[s._v("字节单位")]),s._v("）当索引达到一定大小时触发翻转。这是索引中所有主分片的总大小。副本不会被计算到最大索引大小。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("为查看当前索引大小，可以使用 "),a("a",{attrs:{href:"/rest_apis/compact_and_aligned_text_apis/cat_indices"}},[a("code",[s._v("_cat indices")])]),s._v(" API。"),a("code",[s._v("pri.store.size")]),s._v(" 值显示所有主分片的组合大小。")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("max_primary_shard_size")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/rest_apis/api_convention/common_options#%E5%AD%97%E8%8A%82%E5%A4%A7%E5%B0%8F%E5%8D%95%E4%BD%8D"}},[s._v("字节单位")]),s._v("）当索引中最大的主分片达到一定大小时触发翻转。主分片在索引中的最大值。同 "),a("code",[s._v("max_size")]),s._v(" 一样，副本会被忽略。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("为了查看当前分片大小，可以使用 ["),a("code",[s._v("_cat shards")]),s._v("] API。"),a("code",[s._v("store")]),s._v(" 值展示每个分片大小，"),a("code",[s._v("prirep")]),s._v(" 指示一个分片是主分片（"),a("code",[s._v("p")]),s._v("）还是副本（"),a("code",[s._v("r")]),s._v("）。")])])])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("mappings")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/mapping/mapping"}},[s._v("映射对象")]),s._v("）索引中字段映射。如果指定，映射可以包含：")]),s._v(" "),a("ol",[a("li",[s._v("字段名字")]),s._v(" "),a("li",[a("a",{attrs:{href:"/mapping/field_data_types"}},[s._v("字段数据类型")])]),s._v(" "),a("li",[a("a",{attrs:{href:"/mapping/mapping_parameters/mapping_parameters"}},[s._v("映射参数")])])]),s._v(" "),a("p",[s._v("参阅"),a("a",{attrs:{href:"/mapping/mapping"}},[s._v("映射")])]),s._v(" "),a("p",[s._v("数据流不支持这个参数。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("settings")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/index_modules#%E7%B4%A2%E5%BC%95%E8%AE%BE%E7%BD%AE"}},[s._v("索引设置对象")]),s._v("）索引的配置选项。参阅"),a("a",{attrs:{href:"/index_modules#%E7%B4%A2%E5%BC%95%E8%AE%BE%E7%BD%AE"}},[s._v("索引设置")])]),s._v(" "),a("p",[s._v("数据流不支持这个参数。")])])]),s._v(" "),a("h2",{attrs:{id:"响应体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应体"}},[s._v("#")]),s._v(" 响应体")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("acknowledged")])]),s._v(" "),a("p",[s._v("（布尔值）如果为 "),a("code",[s._v("true")]),s._v("，请求在 "),a("code",[s._v("timeout")]),s._v(" 周期内接收来自主节点的响应。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("shards_acknowledged")])]),s._v(" "),a("p",[s._v("（布尔值）如果为 "),a("code",[s._v("true")]),s._v("，请求在 "),a("code",[s._v("master_timeout")]),s._v(" 周期内接收来自"),a("a",{attrs:{href:"/rest_apis/document_apis/esindex#%E6%B4%BB%E5%8A%A8%E5%88%86%E7%89%87"}},[s._v("活动分片")]),s._v("的响应。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("old_index")])]),s._v(" "),a("p",[s._v("（字符串）数据流或索引别名的前一个索引。对数据流和有写索引的索引别名，指前一个写索引。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("new_index")])]),s._v(" "),a("p",[s._v("（字符串）翻转创建的索引。对数据洲和有写索引的索引别名，指当前写索引。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("rolled_over")])]),s._v(" "),a("p",[s._v("（布尔值）如果为 "),a("code",[s._v("true")]),s._v("，数据流或索引别名翻转。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("dry_run")])]),s._v(" "),a("p",[s._v("（布尔值）如果为 "),a("code",[s._v("true")]),s._v("，Elasticsearch 不执行翻转。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("condition")])]),s._v(" "),a("p",[s._v("(对象)指定在请求的 "),a("code",[s._v("conditions")]),s._v(" 里的每个条件的结果。如果未指定任何条件，这是一个空对象。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("condition")]),s._v(" 的属性")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("<condition>")])]),s._v(" "),a("p",[s._v("（布尔值）键是每个条件。值是它的结果。如果为 "),a("code",[s._v("true")]),s._v("，该索引在翻转时满足条件。")])])])])])])]),s._v(" "),a("h2",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("h3",{attrs:{id:"翻转数据流-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#翻转数据流-2"}},[s._v("#")]),s._v(" 翻转数据流")]),s._v(" "),a("p",[s._v("以下请求无条件翻转数据流。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("POST my-data-stream/_rollover\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果当前写索引满足一个或多个以下的条件，以下的请求只翻转数据流：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("索引在 7 天或更早前创建")])]),s._v(" "),a("li",[a("p",[s._v("索引包含 1,000 或更多的文档")])]),s._v(" "),a("li",[a("p",[s._v("索引最大的主分片是 50GB 或更大")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("POST my-data-stream/_rollover\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_age"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7d"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_docs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_primary_shard_size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"50gb"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("API 返回：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"acknowledged"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shards_acknowledged"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"old_index"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".ds-my-data-stream-2099.05.06-000001"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new_index"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".ds-my-data-stream-2099.05.07-000002"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rolled_over"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dry_run"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[max_age: 7d]"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[max_docs: 1000]"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[max_primary_shard_size: 50gb]"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"翻转带有写索引的索引别名-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#翻转带有写索引的索引别名-2"}},[s._v("#")]),s._v(" 翻转带有写索引的索引别名")]),s._v(" "),a("p",[s._v("以下请求创建 "),a("code",[s._v("<my-index-{now/d}-000001>")]),s._v("，且将它设置为 "),a("code",[s._v("my-alias")]),s._v(" 的写索引。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# PUT <my-index-{now/d}-000001>")]),s._v("\nPUT %3Cmy-index-%7Bnow%2Fd%7D-000001%3E\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aliases"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-alias"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"is_write_index"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("如果当前写索引满足一个或多个以下的条件，以下的请求只翻转别名：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("索引在 7 天或更早前创建")])]),s._v(" "),a("li",[a("p",[s._v("索引包含 1,000 或更多的文档")])]),s._v(" "),a("li",[a("p",[s._v("索引最大的主分片是 50GB 或更大")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("POST my-alias/_rollover\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_age"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7d"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_docs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_primary_shard_size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"50gb"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("API 返回：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"acknowledged"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shards_acknowledged"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"old_index"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-index-2099.05.06-000001"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new_index"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-index-2099.05.07-000002"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rolled_over"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dry_run"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[max_age: 7d]"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[max_docs: 1000]"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[max_primary_shard_size: 50gb]"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("如果别名的索引名使用日期数学，并且你以固定的间隔翻转索引，则可以使用日期数学缩小搜索范围。例如，以下搜索目标索引是在过去三天创建的。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# GET /<my-index-{now/d}-*>,<my-index-{now/d-1d}-*>,<my-index-{now/d-2d}-*>/_search")]),s._v("\nGET /%3Cmy-index-%7Bnow%2Fd%7D-*%3E%2C%3Cmy-index-%7Bnow%2Fd-1d%7D-*%3E%2C%3Cmy-index-%7Bnow%2Fd-2d%7D-*%3E/_search\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"翻转只有一个索引的索引别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#翻转只有一个索引的索引别名"}},[s._v("#")]),s._v(" 翻转只有一个索引的索引别名")]),s._v(" "),a("p",[s._v("以下请求创建 "),a("code",[s._v("<my-index-{now/d}-000001>")]),s._v(" 以及它的别名 "),a("code",[s._v("my-write-alias")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# PUT <my-index-{now/d}-000001>")]),s._v("\nPUT %3Cmy-index-%7Bnow%2Fd%7D-000001%3E\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aliases"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-write-alias"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("如果当前索引满足一个或多个以下的条件，以下的请求只翻转别名：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("索引在 7 天或更早前创建")])]),s._v(" "),a("li",[a("p",[s._v("索引包含 1,000 或更多的文档")])]),s._v(" "),a("li",[a("p",[s._v("索引最大的主分片是 50GB 或更大")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("POST my-write-alias/_rollover\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_age"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7d"')]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_docs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_primary_shard_size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"50gb"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("API 返回：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"acknowledged"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"shards_acknowledged"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"old_index"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-index-2099.05.06-000001"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new_index"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-index-2099.05.07-000002"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rolled_over"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dry_run"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[max_age: 7d]"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[max_docs: 1000]"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[max_primary_shard_size: 50gb]"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"在翻转时指定设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在翻转时指定设置"}},[s._v("#")]),s._v(" 在翻转时指定设置")]),s._v(" "),a("p",[s._v("典型的，你可以使用"),a("a",{attrs:{href:"/index_templates/index_templates"}},[s._v("索引模板")]),s._v("在翻转时自动配置索引创建。如果你翻转索引别名，你可以使用翻转 API 添加额外的索引设置或重写在模板中的设置。数据流不支持 "),a("code",[s._v("settings")]),s._v(" 参数。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\nPOST my-alias/_rollover\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.number_of_shards"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-rollover-index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);