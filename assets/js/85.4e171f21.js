(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{363:function(s,a,t){"use strict";t.r(a);var n=t(13),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"模拟索引模板-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模拟索引模板-api"}},[s._v("#")]),s._v(" 模拟索引模板 API")]),s._v(" "),a("p",[s._v("返回将由特定"),a("a",{attrs:{href:"/index_templates/index_templates"}},[s._v("索引模板")]),s._v("应用的索引配置。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("POST /_index_template/_simulate/template_1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[s._v("#")]),s._v(" 请求")]),s._v(" "),a("p",[a("code",[s._v("POST /_index_template/_simulate/<index-template>")])]),s._v(" "),a("h2",{attrs:{id:"前置条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前置条件"}},[s._v("#")]),s._v(" 前置条件")]),s._v(" "),a("ul",[a("li",[s._v("如果 Elasticsearch 安全特性启用，你使用此 API 必须有 "),a("code",[s._v("manage_index_templates")]),s._v(" 或 "),a("code",[s._v("manage")]),s._v(" "),a("a",{attrs:{href:"/secure_the_elastic_statck/user_authorization/security_privileges#%E9%9B%86%E7%BE%A4%E6%9D%83%E9%99%90"}},[s._v("集群权限")]),s._v("。")])]),s._v(" "),a("h2",{attrs:{id:"路径参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路径参数"}},[s._v("#")]),s._v(" 路径参数")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("<index-template>")])])]),s._v(" "),a("p",[s._v("（可选，字符串）待模拟的索引模板名字。为了在将模板配置添加到集群之前测试模板配置，请省略此参数并在请求体中指定模板配置。")]),s._v(" "),a("h2",{attrs:{id:"查询参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询参数"}},[s._v("#")]),s._v(" 查询参数")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("create")])])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，则仅当没有与相同索引模式匹配的现有模板时，才会使用请求体中传递的模板。如果为 "),a("code",[s._v("false")]),s._v("，模拟将使用具有最高优先级的模板。请注意，无论哪种情况，模板都不会永久添加或更新；它仅用于模拟。默认为 "),a("code",[s._v("false")]),s._v("。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("master_timeout")])])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/rest_apis/api_convention/common_options#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D"}},[s._v("时间单位")]),s._v("）等待连接到主节点的时间。如果在超时过期前没有收到响应，则请求失败并返回错误。默认为 "),a("code",[s._v("30s")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"请求体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求体"}},[s._v("#")]),s._v(" 请求体")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("data_stream")])]),s._v(" "),a("p",[s._v("（可选，对象）如果包含此对象，则模板用于创建数据流及其备份索引。支持空对象。")]),s._v(" "),a("p",[s._v("数据流需要与 "),a("code",[s._v("data_stream")]),s._v(" 对象匹配的索引模板。请参见"),a("a",{attrs:{href:"/rest_apis/index_apis/create_or_update_index_template"}},[s._v("创建索引模板")]),s._v("。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("data_stream")]),s._v(" 属性")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("hidden")])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，数据流是"),a("a",{attrs:{href:"/rest_apis/api_convention/multi_target_syntax#%E9%9A%90%E8%97%8F%E6%95%B0%E6%8D%AE%E6%B5%81%E5%92%8C%E7%B4%A2%E5%BC%95"}},[s._v("隐藏的")]),s._v("。默认为 "),a("code",[s._v("false")]),s._v("。")])])])])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("index_patterns")])]),s._v(" "),a("p",[s._v("（必需的，字符串数组）用于在创建时匹配数据流和索引名字的通配符（*）表达式数组。")]),s._v(" "),a("p",[s._v("Elasticsearch 包含几个内置的索引模板。为了避免这些模板的命名冲突，参阅"),a("a",{attrs:{href:"/index_templates/index_templates"}},[s._v("避免索引模式冲突")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("_meta")])]),s._v(" "),a("p",[s._v("（可选，对象）关于索引模板的可选用户元数据。可以有任意内容。Elasticsearch 不会自动生成此信息。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("priority")])]),s._v(" "),a("p",[s._v("（可选，整数）用于在创建新数据流或索引时确定索引模板的优先级。具有最高优先级的索引模板先被选择。如果未指定优先级，则将模板视为优先级为 0（最低优先级）。Elasticsearch 不会自动生成此值。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("template")])]),s._v(" "),a("p",[s._v("（可选，对象）要应用的模板。它可以选择包括别名、映射或设置配置。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("template")]),s._v(" 属性")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("aliases")])]),s._v(" "),a("p",[s._v("（可选，对象）索引的别名。如果索引模板包含了 "),a("code",[s._v("data_stream")]),s._v("，此参数不被支持。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("aliases")]),s._v(" 对象属性")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("<alias>")])])]),s._v(" "),a("p",[s._v("（必需，对象）键值是别名名称。支持"),a("a",{attrs:{href:"/rest_apis/api_convention/date_math_support_in_index_names"}},[s._v("日期数学")]),s._v("。")]),s._v(" "),a("p",[s._v("对象体包含别名的选项。支持空对象。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("<alias>")]),s._v(" 属性")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("filter")])]),s._v(" "),a("p",[s._v("（可选，查询 DSL 对象）用于限制别名查询时可以访问的文档。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("index_routing")])]),s._v(" "),a("p",[s._v("（可选，字符串）用于将索引操作路由到特定分片的值。如果指定，这将覆盖索引操作的路由值。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("is_hidden")])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，别名是"),a("a",{attrs:{href:"/rest_apis/api_conventions/multi-target_syntax#%E9%9A%90%E8%97%8F%E6%95%B0%E6%8D%AE%E6%B5%81%E5%92%8C%E7%B4%A2%E5%BC%95"}},[s._v("隐藏的")]),s._v("。默认为 "),a("code",[s._v("false")]),s._v("。别名所有的索引必须有相同的 "),a("code",[s._v("is_hidden")]),s._v(" 值。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("is_write_index")])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，索引是别名的"),a("a",{attrs:{href:"/rest_apis/index_apis/aliases#%E5%86%99%E7%B4%A2%E5%BC%95"}},[s._v("写索引")]),s._v("。默认为 "),a("code",[s._v("false")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("routing")])]),s._v(" "),a("p",[s._v("（可选，字符串）用于将索引和搜索操作路由到特定分片的值。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("search_routing")])]),s._v(" "),a("p",[s._v("（可选，字符串）用于将搜索操作路由到特定分片的值。如果指定，这将覆盖搜索操作的 "),a("code",[s._v("routing")]),s._v(" 值。")])])])])])])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("mappings")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/mapping/mapping"}},[s._v("映射对象")]),s._v("）索引中字段的映射。如果指定，此映射可以包括：")]),s._v(" "),a("ul",[a("li",[s._v("字段名字")]),s._v(" "),a("li",[a("a",{attrs:{href:"/mapping/filed_data_types/filed_data_types"}},[s._v("字段数据类型")])]),s._v(" "),a("li",[a("a",{attrs:{href:"/mapping/mapping_parameters/mapping_parameters"}},[s._v("映射参数")])])]),s._v(" "),a("p",[s._v("参阅"),a("a",{attrs:{href:"/mapping/mapping"}},[s._v("映射")]),s._v("。")])])])])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("version")])]),s._v(" "),a("p",[s._v("（可选，整数）用于外部管理索引模板的版本号。Elasticsearch 不会自动生成此值。")])])]),s._v(" "),a("h2",{attrs:{id:"响应体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应体"}},[s._v("#")]),s._v(" 响应体")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("overlapping")])]),s._v(" "),a("p",[s._v("（数组）被指定模板取代的任何模板。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("overlapping")]),s._v(" 属性")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("name")])]),s._v(" "),a("p",[s._v("（字符串）被取代模板的名字")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("index_patterns")])]),s._v(" "),a("p",[s._v("（数组）被取代模板将会应用的索引模式。")])])])])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("template")])]),s._v(" "),a("p",[s._v("（对象）将应用于索引的设置、映射和别名。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("template")]),s._v(" 属性")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("aliases")])]),s._v(" "),a("p",[s._v("（必需，对象）索引的别名。如果索引模板包含 "),a("code",[s._v("data_stream")]),s._v("，则不支持此参数。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("aliases")]),s._v(" 对象属性")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("<alias>")])]),s._v(" "),a("p",[s._v("（必需，对象）键值是别名名称。支持"),a("a",{attrs:{href:"/rest_apis/api_convention/date_math_support_in_index_names"}},[s._v("日期数学")]),s._v("。")]),s._v(" "),a("p",[s._v("对象体包含别名的选项。支持一个空对象。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("<alias>")]),s._v(" 属性")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("filter")])])])]),s._v(" "),a("p",[s._v("（可选，查询 DSL 对象）用于限制别名查询时可以访问的文档。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("index_routing")])])]),s._v(" "),a("p",[s._v("（可选，字符串）用于将索引操作路由到特定分片的值。如果指定，这将覆盖索引操作的路由值。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("is_hidden")])])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，别名是"),a("a",{attrs:{href:"/rest_apis/api_conventions/multi-target_syntax#%E9%9A%90%E8%97%8F%E6%95%B0%E6%8D%AE%E6%B5%81%E5%92%8C%E7%B4%A2%E5%BC%95"}},[s._v("隐藏的")]),s._v("。默认为 "),a("code",[s._v("false")]),s._v("。别名所有的索引必须有相同的 "),a("code",[s._v("is_hidden")]),s._v(" 值。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("is_write_index")])])]),s._v(" "),a("p",[s._v("（可选，布尔值）如果为 "),a("code",[s._v("true")]),s._v("，索引是别名的"),a("a",{attrs:{href:"/rest_apis/index_apis/aliases#%E5%86%99%E7%B4%A2%E5%BC%95"}},[s._v("写索引")]),s._v("。默认为 "),a("code",[s._v("false")]),s._v("。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("routing")])])]),s._v(" "),a("p",[s._v("（可选，字符串）用于将索引和搜索操作路由到特定分片的值。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("search_routing")])])]),s._v(" "),a("p",[s._v("（可选，字符串）用于将搜索操作路由到特定分片的值。如果指定，这将覆盖搜索操作的 "),a("code",[s._v("routing")]),s._v(" 值。")])])])])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("mappings")])]),s._v(" "),a("p",[s._v("（可选，"),a("a",{attrs:{href:"/mapping/mapping"}},[s._v("映射对象")]),s._v("）索引中字段的映射。如果指定，此映射可以包括：")]),s._v(" "),a("ul",[a("li",[s._v("字段名字")]),s._v(" "),a("li",[a("a",{attrs:{href:"/mapping/filed_data_types/filed_data_types"}},[s._v("字段数据类型")])]),s._v(" "),a("li",[a("a",{attrs:{href:"/mapping/mapping_parameters/mapping_parameters"}},[s._v("映射参数")])])]),s._v(" "),a("p",[s._v("参阅"),a("a",{attrs:{href:"/mapping/mapping"}},[s._v("映射")]),s._v("。")]),s._v(" "),a("p",[s._v("如果不应用映射，响应中将会忽略。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("settings")])]),s._v(" "),a("p",[s._v("(可选，"),a("a",{attrs:{href:"/index_modules#%E7%B4%A2%E5%BC%95%E8%AE%BE%E7%BD%AE"}},[s._v("索引设置对象")]),s._v(")索引的配置选项。参阅"),a("a",{attrs:{href:"/index_modules#%E7%B4%A2%E5%BC%95%E8%AE%BE%E7%BD%AE"}},[s._v("索引设置")]),s._v("。")])])])])])])]),s._v(" "),a("h2",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("h3",{attrs:{id:"模拟已有模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模拟已有模板"}},[s._v("#")]),s._v(" 模拟已有模板")]),s._v(" "),a("p",[s._v("以下示例创建并模拟一个组合模板：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PUT /_component_template/ct1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.number_of_shards"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nPUT /_component_template/ct2\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.number_of_replicas"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@timestamp"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"date"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nPUT /_index_template/final-template\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index_patterns"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-index-*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"composed_of"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ct1"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ct2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"priority"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nPOST /_index_template/_simulate/final-template\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("ol",[a("li",[a("code",[s._v("PUT /_component_template/ct1")]),s._v("：创建一个组合模板（"),a("code",[s._v("ct1")]),s._v("），设置分片为 2。")]),s._v(" "),a("li",[a("code",[s._v("PUT /_component_template/ct2")]),s._v("：创建一个组合模板（"),a("code",[s._v("ct2")]),s._v("），设置复本为 0，并定义一个映射。")]),s._v(" "),a("li",[a("code",[s._v("PUT /_index_template/final-template")]),s._v("：创建一个索引模板（"),a("code",[s._v("final-template")]),s._v("），用于组合模板。")]),s._v(" "),a("li",[a("code",[s._v("POST /_index_template/_simulate/final-template")]),s._v("：展示应用于 "),a("code",[s._v("final-template")]),s._v(" 的配置。")])]),s._v(" "),a("p",[s._v("响应显示 "),a("code",[s._v("final-template")]),s._v(" 应用的索引设置、映射和别名：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number_of_shards"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v(",  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number_of_replicas"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@timestamp"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"date"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aliases"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlapping"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("ol",[a("li",[a("code",[s._v('"number_of_shards" : "2"')]),s._v("：来自 "),a("code",[s._v("ct1")]),s._v(" 的分片数量")]),s._v(" "),a("li",[a("code",[s._v('"number_of_replicas" : "0"')]),s._v("：来自 "),a("code",[s._v("ct2")]),s._v(" 的复本数量")]),s._v(" "),a("li",[a("code",[s._v('"mappings"')]),s._v("：来自 "),a("code",[s._v("ct1")]),s._v(" 的映射")])]),s._v(" "),a("h3",{attrs:{id:"模拟任意模板配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模拟任意模板配置"}},[s._v("#")]),s._v(" 模拟任意模板配置")]),s._v(" "),a("p",[s._v("要在将模板添加到集群之前查看模板将应用哪些设置，可以在请求正文中传递模板配置。如果指定的模板的优先级高于现有模板，则该模板将用于模拟。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("POST /_index_template/_simulate\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index_patterns"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-index-*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"composed_of"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ct2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"priority"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.number_of_replicas"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("响应显示优先级较低的任何重叠模板。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"template"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"settings"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number_of_replicas"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@timestamp"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"date"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aliases"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlapping"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"final-template"')]),s._v(",\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index_patterns"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-index-*"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-simulate-template.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);