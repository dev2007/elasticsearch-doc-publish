(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{313:function(_,v,e){"use strict";e.r(v);var o=e(13),t=Object(o.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"cron-表达式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cron-表达式"}},[_._v("#")]),_._v(" Cron 表达式")]),_._v(" "),v("p",[_._v("cron 表达式是以下格式的字符串：")]),_._v(" "),v("div",{staticClass:"language-bash line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("<")]),_._v("seconds"),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v(">")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("<")]),_._v("minutes"),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v(">")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("<")]),_._v("hours"),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v(">")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("<")]),_._v("day_of_month"),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v(">")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("<")]),_._v("month"),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v(">")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v("<")]),_._v("day_of_week"),v("span",{pre:!0,attrs:{class:"token operator"}},[_._v(">")]),_._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("[")]),_._v("year"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("]")]),_._v("\n")])]),_._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[_._v("1")]),v("br")])]),v("p",[_._v("Elasticsearch 使用来自 "),v("a",{attrs:{href:"https://quartz-scheduler.org/",target:"_blank",rel:"noopener noreferrer"}},[_._v("Quartz 任务调度器"),v("OutboundLink")],1),_._v("的 cron 解析器。有关编写 Quartz cron 表达式的更多信息，参阅 "),v("a",{attrs:{href:"http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("Quartz CronTrigger 教程"),v("OutboundLink")],1),_._v("。")]),_._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[_._v("提示")]),_._v(" "),v("p",[_._v("可以使用 "),v("a",{attrs:{href:"/command_line_tools/elasticsearch-croneval"}},[_._v("elasticsearch-croneval")]),_._v(" 命令行工具校验你的 cron 表达式。")])]),_._v(" "),v("h2",{attrs:{id:"cron-表达式元素"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cron-表达式元素"}},[_._v("#")]),_._v(" Cron 表达式元素")]),_._v(" "),v("p",[_._v("除了 "),v("code",[_._v("year")]),_._v("（年），所有元素都是必需的。有关允许的特殊字符的信息，参阅 "),v("a",{attrs:{href:"/rest_apis/api_convention/cron_expressions#Cron-%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"}},[_._v("Cron 特殊字符")]),_._v("。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("<seconds>")]),_._v("\n（必需的） 有效值： "),v("code",[_._v("0")]),_._v("-"),v("code",[_._v("59")]),_._v(" 以及特殊字符 "),v("code",[_._v(",")]),_._v(" "),v("code",[_._v("-")]),_._v(" "),v("code",[_._v("*")]),_._v(" "),v("code",[_._v("/")])]),_._v(" "),v("li",[v("code",[_._v("<minutes>")]),_._v("\n（必需的） 有效值： "),v("code",[_._v("0")]),_._v("-"),v("code",[_._v("59")]),_._v(" 以及特殊字符 "),v("code",[_._v(",")]),_._v(" "),v("code",[_._v("-")]),_._v(" "),v("code",[_._v("*")]),_._v(" "),v("code",[_._v("/")])]),_._v(" "),v("li",[v("code",[_._v("<hours>")]),_._v("\n（必需的） 有效值： "),v("code",[_._v("0")]),_._v("-"),v("code",[_._v("23")]),_._v(" 以及特殊字符 "),v("code",[_._v(",")]),_._v(" "),v("code",[_._v("-")]),_._v(" "),v("code",[_._v("*")]),_._v(" "),v("code",[_._v("/")])]),_._v(" "),v("li",[v("code",[_._v("<day_of_month>")]),_._v("\n（必需的） 有效值： "),v("code",[_._v("1")]),_._v("-"),v("code",[_._v("31")]),_._v(" 以及特殊字符 "),v("code",[_._v(",")]),_._v(" "),v("code",[_._v("-")]),_._v(" "),v("code",[_._v("*")]),_._v(" "),v("code",[_._v("/")]),_._v(" "),v("code",[_._v("?")]),_._v(" "),v("code",[_._v("L")]),_._v(" "),v("code",[_._v("W")])]),_._v(" "),v("li",[v("code",[_._v("<month>")]),_._v("\n（必需的） 有效值： "),v("code",[_._v("1")]),_._v("-"),v("code",[_._v("12")]),_._v("， "),v("code",[_._v("JAN")]),_._v("-"),v("code",[_._v("DEC")]),_._v("， "),v("code",[_._v("jan")]),_._v("-"),v("code",[_._v("dec")]),_._v("， 以及特殊字符 "),v("code",[_._v(",")]),_._v(" "),v("code",[_._v("-")]),_._v(" "),v("code",[_._v("*")]),_._v(" "),v("code",[_._v("/")])]),_._v(" "),v("li",[v("code",[_._v("<day_of_week>")]),_._v("\n（必需的） 有效值： "),v("code",[_._v("1")]),_._v("-"),v("code",[_._v("7")]),_._v("， "),v("code",[_._v("SUN")]),_._v("-"),v("code",[_._v("SAT")]),_._v("， "),v("code",[_._v("sun")]),_._v("-"),v("code",[_._v("sat")]),_._v("， 以及特殊字符 "),v("code",[_._v(",")]),_._v(" "),v("code",[_._v("-")]),_._v(" "),v("code",[_._v("*")]),_._v(" "),v("code",[_._v("/")]),_._v(" "),v("code",[_._v("?")]),_._v(" "),v("code",[_._v("L")]),_._v(" "),v("code",[_._v("#")])]),_._v(" "),v("li",[v("code",[_._v("<year>")]),_._v("\n（可选的） 有效值： "),v("code",[_._v("1970")]),_._v("-"),v("code",[_._v("2099")]),_._v(" 以及特殊字符 "),v("code",[_._v(",")]),_._v(" "),v("code",[_._v("-")]),_._v(" "),v("code",[_._v("*")]),_._v(" "),v("code",[_._v("/")])])]),_._v(" "),v("h2",{attrs:{id:"cron-特殊字符"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cron-特殊字符"}},[_._v("#")]),_._v(" Cron 特殊字符")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("*")])])]),_._v(" "),v("p",[_._v("为字段选择所有可能的值。例如，在 "),v("code",[_._v("hours")]),_._v("（小时）字段中 "),v("code",[_._v("*")]),_._v(" 表示“每个小时”。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("?")])])]),_._v(" "),v("p",[_._v("没有特定值。当你不在意值是什么时使用。例如，如果你希望计划在一个月里的特定天触发，但不关心是一周中的哪一天，你可以在 "),v("code",[_._v("day_of_week")]),_._v(" 字段中指定 "),v("code",[_._v("?")]),_._v("。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("-")])])]),_._v(" "),v("p",[_._v("范围值（包含）。用于分隔最小值和最大值。例如，如果你希望计划在上午 9:00 到下午 5:00 之间每个小时触发，你可以在 "),v("code",[_._v("hours")]),_._v(" 字段指定 "),v("code",[_._v("9-17")]),_._v("。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v(",")])])]),_._v(" "),v("p",[_._v("多个值。用于字段中分隔多个值。例如，如果你希望计划在每周二和每周四触发，你可以在 "),v("code",[_._v("day_of_week")]),_._v(" 字段指定 "),v("code",[_._v("TUE,THU")]),_._v("。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("/")])])]),_._v(" "),v("p",[_._v("增量。用于当指定时间增量时分隔值。第一个值表示起点，第二个值表示间隔值。例如，如果你希望计划在一个小时里每 20 分钟触发一次，你可以在 "),v("code",[_._v("minutes")]),_._v(" 字段指定 "),v("code",[_._v("0/20")]),_._v("。类似的，在 "),v("code",[_._v("day_of_month")]),_._v(" 字段指定 "),v("code",[_._v("1/5")]),_._v("，将从每月的第一天开始每 5 天执行一次。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("L")])])]),_._v(" "),v("p",[_._v("最后。在 "),v("code",[_._v("day_of_month")]),_._v(" 字段中使用，意味着这个月的最后一天——1 月时是 31 日，不闰年时 2 月时是 28 日，4 月时是 30 日，等等。在 "),v("code",[_._v("day_of_week")]),_._v(" 字段中单独使用以替代 "),v("code",[_._v("7")]),_._v(" 或 "),v("code",[_._v("SAT")]),_._v("，或者在一周中的某一特定日期后，选择该类型在月中最后一天。例如，"),v("code",[_._v("6L")]),_._v(" 代表一个月的最后一个周五。你可以在 "),v("code",[_._v("day_of_month")]),_._v(" 字段指定 "),v("code",[_._v("LW")]),_._v("，用于指定该月的最后一个工作日。当指定值的列表或范围时，避免使用 "),v("code",[_._v("L")]),_._v(" 选项，因为结果可能不是你期待的结果。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("W")])])]),_._v(" "),v("p",[_._v("工作日。用于指定靠近指定日期的工作日（星期一到星期五）。例如，如果你在 "),v("code",[_._v("day_of_month")]),_._v(" 字段指定 "),v("code",[_._v("15W")]),_._v("，且 15 号是星期六，计划将在 14 号触发。如果 15 号是星期天，计划将在 16 号星期一触发。如果 15 号是星期二，计划会在 15 号星期二触发。然而，如果你为 "),v("code",[_._v("day_of_month")]),_._v(" 指定 "),v("code",[_._v("1W")]),_._v("，且 1 号是星期六，计划会在 3 号星期一触发——它不会跳过月的范围。你可以在 "),v("code",[_._v("day_of_month")]),_._v(" 字段指定 "),v("code",[_._v("LW")]),_._v("，用于指定一个月的最后一个工作日。当 "),v("code",[_._v("day_of_month")]),_._v(" 是单独的一天，你才能使用 "),v("code",[_._v("W")]),_._v(" 选项——当指定的是一个范围或列表天数时，它是无效的。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("#")])])]),_._v(" "),v("p",[_._v("一个月里的第XXX天。在 "),v("code",[_._v("day_of_week")]),_._v(" 字段用于指定一个月的第XXX天。例如，如果你指定 "),v("code",[_._v("6#1")]),_._v("，计划会在一个月的第一个星期五触发。注意你指定 "),v("code",[_._v("3#5")]),_._v("，且在某一个月里没有 5 个星期二，计划在那个月不会触发。")]),_._v(" "),v("h2",{attrs:{id:"例子"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[_._v("#")]),_._v(" 例子")]),_._v(" "),v("h3",{attrs:{id:"设置每日触发器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#设置每日触发器"}},[_._v("#")]),_._v(" 设置每日触发器")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 * * ?")])])]),_._v(" "),v("p",[_._v("在每天上午 UTC 9:05 触发。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 * * ? 2020")])])]),_._v(" "),v("p",[_._v("在 2020 年的每天上午 UTC 9:05 触发。")]),_._v(" "),v("h3",{attrs:{id:"限制触发器为天数或时间范围"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#限制触发器为天数或时间范围"}},[_._v("#")]),_._v(" 限制触发器为天数或时间范围")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 ? * MON-FRI")])])]),_._v(" "),v("p",[_._v("在星期一到星期五的每天上午 UTC 9：05 触发。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 0-5 9 * * ?")])])]),_._v(" "),v("p",[_._v("在每天上午 9:00 UTC 到 9:05 UTC 的每分钟触发。")]),_._v(" "),v("h3",{attrs:{id:"设置周期触发器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#设置周期触发器"}},[_._v("#")]),_._v(" 设置周期触发器")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 0/15 9 * * ?")])])]),_._v(" "),v("p",[_._v("在每天上午 9:00 UTC 到 9:45 UTC 每 15 分钟触发。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 1/3 * ?")])])]),_._v(" "),v("p",[_._v("从一个月的第一天开始，每 3 天在上午 9:05 UTC 触发。")]),_._v(" "),v("h3",{attrs:{id:"设置特定日期触发的计划"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#设置特定日期触发的计划"}},[_._v("#")]),_._v(" 设置特定日期触发的计划")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 1 4 1 4 ?")])])]),_._v(" "),v("p",[_._v("在 4 月 1 日上午 4:01 UTC 触发。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 0,30 9 ? 4 WED")])])]),_._v(" "),v("p",[_._v("在 4 月的每个星期三的上午 9:00 UTC 和 9:30 UTC 触发。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 15 * ?")])])]),_._v(" "),v("p",[_._v("在每个月 15 号的上午 9:05 UTC 触发。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 15W * ?")])])]),_._v(" "),v("p",[_._v("在每个月的 15 号最近的工作日的上午 9:05 UTC 触发。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 ? * 6#1")])])]),_._v(" "),v("p",[_._v("在每个月的第一个星期一的上午 9:05 UTC 触发。")]),_._v(" "),v("h3",{attrs:{id:"使用-last-最后-设置触发器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#使用-last-最后-设置触发器"}},[_._v("#")]),_._v(" 使用 last（最后）设置触发器")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 L * ?")])])]),_._v(" "),v("p",[_._v("在每个月的最后一天的上午 9:05 UTC 触发。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 ? * 2L")])])]),_._v(" "),v("p",[_._v("在每个月的最后一个星期一的上午 9：05 UTC 触发。")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("0 5 9 LW * ?")])])]),_._v(" "),v("p",[_._v("在每个月的最后一个工作日的上午 9:05 UTC 触发。")]),_._v(" "),v("blockquote",[v("p",[v("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/cron-expressions.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("原文链接"),v("OutboundLink")],1)])])])}),[],!1,null,null,null);v.default=t.exports}}]);