(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{272:function(t,s,a){t.exports=a.p+"assets/img/msi_installer_help.b7ba1b69.png"},273:function(t,s,a){t.exports=a.p+"assets/img/msi_installer_locations.984e24df.png"},274:function(t,s,a){t.exports=a.p+"assets/img/msi_installer_service.cb756601.png"},275:function(t,s,a){t.exports=a.p+"assets/img/msi_installer_configuration.a261dd1b.png"},276:function(t,s,a){t.exports=a.p+"assets/img/msi_installer_selected_plugins.895a8c81.png"},277:function(t,s,a){t.exports=a.p+"assets/img/msi_installer_xpack.271e7389.png"},278:function(t,s,a){t.exports=a.p+"assets/img/msi_installer_installing.e18536bb.png"},279:function(t,s,a){t.exports=a.p+"assets/img/msi_installer_success.4562c1b1.png"},414:function(t,s,a){"use strict";a.r(s);var e=a(13),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"使用-windows-msi-安装程序安装-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-windows-msi-安装程序安装-elasticsearch"}},[t._v("#")]),t._v(" 使用 Windows MSI 安装程序安装 Elasticsearch")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),s("p",[t._v("此功能处于测试阶段，随时可能改变。该设计和代码是不够成熟的正式 GA 特性，并不提供保证。测试版本特性不属于支持 SLA 的正式 GA 特性。")])]),t._v(" "),s("p",[t._v("Elasticsearch 可以使用 "),s("code",[t._v(".msi")]),t._v(" 包在 Windows 上安装。可以将 Elasticsearch 作为 Windows 服务安装，或者使用 "),s("code",[t._v("elasticsearch.exe")]),t._v(" 手工运行。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("Elasticsearch 过去使用 "),s("code",[t._v(".zip")]),t._v(" 存档安装到 Windows 上。如果你愿意可以继续使用 "),s("code",[t._v(".zip")]),t._v("。")])]),t._v(" "),s("p",[t._v("这个包包含免费和订阅的特性。"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/license-settings.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("开始 30 天的试用"),s("OutboundLink")],1),t._v("，尝试所有功能。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("在 Windows 上，Elasticsearch 机器学习特性需要 Microsoft 通用 C 运行时库。它内置于 Windows 10、Windows Server 2016 和更高版本的 Windows 中。对于老版本的 Windows，它可以通过 Windows Update 安装，也可以从"),s("a",{attrs:{href:"https://support.microsoft.com/en-us/help/2999226/update-for-universal-c-runtime-in-windows",target:"_blank",rel:"noopener noreferrer"}},[t._v("独立下载"),s("OutboundLink")],1),t._v("安装。如果你不能安装 Microsoft 通用 C 运行时库，禁用机器学习特性你也能使用 Elasticsearch 的其他特性。")])]),t._v(" "),s("p",[t._v("Elasticsearch 的最新稳定版本，能在 "),s("a",{attrs:{href:"https://www.elastic.co/downloads/elasticsearch",target:"_blank",rel:"noopener noreferrer"}},[t._v("Elasticsearch 下载页面"),s("OutboundLink")],1),t._v("找到。其他版本能在"),s("a",{attrs:{href:"https://www.elastic.co/downloads/past-releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("历史发布页面"),s("OutboundLink")],1),t._v("找到。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("Elasticsearch 包含 JDK 维护者（GPLv2+CE）提供的 "),s("a",{attrs:{href:"https://openjdk.java.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenJDK"),s("OutboundLink")],1),t._v(" 捆绑版本。要使用自己的 Java 版本，查阅 "),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/setup.html#jvm-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("JVM 版本要求"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("h2",{attrs:{id:"下载-msi-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载-msi-包"}},[t._v("#")]),t._v(" 下载 "),s("code",[t._v(".msi")]),t._v(" 包")]),t._v(" "),s("p",[t._v("从 "),s("a",{attrs:{href:"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.11.2.msi",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.11.2.msi"),s("OutboundLink")],1),t._v(" 下载 Elasticsearch v7.11.2 "),s("code",[t._v(".msi")]),t._v(" 包。")]),t._v(" "),s("h3",{attrs:{id:"使用图形化界面-gui-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用图形化界面-gui-安装"}},[t._v("#")]),t._v(" 使用图形化界面（GUI）安装")]),t._v(" "),s("p",[t._v("双击下载的 "),s("code",[t._v(".msi")]),t._v(" 包以启动 GUI 向导，它会引导你完成安装过程。任何一步，你都可以通过点击 "),s("code",[t._v("?")]),t._v(" 按钮浏览帮助，它会通过侧面板展示每一个输入的附加信息：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(272),alt:"msi_installer_help"}})]),t._v(" "),s("p",[t._v("在每个界面，选择安装的目录。此外，选择数据、日志以及配置的目录或者[使用默认位置](/msi#命令行选项）：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(273),alt:"msi_installer_locations.png"}})]),t._v(" "),s("p",[t._v("接着，按需选择是作为服务安装还是手工启动 Elasticsearch。作为服务安装时，你还可以配置运行这个服务的 Windows 账户、安装后是否启动以及 Windows 启动行为。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(274),alt:"msi_installer_service"}})]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),s("p",[t._v("当选择运行服务的 Windows 账户时，请确保选择的账户有足够的权限访问安装和其他选择的部署目录。还要确保这个账户能运行 Windows 服务。")])]),t._v(" "),s("p",[t._v("公共配置在配置页展示，除了内存和网络设置，还支持集群名字、节点名字以及角色设置：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(275),alt:"msi_installer_configuration"}})]),t._v(" "),s("p",[t._v("作为安装的一部分，可以下载和安装一系列常见插件，通过配置 HTTPS 代理选项就可以下载这些插件。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("确保安装机器可能访问互联网，且任何公司防火墙已配置允许从 "),s("code",[t._v("artifacts.elastic.co")]),t._v(" 下载：")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(276),alt:"msi_installer_selected_plugins"}})]),t._v(" "),s("p",[t._v("从 6.3.0 版本开始，默认情况下 X-Pack 是捆绑的。除了安全配置和内置用户配置，最后一步允许选择要安装的授权类型：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(277),alt:"msi_installer_xpack"}})]),t._v(" "),s("p",[t._v("在点击安装按钮后，安装开始：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(278),alt:"msi_installer_installing"}})]),t._v(" "),s("p",[t._v("然后安装成功后会展示：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(279),alt:"msi_installer_success"}})]),t._v(" "),s("h3",{attrs:{id:"使用命令行安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用命令行安装"}},[t._v("#")]),t._v(" 使用命令行安装")]),t._v(" "),s("p",[s("code",[t._v(".msi")]),t._v(" 也可以通过命令行安装 Elasticsearch。使用与图形化界面相同的默认配置的最简单安装，就是先定位到下载目录，然后运行：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("msiexec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("i elasticsearch-7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("qn\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("默认情况下， "),s("code",[t._v("msiexec.exe")]),t._v(" 不会等待安装进程完成，因为它在 Windows 子系统中运行。要等待进程完成，并确保相应设置了 "),s("code",[t._v("%ERRORLEVEL%")]),t._v("，推荐使用 "),s("code",[t._v("start /wait")]),t._v(" 去创建进程并等待它退出。")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("wait msiexec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("i elasticsearch-7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("qn\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("与任何 MSI 安装包一样，安装过程的日志文件可以在 "),s("code",[t._v("%TEMP%")]),t._v(" 目录中找到，随机生成文件名的格式为 "),s("code",[t._v("MSI<random>.LOG")]),t._v("。日志文件的路径 可以通过 "),s("code",[t._v("/l")]),t._v(" 命令行参数提供。")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("wait msiexec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("i elasticsearch-7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("qn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("l install"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("Windows 安装程序支持的命令行参数可以通过以下查看：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("msiexec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("help\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("或者查阅 "),s("a",{attrs:{href:"https://msdn.microsoft.com/en-us/library/windows/desktop/aa367988(v=vs.85).aspx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows 安装程序 SDK命令行选项"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"命令行选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令行选项"}},[t._v("#")]),t._v(" 命令行选项")]),t._v(" "),s("p",[t._v("GUI 中展示的设置也可以用作命令行参数（在 Windows 安装程序文档中叫作属性），这些参数可传递给 "),s("code",[t._v("msiexec.exe")]),t._v("：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}}),t._v(" "),s("th",{staticStyle:{"text-align":"left"}})])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("INSTALLDIR")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("安装目录。目录结尾必须是 Elasticsearch 的版本。默认为 "),s("code",[t._v("%ProgramW6432%\\Elastic\\Elasticsearch\\7.11.2.")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("DATADIRECTORY")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("存储数据的目录。默认为 "),s("code",[t._v("%ALLUSERSPROFILE%\\Elastic\\Elasticsearch\\data")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("CONFIGDIRECTORY")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("存储配置的目录。默认为 "),s("code",[t._v("%ALLUSERSPROFILE%\\Elastic\\Elasticsearch\\config")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("LOGSDIRECTORY")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("存储日志的目录。默认为 "),s("code",[t._v("%ALLUSERSPROFILE%\\Elastic\\Elasticsearch\\logs")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("PLACEWRITABLELOCATIONSINSAMEPATH")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("是否在安装目录下创建数据、配置和日志目录。默认为 "),s("code",[t._v("false")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("INSTALLASSERVICE")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Elasticsearch 是否作为 Windows 服务安装和配置。默认为 "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("STARTAFTERINSTALL")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("在安装完成后是否启动此 Windows 服务。默认为 "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("STARTWHENWINDOWSSTARTS")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("当 Windows 启动时是否记启动此 Windows 服务。默认为 "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("USELOCALSYSTEM")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("此Windows 服务是否以 LocalSystem 账户运行。默认为 "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("USENETWORKSERVICE")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("此Windows 服务是否以 NetworkService 账户运行。默认为 "),s("code",[t._v("false")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("USEEXISTINGUSER")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("此Windows 服务是否以指定的现有账户运行。默认为 "),s("code",[t._v("false")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("USER")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("运行此 Windows 服务账户名。默认为 "),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("PASSWORD")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("运行此 Windows 服务的账户的密码。默认为"),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("CLUSTERNAME")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("集群名字。默认为 "),s("code",[t._v("elasticsearch")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("NODENAME")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("节点的名字。默认为 "),s("code",[t._v("%COMPUTERNAME%")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("MASTERNODE")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("此 Elasticsearch 是否配置作为主节点。默认为 "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("DATANODE")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("此 Elasticsearch 是否配置作为数据节点。默认为 "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("INGESTNODE")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("此 Elasticsearch 是否配置作为预处理节点。默认为 "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("SELECTEDMEMORY")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("分配给 Elasticsearch 的 JVM 堆内存大小。默认为 "),s("code",[t._v("2048")]),t._v("，除非目标机器内存总共小于 4 GB，这种情况默认为总内存的 50%")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("LOCKMEMORY")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("是否 "),s("code",[t._v("bootstrap.memory_lock")]),t._v(" 应用于尝试锁定进程地址空间到内存中。默认为 "),s("code",[t._v("false")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("UNICASTNODES")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("用逗号分割的用于单播发现的主机列表，格式为 "),s("code",[t._v("host:port")]),t._v(" 或 "),s("code",[t._v("host")]),t._v(" 。默认为 "),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("MINIMUMMASTERNODES")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("形成集群的符合主节点的节点最小数量。默认为 "),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("NETWORKHOST")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("要把节点绑定和发布（广播）该主机到集群中其他节点的主机名或者 IP 地址。默认为 "),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("HTTPPORT")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("用于通过 HTTP 暴露 Elasticsearch API 的端口。默认为 "),s("code",[t._v("9200")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("TRANSPORTPORT")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("用于集群内节点间内部通信的端口。默认为 "),s("code",[t._v("9300")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("PLUGINS")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("作为安装一部分，逗号分割的下载和安装的插件列表。默认为 "),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("HTTPSPROXYHOST")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("通过 HTTPS 下载插件的代理主机。默认为 "),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("HTTPSPROXYPORT")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("通过 HTTPS 下载插件的代理端口。默认为 "),s("code",[t._v("443")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("HTTPPROXYHOST")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("通过 HTTP 下载插件的代理主机。默认为 "),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("HTTPPROXYPORT")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("通过 HTTP 下载插件的代理端口。默认为 "),s("code",[t._v("80")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("XPACKLICENSE")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("安装的授权类型。"),s("code",[t._v("Basic")]),t._v(" 或者 "),s("code",[t._v("Trial")]),t._v("。默认为 "),s("code",[t._v("Basic")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("XPACKSECURITYENABLED")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("使用 "),s("code",[t._v("Trial")]),t._v(" 授权安装时，是否启用安全特性。默认为 "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("BOOTSTRAPPASSWORD")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("使用 "),s("code",[t._v("Trial")]),t._v(" 授权安装时，且安全特性启用，用于引导集群并作为 "),s("code",[t._v("bootstrap.password")]),t._v(" 设置存在密码库中。默认为随机值")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("SKIPSETTINGPASSWORDS")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("使用 "),s("code",[t._v("Trial")]),t._v(" 授权安装时，且安全特性启用，安装是否跳过设置内置用户。默认为 "),s("code",[t._v("false")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("ELASTICUSERPASSWORD")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("使用 "),s("code",[t._v("Trial")]),t._v(" 授权安装时，且安全特性启用，用作内置用户 "),s("code",[t._v("elastic")]),t._v(" 的密码。默认为 "),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("KIBANAUSERPASSWORD")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("使用 "),s("code",[t._v("Trial")]),t._v(" 授权安装时，且安全特性启用，用作内置用户 "),s("code",[t._v("kibana")]),t._v(" 的密码。默认为 "),s("code",[t._v("“”")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("LOGSTASHSYSTEMUSERPASSWORD")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("使用 "),s("code",[t._v("Trial")]),t._v(" 授权安装时，且安全特性启用，用作内置用户 "),s("code",[t._v("logstash_system")]),t._v(" 的密码。默认为 "),s("code",[t._v("“”")])])])])]),t._v(" "),s("p",[t._v("要传值，只需把属性名字和值，按格式 "),s("code",[t._v('<PROPERTYNAME>="<VALUE>"')]),t._v(" 添加给安装命令。比如，使用与默认安装目录不同的目录：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("wait msiexec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("i elasticsearch-7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("qn INSTALLDIR="),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Custom Install Directory{version}"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("有关包含引号的值的其他规则，请参阅 "),s("a",{attrs:{href:"https://msdn.microsoft.com/en-us/library/windows/desktop/aa367988(v=vs.85).aspx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows 安装程序 SDK 命令行选项"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"启用系统索引自动创建-x-pack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启用系统索引自动创建-x-pack"}},[t._v("#")]),t._v(" 启用系统索引自动创建 ["),s("code",[t._v("X-Pack")]),t._v("]")]),t._v(" "),s("p",[t._v("一些商业特性会在 Elasticsearch 中自动创建索引。默认情况下， Elasticsearch 配置为允许自动创建索引而不需要额外的步骤。然而，如果你在 Elasticsearch 中禁用了自动索引创建，则必须在 "),s("code",[t._v("elasticsearch.yml")]),t._v(" 中配置 "),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html#index-creation",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("action.auto_create_index")]),s("OutboundLink")],1),t._v(" 以允许商业特性创建以下索引：")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("action.auto_create_index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" .monitoring*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(".watches"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(".triggered_watches"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(".watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("history*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(".ml*\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),s("p",[t._v("如果你在使用 "),s("a",{attrs:{href:"https://www.elastic.co/products/logstash",target:"_blank",rel:"noopener noreferrer"}},[t._v("Logstash"),s("OutboundLink")],1),t._v(" 或 "),s("a",{attrs:{href:"https://www.elastic.co/products/beats",target:"_blank",rel:"noopener noreferrer"}},[t._v("Beats"),s("OutboundLink")],1),t._v("，那么你很可能需要在你的 "),s("code",[t._v("action.auto_create_index")]),t._v(" 设置中使用额外的索引名字，具体的值取决于你的本地配置。如果你不确定你环境的正确值，可以考虑设置这个值为*以允许自动创建所有索引。")])]),t._v(" "),s("h2",{attrs:{id:"从命令行运行-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从命令行运行-elasticsearch"}},[t._v("#")]),t._v(" 从命令行运行 Elasticsearch")]),t._v(" "),s("p",[t._v("一旦安装，如果未作为服务安装以及配置安装完成后启动，Elasticsearch 可以从命令行启动，如下：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\\bin\\elasticsearch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("命令行终端将展示类似于以下的输出：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/_media/elasticsearch_exe.png",alt:"elasticsearch_exe"}})]),t._v(" "),s("p",[t._v("默认情况下，Elasticsearch 在前台运行，除了向 "),s("code",[t._v("LOGSDIRECTORY")]),t._v(" 中 "),s("code",[t._v("<cluster name>.log")]),t._v(" 文件打印日志，还将日志打印到标准输出（"),s("code",[t._v("STDOUT")]),t._v("），且可以通过 "),s("code",[t._v("Ctrl-C")]),t._v(" 中止。")]),t._v(" "),s("h2",{attrs:{id:"在命令行配置-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在命令行配置-elasticsearch"}},[t._v("#")]),t._v(" 在命令行配置 Elasticsearch")]),t._v(" "),s("p",[t._v("Elasticsearch 默认从文件 "),s("code",[t._v("%ES_PATH_CONF%\\elasticsearch.yml")]),t._v(" 加载配置。在"),s("a",{attrs:{href:"/set_up_elasticsearch/config"}},[t._v("配置 Elasticsearch")]),t._v(" 中解释了配置文件的格式。")]),t._v(" "),s("p",[t._v("在配置文件中可以指定的设置，也能在命令行中指定，如下使用 "),s("code",[t._v("-E")]),t._v(" 的语法：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\\bin\\elasticsearch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("E cluster"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name=my_cluster "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("E node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name=node_1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("包含空格的值必须使用引号括起来。如 "),s("code",[t._v('-Epath.logs="C:\\My Logs\\logs"')]),t._v("。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("通常，任意集群范围设置（如 "),s("code",[t._v("cluster.name")]),t._v("）应该添加到 "),s("code",[t._v("elasticsearch.yml")]),t._v(" 配置文件中，而任何节点特定设置，如 "),s("code",[t._v("node.name")]),t._v("，应该在命令行中指定。")])]),t._v(" "),s("h2",{attrs:{id:"检查-elasticsearch-是否正在运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#检查-elasticsearch-是否正在运行"}},[t._v("#")]),t._v(" 检查 Elasticsearch 是否正在运行")]),t._v(" "),s("p",[t._v("你可以通过向 "),s("code",[t._v("localhost")]),t._v(" 的 "),s("code",[t._v("9200")]),t._v(" 端口发送 HTTP 请求来测试 Elasticsearch 节点是否正在运行：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("GET /\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("这会给你这样的响应：")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Cp8oag6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cluster_name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"elasticsearch"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cluster_uuid"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AT69_T_DTp-1qgIJlatQqA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"number"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7.11.2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_flavor"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_type"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_hash"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f27399d"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_date"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2016-03-30T09:51:41.449Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_snapshot"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lucene_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8.7.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minimum_wire_compatibility_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.2.3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minimum_index_compatibility_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.2.3"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tagline"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"You Know, for Search"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h2",{attrs:{id:"在-windows-上作为服务安装-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-windows-上作为服务安装-elasticsearch"}},[t._v("#")]),t._v(" 在 Windows 上作为服务安装 Elasticsearch")]),t._v(" "),s("p",[t._v("Elasticsearch 可以作为服务安装在后台运行，也可以没有任何用户交互下，在系统启动时自动启动。这可以在安装时使用以下命令行选项实现：")]),t._v(" "),s("ul",[s("li",[t._v("INSTALLASSERVICE=true")]),t._v(" "),s("li",[t._v("STARTAFTERINSTALL=true")]),t._v(" "),s("li",[t._v("STARTWHENWINDOWSSTARTS=true")])]),t._v(" "),s("p",[t._v("一旦安装，Elasticsearch 就会出现在服务控制面板：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/_media/msi_installer_installed_service.png",alt:"msi_installer_installed_service"}})]),t._v(" "),s("p",[t._v("而且，可以在控制面板中或从命令行使用以下命令停止和重启：")]),t._v(" "),s("p",[t._v("命令行：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("sc.exe stop Elasticsearch\nsc.exe start Elasticsearch\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("Powershell：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get-Service")]),t._v(" Elasticsearch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Stop-Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get-Service")]),t._v(" Elasticsearch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start-Service")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("在安装后，可以修改 "),s("code",[t._v("jvm.options")]),t._v(" 和 "),s("code",[t._v("elasticsearch.yml")]),t._v(" 配置文件用来配置服务。大多数的修改（如 JVM 设置），都需要重启服务才能生效。")]),t._v(" "),s("h2",{attrs:{id:"使用图形化界面-gui-升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用图形化界面-gui-升级"}},[t._v("#")]),t._v(" 使用图形化界面（GUI）升级")]),t._v(" "),s("p",[s("code",[t._v(".msi")]),t._v(" 包支持升级已安装的 Elasticsearch 版本到更新的版本。通过 GUI 的升级过程处理升级所有已安装的插件，以及保留数据和配置。")]),t._v(" "),s("p",[t._v("下载并双击更新版本的 "),s("code",[t._v(".msi")]),t._v(" 包将启动 GUI 向导。第一步将列出之前安装的只读属性：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/_media/msi_installer_upgrade_notice.png",alt:"msi_installer_upgrade_notice"}})]),t._v(" "),s("p",[t._v("下一步允许更改某些配置选项：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/_media/msi_installer_upgrade_configuration.png",alt:"msi_installer_upgrade_configuration"}})]),t._v(" "),s("p",[t._v("最后，插件步骤允许升级或删除当前安装的插件，对于当前未安装的插件，可以下载并安装：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/_media/msi_installer_upgrade_plugins.png",alt:"msi_installer_upgrade_plugins"}})]),t._v(" "),s("h2",{attrs:{id:"使用命令行升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用命令行升级"}},[t._v("#")]),t._v(" 使用命令行升级")]),t._v(" "),s("p",[s("code",[t._v(".msi")]),t._v(" 还可以使用命令行升级 Elasticsearch。")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),s("p",[t._v("命令行升级需要传递与第一次安装一致的命令行属性；Windows 安装程序不会记录这些属性。"),s("br"),t._v("\n例如，如果你最初使用命令行选项 "),s("code",[t._v('PLUGINS="ingest-geoip"')]),t._v(" 和 "),s("code",[t._v('LOCKMEMORY="true"')]),t._v(" 来安装，那通过命令行升级也要传递相同的值。"),s("br"),t._v("\n例外是 "),s("code",[t._v("INSTALLDIR")]),t._v(" 参数（如果最初指定了），它必须与当前安装目录不同。如果设置 "),s("code",[t._v("INSTALLDIR")]),t._v("，路径中的结尾必须是 Elasticsearch 的版本，如："),s("br"),t._v(" "),s("code",[t._v("C:\\Program Files\\Elastic\\Elasticsearch\\7.11.2")])])]),t._v(" "),s("p",[t._v("如果 Elasticsearch 是使用所有默认值安装的，最简单的升级是先定位到下载目录，然后运行：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("wait msiexec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("i elasticsearch-7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("qn\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("与安装过程类似，可以通过传递 "),s("code",[t._v("/l")]),t._v(" 命令行参数指定升级过程的日志文件路径：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("wait msiexec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("i elasticsearch-7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("qn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("l upgrade"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"使用-添加-移除程序-卸载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-添加-移除程序-卸载"}},[t._v("#")]),t._v(" 使用 添加/移除程序 卸载")]),t._v(" "),s("p",[s("code",[t._v(".msi")]),t._v(" 包会处理作为安装的一部分的所有目录和文件的卸载。")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),s("p",[t._v("卸载将删除作为安装部分创建的所有内容，数据、配置或日志目录除外。建议在升级前复制数据目录，或考虑使用快照 API。")])]),t._v(" "),s("p",[t._v("MSI 安装包不提供用于卸载 GUI。通过按 Windows 键并输入 "),s("code",[t._v("add or remove programs")]),t._v(" 以打开系统设置，即可卸载已安装的程序。")]),t._v(" "),s("p",[t._v("一旦打开，在已安装应用列表中找到 Elasticsearch ，点击并选择卸载：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/_media/msi_installer_uninstall.png",alt:"msi_installer_uninstall"}})]),t._v(" "),s("p",[t._v("这会启动卸载过程。")]),t._v(" "),s("h2",{attrs:{id:"使用命令行卸载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用命令行卸载"}},[t._v("#")]),t._v(" 使用命令行卸载")]),t._v(" "),s("p",[t._v("通过导航到包含 "),s("code",[t._v(".msi")]),t._v(" 包的目录，并运行以下命令，可以从命令行执行卸载：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("wait msiexec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x elasticsearch-7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("qn\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("与安装过程类似，可以使用 "),s("code",[t._v("/l")]),t._v(" 命令行参数传递卸载过程的日志文件路径：")]),t._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("wait msiexec"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x elasticsearch-7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("qn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("l uninstall"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"下一步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下一步"}},[t._v("#")]),t._v(" 下一步")]),t._v(" "),s("p",[t._v("你现在有一个测试 Elasticsearch 环境部署好。在你使用 Elasticsearch 正式开始开发或者生产之前，你必须做一些额外的设置：")]),t._v(" "),s("ul",[s("li",[t._v("学习如何配置 "),s("a",{attrs:{href:"/set_up_elasticsearch/config"}},[t._v("Elasticsearch")]),t._v("。")]),t._v(" "),s("li",[t._v("配置"),s("a",{attrs:{href:"/set_up_elasticsearch/important_es_config"}},[t._v("重要的 Elasticsearch 设置")]),t._v("。")]),t._v(" "),s("li",[t._v("配置"),s("a",{attrs:{href:"/set_up_elasticsearch/important_system_config"}},[t._v("重要的系统设置")]),t._v("。")])]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/windows.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);