(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{385:function(e,_,s){"use strict";s.r(_);var t=s(13),a=Object(t.a)({},(function(){var e=this,_=e._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"搜索模板-api"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#搜索模板-api"}},[e._v("#")]),e._v(" 搜索模板 API")]),e._v(" "),_("p",[e._v("使用一个"),_("a",{attrs:{href:"/search_your_data/search_templates"}},[e._v("搜索模板")]),e._v("执行搜索。")]),e._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[e._v("GET my-index/_search/template\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),_("span",{pre:!0,attrs:{class:"token string"}},[e._v('"id"')]),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[e._v('"my-search-template"')]),e._v(",\n  "),_("span",{pre:!0,attrs:{class:"token string"}},[e._v('"params"')]),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),_("span",{pre:!0,attrs:{class:"token string"}},[e._v('"query_string"')]),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[e._v('"hello world"')]),e._v(",\n    "),_("span",{pre:!0,attrs:{class:"token string"}},[e._v('"from"')]),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(",\n    "),_("span",{pre:!0,attrs:{class:"token string"}},[e._v('"size"')]),_("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[e._v("10")]),e._v("\n  "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[e._v("1")]),_("br"),_("span",{staticClass:"line-number"},[e._v("2")]),_("br"),_("span",{staticClass:"line-number"},[e._v("3")]),_("br"),_("span",{staticClass:"line-number"},[e._v("4")]),_("br"),_("span",{staticClass:"line-number"},[e._v("5")]),_("br"),_("span",{staticClass:"line-number"},[e._v("6")]),_("br"),_("span",{staticClass:"line-number"},[e._v("7")]),_("br"),_("span",{staticClass:"line-number"},[e._v("8")]),_("br"),_("span",{staticClass:"line-number"},[e._v("9")]),_("br")])]),_("h2",{attrs:{id:"请求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[e._v("#")]),e._v(" 请求")]),e._v(" "),_("p",[_("code",[e._v("GET <target>/_search/template")])]),e._v(" "),_("p",[_("code",[e._v("GET _search/template")])]),e._v(" "),_("p",[_("code",[e._v("POST <target>/_search/template")])]),e._v(" "),_("p",[_("code",[e._v("POST _search/template")])]),e._v(" "),_("h2",{attrs:{id:"前置条件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前置条件"}},[e._v("#")]),e._v(" 前置条件")]),e._v(" "),_("ul",[_("li",[e._v("如果 Elasticsearch 安全特性启用，你对目标数据流、索引或别名必须有 "),_("code",[e._v("read")]),e._v(" "),_("a",{attrs:{href:"/secure_the_elastic_statck/user_authorization/security_privileges#%E7%B4%A2%E5%BC%95%E6%9D%83%E9%99%90"}},[e._v("索引权限")]),e._v("。对于跨集群搜索，参阅"),_("a",{attrs:{href:"/set_up_elasticsearch/remote_clusters/configure_roles_and_users_for_remote_clusters#%E9%85%8D%E7%BD%AE%E8%B7%A8%E9%9B%86%E7%BE%A4%E6%90%9C%E7%B4%A2%E6%9D%83%E9%99%90"}},[e._v("配置跨集群搜索权限")]),e._v("。")])]),e._v(" "),_("h2",{attrs:{id:"路径参数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#路径参数"}},[e._v("#")]),e._v(" 路径参数")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("<target>")]),e._v("\n（可选，字符串）用于限制请求的，逗号分隔的数据流、索引。也支持通配符表达式（*）。为了搜索所有数据流和索引，忽略此参数或使用 "),_("code",[e._v("*")]),e._v(" 或 "),_("code",[e._v("_all")]),e._v("。")])]),e._v(" "),_("h2",{attrs:{id:"查询参数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#查询参数"}},[e._v("#")]),e._v(" 查询参数")]),e._v(" "),_("ul",[_("li",[_("p",[_("code",[e._v("allow_no_indices")]),e._v("\n（可选，布尔值）如果为 "),_("code",[e._v("false")]),e._v("，任何通配符、"),_("a",{attrs:{href:"/rest_apis/index_apis/bulk_index_alias"}},[e._v("索引别名")]),e._v("或 "),_("code",[e._v("_all")]),e._v(" 值只针对丢失或关闭的索引，请求将返回一个错误。即使请求以其他开启索引为目标，此行为也适用。例如，如果一个索引以 "),_("code",[e._v("foo")]),e._v(" 开头，而没有索引以 "),_("code",[e._v("bar")]),e._v(" 开头，则以 "),_("code",[e._v("foo*,bar*")]),e._v(" 为目标的请求将返回错误。")]),e._v(" "),_("p",[e._v("默认为 "),_("code",[e._v("true")]),e._v("。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("ccs_minimize_roundtrips")]),e._v("\n（可选，布尔值）如果为 "),_("code",[e._v("true")]),e._v("，在执行跨集群搜索（CCS）请求时，协调节点和远程集群之间的网络往返行程最小化。参阅 "),_("a",{attrs:{href:"/search_your_data/search_across_clusters#%E8%B7%A8%E7%BE%A4%E9%9B%86%E6%90%9C%E7%B4%A2%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F"}},[e._v("跨群集搜索如何处理网络延迟")]),e._v("。默认为 "),_("code",[e._v("true")]),e._v("。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("expand_wildcards")]),e._v("\n（可选，字符串）通配符表达式可以匹配的索引类型。如果请求可以数据流为目标，则此参数确定通配符表达式是否匹配隐藏的数据流。支持逗号分隔的值，如 "),_("code",[e._v("open,hidden")]),e._v("。有效的值有：")]),e._v(" "),_("ol",[_("li",[_("code",[e._v("all")]),e._v("\n匹配任何数据流或索引，包括 "),_("a",{attrs:{href:"/rest_apis/api_convention/multi_target_syntax#%E9%9A%90%E8%97%8F%E6%95%B0%E6%8D%AE%E6%B5%81%E5%92%8C%E7%B4%A2%E5%BC%95"}},[e._v("hidden")]),e._v("（隐藏的）。")]),e._v(" "),_("li",[_("code",[e._v("open")]),e._v("\n匹配 open（开启）、非隐藏的索引。也匹配任何非隐藏的数据流。")]),e._v(" "),_("li",[_("code",[e._v("closed")]),e._v("\n匹配 closed（关闭）、非隐藏的索引。也匹配任何非隐藏的数据流。数据流不能关闭。")]),e._v(" "),_("li",[_("code",[e._v("hidden")]),e._v("\n匹配隐藏数据流和隐藏索引。必须与 "),_("code",[e._v("open")]),e._v("、"),_("code",[e._v("closed")]),e._v(" 或一起使用。")]),e._v(" "),_("li",[_("code",[e._v("none")]),e._v("\n不接受通配符表达式。")])]),e._v(" "),_("p",[e._v("默认为 "),_("code",[e._v("open")]),e._v("。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("explain")]),e._v("\n（可选，布尔值）如果为 "),_("code",[e._v("true")]),e._v("，作为命中的一部分返回有关分数计算的详细信息。默认为 "),_("code",[e._v("false")])])])]),e._v(" "),_("p",[e._v("-"),_("code",[e._v("ignore_throttled")]),e._v("\n（可选，布尔值）如果为 "),_("code",[e._v("true")]),e._v("，具体、展开或别名索引在冻结时将忽略。默认值为 "),_("code",[e._v("true")]),e._v("。")]),e._v(" "),_("ul",[_("li",[_("p",[_("code",[e._v("ignore_unavailable")]),e._v("\n（可选，布尔值）如果为 "),_("code",[e._v("true")]),e._v("，丢失的或关闭的索引不包含在响应中。默认为 "),_("code",[e._v("false")]),e._v("。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("preference")]),e._v("\n（可选，字符串）用于执行搜索的节点或分片。默认随机。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("rest_total_hits_as_int")]),e._v("\n(可选，布尔值)指示是否 "),_("code",[e._v("hits.total")]),e._v(" 应在搜索响应中呈现为整数或对象。默认为 "),_("code",[e._v("false")]),e._v("，返回一个对象。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("routing")]),e._v("\n（可选，字符串）用于路由操作到指定分片的自定义值。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("scroll")]),e._v("\n（可选，"),_("a",{attrs:{href:"/rest_apis/api_convention/common_options#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D"}},[e._v("时间值")]),e._v("）指定滚动搜索时索引的一致视图应保持多长时间。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("search_type")]),e._v("\n（可选，字符串）搜索操作的类型。可选项：")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("query_then_fetch")])]),e._v(" "),_("li",[_("code",[e._v("dfs_query_then_fetch")])])])]),e._v(" "),_("li",[_("p",[_("code",[e._v("typed_keys")]),e._v("\n（可选，布尔值）如果为 "),_("code",[e._v("true")]),e._v("，则响应会在聚合和建议器名称前加上它们各自的类型。默认为 "),_("code",[e._v("false")]),e._v("。")])])]),e._v(" "),_("h2",{attrs:{id:"请求体"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#请求体"}},[e._v("#")]),e._v(" 请求体")]),e._v(" "),_("ul",[_("li",[_("p",[_("code",[e._v("explain")]),e._v("\n（可选，布尔值）如果为 "),_("code",[e._v("true")]),e._v("，作为命中的一部分返回有关分数计算的详细信息。默认为 "),_("code",[e._v("false")]),e._v("。")]),e._v(" "),_("p",[e._v("如果你同时指定了此参数和查询参数中的 "),_("code",[e._v("explain")]),e._v("，API 仅使用查询参数。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("id")]),e._v("\n（必需，字符串）要使用的搜索模板的ID。如果未指定 "),_("code",[e._v("source")]),e._v("，则需要此参数。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("params")]),e._v("\n（可选，对象）用于替换模板中的 Mustache 变量的键值对。键是变量名，值是变量值。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("profile")]),e._v("\n（可选，布尔值）如果为 "),_("code",[e._v("true")]),e._v("，查询执行是已优化的。默认为 "),_("code",[e._v("false")]),e._v("。")])]),e._v(" "),_("li",[_("p",[_("code",[e._v("source")]),e._v("\n（必需，对象）内联搜索模板。支持与 "),_("a",{attrs:{href:"/rest_apis/search_apis/search"}},[e._v("搜索 API")]),e._v("的请求正文相同的参数。还支持 "),_("a",{attrs:{href:"https://mustache.github.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mustache"),_("OutboundLink")],1),e._v(" 变量。")]),e._v(" "),_("p",[e._v("如果 "),_("code",[e._v("id")]),e._v(" 未指定，此参数必需。")])])]),e._v(" "),_("blockquote",[_("p",[_("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-template-api.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("原文链接"),_("OutboundLink")],1)])])])}),[],!1,null,null,null);_.default=a.exports}}]);