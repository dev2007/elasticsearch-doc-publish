(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{293:function(a,s,e){"use strict";e.r(s);var t=e(13),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"启动并运行-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动并运行-elasticsearch"}},[a._v("#")]),a._v(" 启动并运行 Elasticsearch")]),a._v(" "),s("p",[a._v("为了试用 Elasticsearch，你可以在 Elasticsearch 服务（"),s("code",[a._v("Elasticsearch Service")]),a._v("）中创建托管部署或者在自己的 Linux、macOS 或者 Windows 机器上设置一个多节点 Elasticsearch 集群。")]),a._v(" "),s("h2",{attrs:{id:"在-elastic-cloud-上运行-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-elastic-cloud-上运行-elasticsearch"}},[a._v("#")]),a._v(" 在 Elastic Cloud 上运行 Elasticsearch")]),a._v(" "),s("p",[a._v("当你在 Elasticsearch 服务中创建部署时，这个服务提供一个三节点的 Elasticsearch 集群、Kibana 以及 APM。")]),a._v(" "),s("p",[a._v("为了创建部署：")]),a._v(" "),s("ol",[s("li",[a._v("注册一个免费的试用并验证你的电子邮箱地址。")]),a._v(" "),s("li",[a._v("为你的账户设置密码。")]),a._v(" "),s("li",[a._v("点击创建部署。")])]),a._v(" "),s("p",[a._v("一旦你创建了一个部署，你就能"),s("a",{attrs:{href:"/getting_started/index"}},[a._v("索引一些文档")]),a._v("。")]),a._v(" "),s("h2",{attrs:{id:"在-linux、macos-或-windows-本地运行-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-linux、macos-或-windows-本地运行-elasticsearch"}},[a._v("#")]),a._v(" 在 Linux、macOS 或 Windows 本地运行 Elasticsearch")]),a._v(" "),s("p",[a._v("当你在 Elasticsearch 服务中创建一个部署时，将会自动提供一个主节点和两个数据节点。通过用 "),s("code",[a._v("tar")]),a._v(" 或者 "),s("code",[a._v("zip")]),a._v(" 压缩包安装，你可以在本地启动多个 Elasticsearch 实例，以查看多节点集群的行为。")]),a._v(" "),s("p",[a._v("在本地运行一个三节点 Elasticsearch 集群：")]),a._v(" "),s("ol",[s("li",[a._v("为你的操作系统下载 Elasticsearch 压缩包：")])]),a._v(" "),s("p",[a._v("Linux: "),s("a",{attrs:{href:"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.11.1-linux-x86_64.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[a._v("elasticsearch-7.11.1-linux-x86_64.tar.gz"),s("OutboundLink")],1)]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v(" https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.11.1-linux-x86_64.tar.gz\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("macOS: "),s("a",{attrs:{href:"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.11.1-darwin-x86_64.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[a._v("elasticsearch-7.11.1-darwin-x86_64.tar.gz"),s("OutboundLink")],1)]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v(" https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.11.1-darwin-x86_64.tar.gz\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("Windows: "),s("a",{attrs:{href:"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.11.1-windows-x86_64.zip",target:"_blank",rel:"noopener noreferrer"}},[a._v("elasticsearch-7.11.1-windows-x86_64.zip"),s("OutboundLink")],1)]),a._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[a._v("解压文件：")])]),a._v(" "),s("p",[a._v("Linux:")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xvf")]),a._v(" elasticsearch-7.11.1-linux-x86_64.tar.gz\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("macOS:")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xvf")]),a._v(" elasticsearch-7.11.1-darwin-x86_64.tar.gz\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("Windows PowerShell:")]),a._v(" "),s("div",{staticClass:"language-powershell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("Expand-Archive")]),a._v(" elasticsearch-7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("1-windows-x86_64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("zip\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("从 "),s("code",[a._v("bin")]),a._v(" 目录中启动 Elasticsearch：")])]),a._v(" "),s("p",[a._v("Linux and macOS:")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" elasticsearch-7.11.1/bin\n./elasticsearch\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("Windows:")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" elasticsearch-7.11.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("bin\n."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("elasticsearch.bat\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("现在你就运行起了一个单节点 Elasticsearch 集群！")]),a._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[a._v("再启动两个 Elasticsearch 实例，你就能看到典型的多节点集群行为。你需要为每个节点指定唯一的数据和日志路径。")])]),a._v(" "),s("p",[a._v("Linux and macOS:")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("./elasticsearch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Epath.data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("data2 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Epath.logs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("log2\n./elasticsearch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Epath.data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("data3 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Epath.logs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("log3\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("Windows:")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("elasticsearch.bat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-E")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("path.data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("data2 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-E")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("path.logs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("log2\n."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("elasticsearch.bat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-E")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("path.data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("data3 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-E")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("path.logs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("log3\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("额外的节点将被分配唯一的 ID。由于你在本地运行的所有三节点，他们将自动与第一个节点加入集群。")]),a._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[a._v("使用 "),s("code",[a._v("cat health API")]),a._v(" 验证你的三节点集群是否正运行。这个 "),s("code",[a._v("cat API")]),a._v(" 以比原生 JSON 更易读的格式返回关于集群和索引的信息。")])]),a._v(" "),s("p",[a._v("你可以通过 Elasticsearch REST API 提交 HTTP 请求，直接与集群交互。如果你安装和运行了 Kibana，你也可以打开 Kibana，并通过开发控制台（"),s("code",[a._v("Dev Console")]),a._v("）提交请求。")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),s("p",[a._v("当您准备在自己的应用程序中开始使用 Elasticsearch 时，您可能想查看"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/client/index.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Elasticsearch 语言客户端"),s("OutboundLink")],1),a._v("。")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("GET /_cat/health?v"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("响应应该指示 Elasticsearch 集群的状态是绿色，且它有三个节点：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("epoch      timestamp cluster       status node.total node.data shards pri relo init unassign pending_tasks max_task_wait_time active_shards_percent\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1565052807")]),a._v(" 00:53:27  elasticsearch green           "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("         "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("        "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("             "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("                  -                "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100.0")]),a._v("%\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),s("p",[a._v("如果仅有一个 Elasticsearch 单实例，集群状态会保持为黄色。一个单节点集群是功能完整的，但数据不能被复制到另一个节点以提供弹性。集群状态为绿色时，副本分片必定可用。如果集群状态为红色，某些数据不可用。")])]),a._v(" "),s("h2",{attrs:{id:"使用-curl-命令与-elasticsearch-交互"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-curl-命令与-elasticsearch-交互"}},[a._v("#")]),a._v(" 使用 cURL 命令与 Elasticsearch 交互")]),a._v(" "),s("p",[a._v("本指南中的大部分示例，允许你复制合适的 cURL 命令，并从命令行中向本地 Elasticsearch 实例提交请求。")]),a._v(" "),s("p",[a._v("对 Elasticsearch 的请求包含与任何 HTTP 请求相同的部分：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -X"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("VERB"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'<PROTOCOL>://<HOST>:<PORT>/<PATH>?<QUERY_STRING>'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'<BODY>'")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("这个示例使用以下变量：")]),a._v(" "),s("p",[s("code",[a._v("<VERB>")])]),a._v(" "),s("blockquote",[s("p",[a._v("合适的 HTTP 方法或操作。例如，"),s("code",[a._v("GET")]),a._v("、"),s("code",[a._v("POST")]),a._v("、"),s("code",[a._v("PUT")]),a._v("、"),s("code",[a._v("HEAD")]),a._v(" 或 "),s("code",[a._v("DELETE")]),a._v("。")])]),a._v(" "),s("p",[s("code",[a._v("<PROTOCOL>")])]),a._v(" "),s("blockquote",[s("p",[s("code",[a._v("http")]),a._v(" 或 "),s("code",[a._v("https")]),a._v("。如果你在 Elasticsearch 之前有 HTTPS 代理，或者你使用的 Elasticsearch 安全特性去加密 HTTP 通信，使用后者。")])]),a._v(" "),s("p",[s("code",[a._v("<HOST>")])]),a._v(" "),s("blockquote",[s("p",[a._v("Elasticsearch 集群的任意节点主机名。或者对本地机器上的节点使用 "),s("code",[a._v("localhost")]),a._v("。")])]),a._v(" "),s("p",[s("code",[a._v("<PORT>")])]),a._v(" "),s("blockquote",[s("p",[a._v("运行 Elasticsearch HTTP服务的端口，默认为 "),s("code",[a._v("9200")]),a._v("。")])]),a._v(" "),s("p",[s("code",[a._v("<PATH>")])]),a._v(" "),s("blockquote",[s("p",[a._v("API路径，可以包含多部分，比如 "),s("code",[a._v("_cluster/stats")]),a._v(" 或 "),s("code",[a._v("_nodes/stats/jvm")]),a._v("。")])]),a._v(" "),s("p",[s("code",[a._v("<QUERY_STRING>")])]),a._v(" "),s("blockquote",[s("p",[a._v("一些可选的查询字符串参数。比如，"),s("code",[a._v("?pretty")]),a._v(" 将打印 JSON 响应以使其更易阅读。")])]),a._v(" "),s("p",[s("code",[a._v("<BODY>")])]),a._v(" "),s("blockquote",[s("p",[a._v("JSON 编码的请求体（如果必须）。")])]),a._v(" "),s("p",[a._v("如果启用了 Elasticsearch 安全特性，你必须提供用于认证运行 API 的有效用户名（以及密码）。例如，使用 "),s("code",[a._v("-u")]),a._v(" 或 "),s("code",[a._v("--u")]),a._v(" 的 cURL 命令参数。有关运行每个 API 需要的安全权限的详情，参看 "),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/rest-apis.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("REST API"),s("OutboundLink")],1),a._v("。")]),a._v(" "),s("p",[a._v("Elasticsearch 对每个 API 请求响应 HTTP 状态码，如 "),s("code",[a._v("200 ok")]),a._v("。除了 "),s("code",[a._v("HEAD")]),a._v(" 请求外，它还会返回一个 JSON 编码的响应体。")]),a._v(" "),s("h2",{attrs:{id:"其他安装方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他安装方式"}},[a._v("#")]),a._v(" 其他安装方式")]),a._v(" "),s("p",[a._v("从压缩文件安装 Elasticsearch，使你可能轻松地在本地安装和运行多个实例，然后你可以去尝试。为了运行一个单实例，你可以在 Docker 容器中运行 Elasticsearch，可以在 Linux 上通过 "),s("code",[a._v("DEB")]),a._v(" 或 "),s("code",[a._v("RPM")]),a._v(" 包、在 macOS 上通过 "),s("code",[a._v("Homebrew")]),a._v("，或者在 Windows 上用 "),s("code",[a._v("MSI")]),a._v(" 包安装 Elasticsearch。查看"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/install-elasticsearch.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("安装 Elasticsearch"),s("OutboundLink")],1),a._v(" 获取更多信息。")]),a._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started-install.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("原文链接"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);