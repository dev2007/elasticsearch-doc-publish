(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{280:function(t,s,a){t.exports=a.p+"assets/img/service-manager-win.e72ea9d6.png"},416:function(t,s,a){"use strict";a.r(s);var e=a(13),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"在-windows-上用-zip-安装-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-windows-上用-zip-安装-elasticsearch"}},[t._v("#")]),t._v(" 在 Windows 上用 "),s("code",[t._v(".zip")]),t._v(" 安装 Elasticsearch")]),t._v(" "),s("p",[t._v("Elasticsearch 可以使用 Windows "),s("code",[t._v(".zip")]),t._v(" 存档安装到 Windows 上。可以使用 "),s("code",[t._v("elasticsearch-service.bat")]),t._v(" 安装 Elasticsearch 作为服务运行。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("Elasticsearch 过去使用 "),s("code",[t._v(".zip")]),t._v(" 存档安装到 Windows 上。"),s("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/windows_msi"}},[t._v("MSI 安装包")]),t._v("提供了最简单的 Windows 入门体验。如果你愿意可以继续使用 "),s("code",[t._v(".zip")]),t._v("。")])]),t._v(" "),s("p",[t._v("这个包包含免费和订阅的特性。"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/license-settings.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("开始 30 天的试用"),s("OutboundLink")],1),t._v("，尝试所有功能。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("在 Windows 上，Elasticsearch 机器学习特性需要 Microsoft 通用 C 运行时库。它内置于 Windows 10、Windows Server 2016 和更高版本的 Windows 中。对于老版本的 Windows，它可以通过 Windows Update 安装，也可以从"),s("a",{attrs:{href:"https://support.microsoft.com/en-us/help/2999226/update-for-universal-c-runtime-in-windows",target:"_blank",rel:"noopener noreferrer"}},[t._v("独立下载"),s("OutboundLink")],1),t._v("安装。如果你不能安装 Microsoft 通用 C 运行时库，禁用机器学习特性你也能使用 Elasticsearch 的其他特性。")])]),t._v(" "),s("p",[t._v("Elasticsearch 的最新稳定版本，能在 "),s("a",{attrs:{href:"https://www.elastic.co/downloads/elasticsearch",target:"_blank",rel:"noopener noreferrer"}},[t._v("Elasticsearch 下载页面"),s("OutboundLink")],1),t._v("找到。其他版本能在"),s("a",{attrs:{href:"https://www.elastic.co/downloads/past-releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("历史发布页面"),s("OutboundLink")],1),t._v("找到。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("Elasticsearch 包含 JDK 维护者（GPLv2+CE）提供的 "),s("a",{attrs:{href:"https://openjdk.java.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenJDK"),s("OutboundLink")],1),t._v(" 捆绑版本。要使用自己的 Java 版本，查阅 "),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/setup.html#jvm-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("JVM 版本要求"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("h2",{attrs:{id:"下载安装-zip-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载安装-zip-包"}},[t._v("#")]),t._v(" 下载安装 "),s("code",[t._v(".zip")]),t._v(" 包")]),t._v(" "),s("p",[t._v("Elasticsearch v7.11.1 的 "),s("code",[t._v(".zip")]),t._v(" 存档可以从这里下载：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.11.1-windows-x86_64.zip",target:"_blank",rel:"noopener noreferrer"}},[s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("用你最喜欢的解压工具解压它。这会创建一个名为 "),s("code",[t._v("elasticsearch-7.11.1")]),t._v(" 的文件夹，我们将其作为 "),s("code",[t._v("%ES_HOME%")]),t._v("。在终端窗口，"),s("code",[t._v("cd")]),t._v(" 到 "),s("code",[t._v("%ES_HOME%")]),t._v(" 目录，如：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" c:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("elasticsearch-7.11.1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"启用系统索引自动创建-x-pack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启用系统索引自动创建-x-pack"}},[t._v("#")]),t._v(" 启用系统索引自动创建 ["),s("code",[t._v("X-Pack")]),t._v("]")]),t._v(" "),s("p",[t._v("一些商业特性会在 Elasticsearch 中自动创建索引。默认情况下， Elasticsearch 配置为允许自动创建索引而不需要额外的步骤。然而，如果你在 Elasticsearch 中禁用了自动索引创建，则必须在 "),s("code",[t._v("elasticsearch.yml")]),t._v(" 中配置 "),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html#index-creation",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("action.auto_create_index")]),s("OutboundLink")],1),t._v(" 以允许商业特性创建以下索引：")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("action.auto_create_index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" .monitoring*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(".watches"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(".triggered_watches"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(".watcher"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("history*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(".ml*\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),s("p",[t._v("如果你在使用 "),s("a",{attrs:{href:"https://www.elastic.co/products/logstash",target:"_blank",rel:"noopener noreferrer"}},[t._v("Logstash"),s("OutboundLink")],1),t._v(" 或 "),s("a",{attrs:{href:"https://www.elastic.co/products/beats",target:"_blank",rel:"noopener noreferrer"}},[t._v("Beats"),s("OutboundLink")],1),t._v("，那么你很可能需要在你的 "),s("code",[t._v("action.auto_create_index")]),t._v(" 设置中使用额外的索引名字，具体的值取决于你的本地配置。如果你不确定你环境的正确值，可以考虑设置这个值为*以允许自动创建所有索引。")])]),t._v(" "),s("h2",{attrs:{id:"从命令行运行-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从命令行运行-elasticsearch"}},[t._v("#")]),t._v(" 从命令行运行 Elasticsearch")]),t._v(" "),s("p",[t._v("Elasticsearch 可以如以下从命令行启动：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("elasticsearch.bat\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("如果你对 Elasticsearch 密码库进行了密码保护，会提示输入密码库密码。查看"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/secure-settings.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("安全设置"),s("OutboundLink")],1),t._v("获取更多详情。")]),t._v(" "),s("p",[t._v("默认情况下，Elasticsearch 在前台运行，从标准输出（"),s("code",[t._v("stdout")]),t._v("）打印日志，且可以通过按 "),s("code",[t._v("Ctrl-C")]),t._v(" 中止。")]),t._v(" "),s("h2",{attrs:{id:"在命令行配置-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在命令行配置-elasticsearch"}},[t._v("#")]),t._v(" 在命令行配置 Elasticsearch")]),t._v(" "),s("p",[t._v("Elasticsearch 默认从 "),s("code",[t._v("$ES_HOME/configuring_elasticsearch/elasticsearch.yml")]),t._v(" 加载配置。配置文件的格式在"),s("a",{attrs:{href:"/set_up_elasticsearch/config"}},[t._v("配置 Elasticsearch")]),t._v("中解释。")]),t._v(" "),s("p",[t._v("在配置文件中可以指定的设置，也能在命令行中指定，如下使用 "),s("code",[t._v("-E")]),t._v(" 语法：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("elasticsearch.bat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Ecluster.name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("my_cluster "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Enode.name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node_1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("包含空格的值必须使用引号括起来。如 "),s("code",[t._v('-Epath.logs="C:\\My Logs\\logs"')]),t._v("。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("通常，任意集群范围设置（如 "),s("code",[t._v("cluster.name")]),t._v("）应该添加到 "),s("code",[t._v("elasticsearch.yml")]),t._v(" 配置文件中，而任何节点特定设置，如 "),s("code",[t._v("node.name")]),t._v("，应该在命令行中指定。")])]),t._v(" "),s("h2",{attrs:{id:"检查-elasticsearch-是否正在运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#检查-elasticsearch-是否正在运行"}},[t._v("#")]),t._v(" 检查 Elasticsearch 是否正在运行")]),t._v(" "),s("p",[t._v("你可以通过向 "),s("code",[t._v("localhost")]),t._v(" 的 "),s("code",[t._v("9200")]),t._v(" 端口发送 HTTP 请求来测试 Elasticsearch 节点是否正在运行：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("GET /\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("这会给你这样的响应：")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Cp8oag6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cluster_name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"elasticsearch"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cluster_uuid"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AT69_T_DTp-1qgIJlatQqA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"number"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7.11.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_flavor"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_type"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_hash"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"f27399d"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_date"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2016-03-30T09:51:41.449Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_snapshot"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lucene_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8.7.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minimum_wire_compatibility_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.2.3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minimum_index_compatibility_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.2.3"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tagline"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"You Know, for Search"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h2",{attrs:{id:"在-windows-上安装-elasticsearch-作为服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-windows-上安装-elasticsearch-作为服务"}},[t._v("#")]),t._v(" 在 Windows 上安装 Elasticsearch 作为服务")]),t._v(" "),s("p",[t._v("Elasticsearch 可以作为一项服务安装在后台运行，也可以无需用户交互的在启动时自动启动。这可以通过在 "),s("code",[t._v("bin\\")]),t._v(" 目录中的 "),s("code",[t._v("elasticsearch-service.bat")]),t._v(" 脚本来在命令行允许安装、移除、管理或者配置服务，且能启动和停止服务。")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("c:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("elasticsearch-7.11.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("elasticsearch-service.bat\n\nUsage: elasticsearch-service.bat "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("remove"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("start"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("stop"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("manager "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SERVICE_ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("这脚本需要一个参数（要执行的命令），后面跟着一个可选参数表示服务的id（安装多个 Elasticsearch 服务时很有用）。")]),t._v(" "),s("p",[t._v("命令有：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}}),t._v(" "),s("th",{staticStyle:{"text-align":"left"}})])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("install")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("安装 Elasticsearch 作为服务")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("remove")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("移除安装的 Elasticsearch 服务（如果已启动，则停止服务）")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("start")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("启动 Elasticsearch 服务（如果已安装）")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("stop")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("停止 Elasticsearch 服务（如果已启动）")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("manager")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("启动图形化界面（GUI）管理已安装的服务")])])])]),t._v(" "),s("p",[t._v("在安装时，将提供服务的名字和 "),s("code",[t._v("JAVA_HOME")]),t._v(" 的值：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("c:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("elasticsearch-7.11.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("elasticsearch-service.bat "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\nInstalling "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"elasticsearch-service-x64"')]),t._v("\nUsing JAVA_HOME "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v("-bit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c:\\jvm\\jdk1.8"')]),t._v("\nThe "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'elasticsearch-service-x64'")]),t._v(" has been installed.\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("虽然 JRE 可以用于 Elasticsearch 服务，由于它使用客户端 VM （而不是服务器 JVM——它为长时间运行的应用程序提供更好的性能），不鼓励使用，并将发出警告。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("系统环境变量 "),s("code",[t._v("JAVA_HOME")]),t._v(" 应该设置为你想让服务使用的 JDK 的安装路径。如果你升级 JDK，你不必重装服务，但你必须设置系统环境变量 "),s("code",[t._v("JAVA_HOME")]),t._v(" 为最新的 JDK 安装路径。然而，不支持跨 JVM 类型（如，JRE 对 SE）的升级，必须重装服务。")])]),t._v(" "),s("h2",{attrs:{id:"自定义服务配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义服务配置"}},[t._v("#")]),t._v(" 自定义服务配置")]),t._v(" "),s("p",[t._v("可以在安装之前通过设置以下环境变量（使用命令行中的"),s("a",{attrs:{href:"https://technet.microsoft.com/en-us/library/cc754250(v=ws.10).aspx",target:"_blank",rel:"noopener noreferrer"}},[t._v("设置（set）命令"),s("OutboundLink")],1),t._v("，或通过"),s("code",[t._v("系统属性->环境变量")]),t._v(" GUI）来配置 Elasticsearch 服务。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}}),t._v(" "),s("th",{staticStyle:{"text-align":"left"}})])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("SERVICE_ID")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("服务唯一标识。在同一台机器上安装多个实例时有用。默认为 "),s("code",[t._v("elasticsearch-service-x64")]),t._v("。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("SERVICE_USERNAME")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("运行服务的用户，默认为本地系统账户。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("SERVICE_PASSWORD")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("在 "),s("code",[t._v("SERVICE_USERNAME")]),t._v(" 中指定的用户的密码。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("SERVICE_DISPLAY_NAME")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("服务名字。默认为 "),s("code",[t._v("Elasticsearch <version> %SERVICE_ID%")]),t._v("。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("SERVICE_DESCRIPTION")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("服务描述。默认为 "),s("code",[t._v("Elasticsearch <version> Windows Service - https://elastic.co")]),t._v("。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("JAVA_HOME")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("运行服务所需的 JVM 安装目录。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("SERVICE_LOG_DIR")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("服务的日志目录，默认为 "),s("code",[t._v("%ES_HOME%\\logs")]),t._v("。注意这不控制 Elasticsearch 日志路径，这个路径通过在配置文件 "),s("code",[t._v("elasticsearch.yml")]),t._v(" 中的设置 "),s("code",[t._v("path.logs")]),t._v(" 或在命令行中设置。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("ES_PATH_CONF")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("配置文件目录（需要包含 "),s("code",[t._v("elasticsearch.yml")]),t._v("、"),s("code",[t._v("jvm.options")]),t._v(" 和 "),s("code",[t._v("log4j2.properties")]),t._v(" 文件），默认为 "),s("code",[t._v("%ES_HOME%\\config")]),t._v("。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("ES_JAVA_OPTS")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("你想应用的任何其他 JVM 系统属性。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("ES_START_TYPE")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("服务启动模式。可以为 "),s("code",[t._v("auto")]),t._v(" 或 "),s("code",[t._v("manual")]),t._v("（默认）。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("ES_STOP_TIMEOUT")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("procrun 等待服务优雅退出的超时（秒）。默认为 "),s("code",[t._v("0")]),t._v("。")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("作为它的核心，"),s("code",[t._v("elasticsearch-service.bat")]),t._v(" 依赖于  Apache Commons Daemon 项目来安装服务。在服务安装之前设置的环境变量被复制，并在服务生命周期中使用。这意味着除非重装服务，否则在安装后对他们的变更都不会被获取。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("默认情况，Elasticsearch 依据节点的角色和总内存，自动调整 JVM 堆大小。对于大多数生产环境，我们推荐默认调整。如果需要，你可以手动设置堆大小来覆盖默认调整。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("当第一次在 Windows 上安装 Elasticsearch 作为服务或者从命令行运行 Elasticsearch 时，你可以按[JVM 堆大小设置](/set_up_elasticsearch/configuring_elasticsearch/advanced#JVM 堆大小设置)手工设置堆大小。为了调整已安装服务的堆大小，使用服务管理器："),s("code",[t._v("bin\\elasticsearch-service.bat manager")]),t._v("。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("该服务会自动配置一个私有临时目录供 Elasticsearch 运行时使用。该私有临时目录配置为用户运行安装的私有临时目录的子目录。如果这个服务要在不同的用户下运行，你可以在执行服务安装之前，通过设置环境变量 "),s("code",[t._v("ES_TMPDIR")]),t._v(" 配置这个临时目录的优先位置。")])]),t._v(" "),s("h3",{attrs:{id:"使用管理-gui"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用管理-gui"}},[t._v("#")]),t._v(" 使用管理 GUI")]),t._v(" "),s("p",[t._v("也可以在安装后使用管理界面（"),s("code",[t._v("elasticsearch-service-mgr.exe")]),t._v("）来配置服务，它提供了对已安装服务的深入了解，包括其状态、启动类型、JVM、启动和停止设置等。从命令行调用 "),s("code",[t._v("elasticsearch-service.bat")]),t._v(" 将会打开管理器窗口：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(280),alt:"service-manager-win"}})]),t._v(" "),s("p",[t._v("通过管理界面所做的大多数修改（如 JVM 设置），都需要重启服务才能生效。")]),t._v(" "),s("h2",{attrs:{id:"zip-存档的目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zip-存档的目录结构"}},[t._v("#")]),t._v(" "),s("code",[t._v(".zip")]),t._v(" 存档的目录结构")]),t._v(" "),s("p",[s("code",[t._v(".zip")]),t._v(" 包是完全独立的。默认情况下，所有文件和目录都包含在 "),s("code",[t._v("$ES_HOME")]),t._v("——解压存档时创建的目录。")]),t._v(" "),s("p",[t._v("这样很方便，因为你不必创建任意目录去启用 Elasticsearch，且卸载 Elasticsearch 就像移除 "),s("code",[t._v("$ES_HOME")]),t._v(" 目录一样简单。但是，建议修改默认的配置目录（config）和数据目录（data）以便以后不用删除重要数据。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("描述")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("默认位置")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("设置")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("home")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Elasticsearch 主目录或 "),s("code",[t._v("%ES_HOME%")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("解压存档创建的目录")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("bin")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("二进制脚本，包括启动节点的 "),s("code",[t._v("elasticsearch")]),t._v(" 和安装插件的 "),s("code",[t._v("elasticsearch-plugin")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("%ES_HOME%\\bin")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("conf")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("配置文件，包括 "),s("code",[t._v("elasticsearch.yml")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("%ES_HOME%\\config")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("a",{attrs:{href:"/set_up_elasticsearch/config#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE"}},[t._v("ES_PATH_CONF")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("data")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("分配在节点上的每个索引和分片的数据文件位置。可以有多个位置。")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("%ES_HOME%\\data")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("path.data")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("logs")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("日志文件位置")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("%ES_HOME%\\logs")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("path.logs")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("plugins")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("插件文件位置。每个插件会包含在一个子目录中。")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("%ES_HOME%\\plugins")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("repo")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("共享文件系统仓库位置。可以有多个位置。文件系统仓库可以放在此处指定的任何目录的任何子目录中。")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("未配置")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("path.repo")])])])])]),t._v(" "),s("h2",{attrs:{id:"下一步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下一步"}},[t._v("#")]),t._v(" 下一步")]),t._v(" "),s("p",[t._v("你现在有一个测试 Elasticsearch 环境部署好。在你使用 Elasticsearch 正式开始开发或者生产之前，你必须做一些额外的设置：")]),t._v(" "),s("ul",[s("li",[t._v("学习如何配置 "),s("a",{attrs:{href:"/set_up_elasticsearch/config"}},[t._v("Elasticsearch")]),t._v("。")]),t._v(" "),s("li",[t._v("配置"),s("a",{attrs:{href:"/set_up_elasticsearch/important_es_config"}},[t._v("重要的 Elasticsearch 设置")]),t._v("。")]),t._v(" "),s("li",[t._v("配置"),s("a",{attrs:{href:"/set_up_elasticsearch/important_system_config"}},[t._v("重要的系统设置")]),t._v("。")])]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-windows.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);