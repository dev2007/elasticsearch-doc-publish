(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{315:function(_,e,v){"use strict";v.r(e);var t=v(13),a=Object(t.a)({},(function(){var _=this,e=_._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[e("h1",{attrs:{id:"多目标语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多目标语法"}},[_._v("#")]),_._v(" 多目标语法")]),_._v(" "),e("p",[_._v("大多数 API 接受 "),e("code",[_._v("<data-stream>")]),_._v("、"),e("code",[_._v("<index>")]),_._v(" 或 "),e("code",[_._v("<target>")]),_._v(" 请求路径参数，也支持多目标语法。")]),_._v(" "),e("p",[_._v("在多目标语法中，你可以使用逗号分隔的列表在多个资源上运行请求，比如数据流、索引或者"),e("a",{attrs:{href:"/rest_apis/bulk_index_alias"}},[_._v("索引别名")]),_._v("："),e("code",[_._v("test1,test2,test3")]),_._v("。你还可以使用类似 "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Glob_(programming)",target:"_blank",rel:"noopener noreferrer"}},[_._v("glob"),e("OutboundLink")],1),_._v(" 的通配符（*）表达式匹配模式为："),e("code",[_._v("test*")]),_._v(" 或 "),e("code",[_._v("*test")]),_._v(" 或 "),e("code",[_._v("te*t")]),_._v(" 或 "),e("code",[_._v("*test*.")]),_._v(" 的目标资源。")]),_._v(" "),e("p",[_._v("你可以使用 "),e("code",[_._v("-")]),_._v(" 字符排除目标："),e("code",[_._v("test*,-test3")]),_._v("。")]),_._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[_._v("警告")]),_._v(" "),e("p",[_._v("索引别名在通配符表达式后解析。这可能导致以排除的别名为目标的请求。例如，如果 "),e("code",[_._v("test3")]),_._v(" 是一个索引别名，这个模式 "),e("code",[_._v("test*")]),_._v(","),e("code",[_._v("-test3")]),_._v(" 仍然以 "),e("code",[_._v("test3")]),_._v(" 的索引为目标。要避免这种情况，排除别名的具体索引。")])]),_._v(" "),e("p",[_._v("针对索引的多目标 API，支持以下的查询字符串参数：")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("ignore_unavailable")])])]),_._v(" "),e("p",[_._v("（可选，布尔值）如果为 "),e("code",[_._v("true")]),_._v("，缺失或者关闭的索引不包含在响应中。默认值为 "),e("code",[_._v("false")]),_._v("。")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("allow_no_indices")])])]),_._v(" "),e("p",[_._v("（可选，布尔值）如果为 "),e("code",[_._v("false")]),_._v("，任何通配符表达式、索引别名或 "),e("code",[_._v("_all")]),_._v(" 值只针对缺失或者关闭的索引，则请求将返回错误。即使请求以其他开放索引为目标，此行为也适用。例如，如果一个索引以 "),e("code",[_._v("foo")]),_._v(" 开头，同时没有索引以 "),e("code",[_._v("bar")]),_._v(" 开头，则一个以 "),e("code",[_._v("foo*,bar*")]),_._v("为目标的请求会返回错误。")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("expand_wildcards")])])]),_._v(" "),e("p",[_._v("（可选，字符串）通配符表达式可以匹配的索引类型。如果请求可以以数据流为目标，则此参数确定通配符表达式是否匹配隐藏的数据流。支持逗号分隔的值，如 "),e("code",[_._v("open,hidden")]),_._v("。有效值为：")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("all")])])]),_._v(" "),e("p",[_._v("匹配任何数据流或索引，包括"),e("a",{attrs:{href:"/rest_apis/api_conventions/multi_target_syntax#%E9%9A%90%E8%97%8F%E6%95%B0%E6%8D%AE%E6%B5%81%E5%92%8C%E7%B4%A2%E5%BC%95"}},[_._v("隐藏的")]),_._v("。")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("open")])])]),_._v(" "),e("p",[_._v("匹配开启的、非隐藏的索引。也匹配任何非隐藏的数据流。")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("closed")])])]),_._v(" "),e("p",[_._v("匹配关闭的、非隐藏的索引。也匹配任何非隐藏的数据流。数据流不能被关闭。")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("hidden")])])]),_._v(" "),e("p",[_._v("匹配隐藏的数据流和隐藏的索引。必须与 "),e("code",[_._v("open")]),_._v("、"),e("code",[_._v("closed")]),_._v(" 或一并结合使用。")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("none")])])]),_._v(" "),e("p",[_._v("不接受通配符表达式。")]),_._v(" "),e("p",[_._v("上述参数的默认设置取决于所使用的 API。")]),_._v(" "),e("p",[_._v("一些针对索引的多目标 API，还支持以下查询字符串参数：")]),_._v(" "),e("ul",[e("li",[e("code",[_._v("ignore_throttled")])])]),_._v(" "),e("p",[_._v("（可选，布尔值）如果为 "),e("code",[_._v("true")]),_._v("，具体、展开或别名索引在冻结时将忽略。默认值为 "),e("code",[_._v("true")]),_._v("。")]),_._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[_._v("提示")]),_._v(" "),e("p",[_._v("单索引 API，如"),e("a",{attrs:{href:"/rest_apis/document_apis"}},[_._v("文档 API")]),_._v("和"),e("a",{attrs:{href:"/rest_apis/index_apis/bulk_index_alias"}},[_._v("单索引别名 API")]),_._v("，不支持多目标语法。")])]),_._v(" "),e("h2",{attrs:{id:"隐藏数据流和索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#隐藏数据流和索引"}},[_._v("#")]),_._v(" 隐藏数据流和索引")]),_._v(" "),e("p",[_._v("对大多数 API，默认通配符表达式不匹配隐藏的数据流和索引。为了使用通配符表达式匹配隐藏数据流和索引，你必须指定 "),e("code",[_._v("expand_wildcards")]),_._v(" 查询参数。")]),_._v(" "),e("p",[_._v("你可以通过在数据流匹配索引模板中设置 "),e("a",{attrs:{href:"/rest_apis/index_apis/create_or_update_index_template#%E8%AF%B7%E6%B1%82%E4%BD%93"}},[e("code",[_._v("data_stream.hidden")])]),_._v(" 为 "),e("code",[_._v("true")]),_._v(" 来创建隐藏数据流。你可以使用 "),e("a",{attrs:{href:"/index_modules#%E9%9D%99%E6%80%81%E7%B4%A2%E5%BC%95%E8%AE%BE%E7%BD%AE"}},[e("code",[_._v("index.hidden")])]),_._v(" 索引设置来隐藏索引。")]),_._v(" "),e("p",[_._v("数据流的备份索引将自动隐藏。一些特性，如机器学习，信息将存储在隐藏索引中。")]),_._v(" "),e("p",[_._v("匹配所有索引的全局索引模板不会应用于隐藏索引。")]),_._v(" "),e("h2",{attrs:{id:"系统索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#系统索引"}},[_._v("#")]),_._v(" 系统索引")]),_._v(" "),e("p",[_._v("Elasticsearch 模块和插件可以在内部系统索引中存储配置和状态信息。你不应该直接访问或修改系统索引，因为它们包含系统运行所必需的数据。")]),_._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[_._v("警告")]),_._v(" "),e("p",[_._v("不推荐直接访问系统索引，并且在下一个主要版本中将不再允许直接访问系统索引。")])]),_._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.11/multi-index.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("原文链接"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=a.exports}}]);