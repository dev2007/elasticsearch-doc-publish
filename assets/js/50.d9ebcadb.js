(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{330:function(e,a,_){"use strict";_.r(a);var v=_(13),s=Object(v.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"清除缓存-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清除缓存-api"}},[e._v("#")]),e._v(" 清除缓存 API")]),e._v(" "),a("p",[e._v("清除一个或多个索引的缓存。对于数据流，API 清除流的备份索引的缓存。")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("POST /my-index-000001/_cache/clear\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[e._v("#")]),e._v(" 请求")]),e._v(" "),a("p",[a("code",[e._v("POST /<target>/_cache/clear")])]),e._v(" "),a("p",[a("code",[e._v("POST /_cache/clear")])]),e._v(" "),a("h2",{attrs:{id:"前置条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前置条件"}},[e._v("#")]),e._v(" 前置条件")]),e._v(" "),a("ul",[a("li",[e._v("如果 Elasticsearch 安全特性启用，你使用此 API 必须有 "),a("code",[e._v("manage")]),e._v(" "),a("a",{attrs:{href:"/secure_the_elastic_statck/user_authorization/security_privileges#%E7%B4%A2%E5%BC%95%E6%9D%83%E9%99%90"}},[e._v("索引权限")]),e._v("。")])]),e._v(" "),a("h2",{attrs:{id:"路径参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路径参数"}},[e._v("#")]),e._v(" 路径参数")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("<target>")])]),e._v(" "),a("p",[e._v("（可选，字符串）限制请求的逗号分隔的数据流、索引和别名的列表。支持通配符（*）。要以所有数据流和索引为目标，忽略此参数或使用 "),a("code",[e._v("*")]),e._v(" 或 "),a("code",[e._v("_all")]),e._v("。")])])]),e._v(" "),a("h2",{attrs:{id:"查询参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询参数"}},[e._v("#")]),e._v(" 查询参数")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("allow_no_indices")])]),e._v(" "),a("p",[e._v("（可选，布尔值）如果为 "),a("code",[e._v("false")]),e._v("，任何通配符、"),a("a",{attrs:{href:"/rest_apis/index_apis/bulk_index_alias"}},[e._v("索引别名")]),e._v("或 "),a("code",[e._v("_all")]),e._v(" 值只针对丢失或关闭的索引，请求将返回一个错误。即使请求以其他开启索引为目标，此行为也适用。例如，如果一个索引以 "),a("code",[e._v("foo")]),e._v(" 开头，而没有索引以 "),a("code",[e._v("bar")]),e._v(" 开头，则以 "),a("code",[e._v("foo*,bar*")]),e._v(" 为目标的请求将返回错误。")]),e._v(" "),a("p",[e._v("默认为 "),a("code",[e._v("true")]),e._v("。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("expand_wildcards")])]),e._v(" "),a("p",[e._v("（可选，字符串）通配符表达式可以匹配的索引类型。如果请求可以数据流为目标，则此参数确定通配符表达式是否匹配隐藏的数据流。支持逗号分隔的值，如 "),a("code",[e._v("open,hidden")]),e._v("。有效的值有：")]),e._v(" "),a("ol",[a("li",[a("code",[e._v("all")]),e._v("\n匹配任何数据流或索引，包括 "),a("a",{attrs:{href:"/rest_apis/api_convention/multi_target_syntax#%E9%9A%90%E8%97%8F%E6%95%B0%E6%8D%AE%E6%B5%81%E5%92%8C%E7%B4%A2%E5%BC%95"}},[e._v("hidden")]),e._v("（隐藏的）。")]),e._v(" "),a("li",[a("code",[e._v("open")]),e._v("\n匹配 open（开启）、非隐藏的索引。也匹配任何非隐藏的数据流。")]),e._v(" "),a("li",[a("code",[e._v("closed")]),e._v("\n匹配 closed（关闭）、非隐藏的索引。也匹配任何非隐藏的数据流。数据流不能关闭。")]),e._v(" "),a("li",[a("code",[e._v("hidden")]),e._v("\n匹配隐藏数据流和隐藏索引。必须与 "),a("code",[e._v("open")]),e._v("、"),a("code",[e._v("closed")]),e._v(" 或一起使用。")]),e._v(" "),a("li",[a("code",[e._v("none")]),e._v("\n不接受通配符表达式。")])]),e._v(" "),a("p",[e._v("默认为 "),a("code",[e._v("open")]),e._v("。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("fielddata")])]),e._v(" "),a("p",[e._v("（可选，布尔值）如果为 "),a("code",[e._v("true")]),e._v("，清除字段缓存。")]),e._v(" "),a("p",[e._v("使用 "),a("code",[e._v("fields")]),e._v(" 字段仅清除特定字段的缓存。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("fields")])]),e._v(" "),a("p",[e._v("（可选，字符串）逗号分隔用于限制 "),a("code",[e._v("fielddata")]),e._v(" 参数的字段名字列表。")]),e._v(" "),a("p",[e._v("默认为所有字段。")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),a("p",[e._v("此参数"),a("strong",[e._v("不")]),e._v("支持对象或字段别名。")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("index")])]),e._v(" "),a("p",[e._v("（可选，字符串）用于限制请求的，逗号分隔的索引名字。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("ignore_unavailable")])]),e._v(" "),a("p",[e._v("（可选，布尔值）如果为 "),a("code",[e._v("true")]),e._v("，丢失或关闭的索引不包含在响应中。")]),e._v(" "),a("p",[e._v("默认为 "),a("code",[e._v("false")]),e._v("。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("query")])]),e._v(" "),a("p",[e._v("（可选，布尔值）如果为 "),a("code",[e._v("true")]),e._v("，清除查询缓存。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("request")])]),e._v(" "),a("p",[e._v("（可选，布尔值）如果为 "),a("code",[e._v("true")]),e._v("，清除请求缓存。")])])]),e._v(" "),a("h2",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[e._v("#")]),e._v(" 示例")]),e._v(" "),a("h3",{attrs:{id:"清除指定缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清除指定缓存"}},[e._v("#")]),e._v(" 清除指定缓存")]),e._v(" "),a("p",[e._v("默认情况，清除缓存 API 清除所有缓存。你可以通过以下以下查询参数为 "),a("code",[e._v("true")]),e._v(" 来清除指定缓存：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("fielddata")])]),e._v(" "),a("li",[a("code",[e._v("query")])]),e._v(" "),a("li",[a("code",[e._v("request")])])]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("POST /my-index-000001/_cache/clear?fielddata"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true  \nPOST /my-index-000001/_cache/clear?query"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true\nPOST /my-index-000001/_cache/clear?request"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("ol",[a("li",[e._v("第一个请求，仅清除字段缓存")]),e._v(" "),a("li",[e._v("第二个请求，仅清除查询缓存")]),e._v(" "),a("li",[e._v("第三个请求，仅清除请求缓存")])]),e._v(" "),a("h3",{attrs:{id:"清除指定字段缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清除指定字段缓存"}},[e._v("#")]),e._v(" 清除指定字段缓存")]),e._v(" "),a("p",[e._v("为了只清除指定指定字段缓存，使用 "),a("code",[e._v("fields")]),e._v(" 查询参数：")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("POST /my-index-000001/_cache/clear?fields"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("foo,bar\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ol",[a("li",[e._v("此请求清除字段 "),a("code",[e._v("foo")]),e._v(" 和 "),a("code",[e._v("bar")]),e._v(" 的缓存")])]),e._v(" "),a("h3",{attrs:{id:"清除所有数据流和索引的缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清除所有数据流和索引的缓存"}},[e._v("#")]),e._v(" 清除所有数据流和索引的缓存")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("POST /_cache/clear\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-clearcache.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("原文链接"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=s.exports}}]);