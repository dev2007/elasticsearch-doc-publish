(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{400:function(s,a,t){"use strict";t.r(a);var e=t(13),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"重要的-elasticsearch-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重要的-elasticsearch-配置"}},[s._v("#")]),s._v(" 重要的 Elasticsearch 配置")]),s._v(" "),a("p",[s._v("Elasticsearch 只需要很少的配置即可开始，但在生产中使用集群之前，必须考虑以下几点：")]),s._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#%E8%B7%AF%E5%BE%84%E8%AE%BE%E7%BD%AE"}},[s._v("路径设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#%E9%9B%86%E7%BE%A4%E5%90%8D%E8%AE%BE%E7%BD%AE"}},[s._v("集群名设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#%E8%8A%82%E7%82%B9%E5%90%8D%E8%AE%BE%E7%BD%AE%5D"}},[s._v("节点名设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#%E7%BD%91%E7%BB%9C%E4%B8%BB%E6%9C%BA%E8%AE%BE%E7%BD%AE"}},[s._v("网络主机设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#%E5%8F%91%E7%8E%B0%E5%92%8C%E9%9B%86%E7%BE%A4%E6%9E%84%E6%88%90%E8%AE%BE%E7%BD%AE"}},[s._v("发现设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#%E5%A0%86%E5%A4%A7%E5%B0%8F%E8%AE%BE%E7%BD%AE"}},[s._v("堆大小设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#JVM-%E5%A0%86%E8%BD%AC%E5%82%A8%E8%B7%AF%E5%BE%84%E8%AE%BE%E7%BD%AE"}},[s._v("JVM 堆转储路径设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#GC-%E6%97%A5%E5%BF%97%E8%AE%BE%E7%BD%AE"}},[s._v("GC 日志设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#%E4%B8%B4%E6%97%B6%E7%9B%AE%E5%BD%95%E8%AE%BE%E7%BD%AE"}},[s._v("临时目录设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#JVM-%E8%87%B4%E5%91%BD%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%E8%AE%BE%E7%BD%AE"}},[s._v("JVM 致命错误日志设置")])])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#%E9%9B%86%E7%BE%A4%E5%A4%87%E4%BB%BD"}},[s._v("集群备份")])])])]),s._v(" "),a("p",[s._v("我们的"),a("a",{attrs:{href:"https://www.elastic.co/cn/cloud/elasticsearch-service/signup?baymax=docs-body&elektra=docs",target:"_blank",rel:"noopener noreferrer"}},[s._v("Elastic Cloud"),a("OutboundLink")],1),s._v("服务自动配置这些项目，默认情况下，使你的集群生产就绪。")]),s._v(" "),a("h2",{attrs:{id:"路径设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路径设置"}},[s._v("#")]),s._v(" 路径设置")]),s._v(" "),a("p",[s._v("Elasticsearch 将索引的数据写入索引，并将数据流写入数据目录。Elasticsearch 将自己的应用程序日志写入日志目录，其中包含有关集群运行状况和操作的信息。")]),s._v(" "),a("p",[s._v("对于 "),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/linux"}},[s._v("macOS .tar.gz")]),s._v("，"),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/linux"}},[s._v("Linux .tar.gz")]),s._v(" 和 "),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/windows"}},[s._v("Windows .zip")]),s._v(" 安装，"),a("code",[s._v("data")]),s._v(" 和 "),a("code",[s._v("logs")]),s._v(" 默认是 "),a("code",[s._v("$ES_HOME")]),s._v(" 的子目录。然而，"),a("code",[s._v("$ES_HOME")]),s._v(" 中的文件可能在升级过程中被删除。")]),s._v(" "),a("p",[s._v("在生产中，我们强烈建议你设置 "),a("code",[s._v("elasticsearch.yml")]),s._v(" 中的 "),a("code",[s._v("path.data")]),s._v(" 和 "),a("code",[s._v("path.logs")]),s._v(" 在 "),a("code",[s._v("$ES_HOME")]),s._v(" 之外的位置。默认情况下，"),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/docker"}},[s._v("Docker")]),s._v("、"),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/debian"}},[s._v("Debian")]),s._v(" 和 "),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/rpm"}},[s._v("RPM")]),s._v(" 安装将数据和日志写入 "),a("code",[s._v("$ES_HOME")]),s._v(" 之外的位置。")]),s._v(" "),a("p",[s._v("支持的 "),a("code",[s._v("path.data")]),s._v("和 "),a("code",[s._v("path.logs")]),s._v("。值因平台而异：")]),s._v(" "),a("ul",[a("li",[s._v("类 Unix 系统")])]),s._v(" "),a("p",[s._v("Linux 和 macOS 安装支持 Unix 风格的路径：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("path:\n  data: /var/data/elasticsearch\n  logs: /var/log/elasticsearch\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("Windows")])]),s._v(" "),a("p",[s._v("Windows 安装支持带转义反斜杠的 DOS 路径：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("path:\n  data: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("Elastic"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("Elasticsearch"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('data"')]),s._v("\n  logs: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("Elastic"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("Elasticsearch"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('logs"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("重要")]),s._v(" "),a("p",[s._v("不要修改数据目录中的任何内容或运行可能会干扰其内容的进程。如果 Elasticsearch 以外的其他内容修改了数据目录的内容，则 Elasticsearch 可能会失败，报告损坏或其他数据不一致，或者可能在默默丢失部分数据后正常工作。不要尝试对数据目录进行文件系统备份；不支持还原此类备份的方法。相反，请使用"),a("a",{attrs:{href:"/snapshot_and_restore/snapshot_and_restore"}},[s._v("快照和还原")]),s._v("来安全地进行备份。不要在数据目录上运行病毒扫描程序。病毒扫描程序可能会阻止 Elasticsearch 正常工作，并可能会修改数据目录的内容。数据目录不包含可执行文件，因此病毒扫描只会发现误报。")])]),s._v(" "),a("h2",{attrs:{id:"多数据路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多数据路径"}},[s._v("#")]),s._v(" 多数据路径")]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("重要")]),s._v(" "),a("p",[s._v("7.13.0 版本已弃用")])]),s._v(" "),a("p",[s._v("如果需要，可以在 "),a("code",[s._v("path.data")]),s._v(" 中指定多个路径。Elasticsearch 跨所有提供的路径存储节点的数据，但将每个分片的数据保持在同一路径上。")]),s._v(" "),a("p",[s._v("Elasticsearch 不平衡节点数据路径上的分片。单个路径中的高磁盘使用率可以触发整个节点的"),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/cluster_level_shard_allocation_and_routing_settings#%E5%9F%BA%E4%BA%8E%E7%A3%81%E7%9B%98%E7%9A%84%E5%88%86%E7%89%87%E5%88%86%E9%85%8D%E8%AE%BE%E7%BD%AE"}},[s._v("高磁盘利用率水印")]),s._v("。如果触发，Elasticsearch 将不会向节点添加分片，即使节点的其他路径具有可用磁盘空间。如果需要额外的磁盘空间，建议您添加新节点，而不是其他数据路径。")]),s._v(" "),a("ul",[a("li",[s._v("类 Unix 系统")])]),s._v(" "),a("p",[s._v("Linux 和 macOS 安装支持 "),a("code",[s._v("path.data")]),s._v(" 中的多个 Unix 样式路径：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("path:\n  data:\n    - /mnt/elasticsearch_1\n    - /mnt/elasticsearch_2\n    - /mnt/elasticsearch_3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("Windwos")])]),s._v(" "),a("p",[s._v("Windows 安装支持 "),a("code",[s._v("path.data")]),s._v(" 中的多个 DOS 路径：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("path:\n  data:\n    - "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("Elastic"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('Elasticsearch_1"')]),s._v("\n    - "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"E:'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("Elastic"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('Elasticsearch_1"')]),s._v("\n    - "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"F:'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("Elastic"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('Elasticsearch_3"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"从多个数据路径迁移"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从多个数据路径迁移"}},[s._v("#")]),s._v(" 从多个数据路径迁移")]),s._v(" "),a("p",[s._v("支持多数据路径在 7.13 中已被弃用，并将在未来版本中删除。")]),s._v(" "),a("p",[s._v("作为多数据路径的替代方案，您可以使用硬件虚拟化层（如 RAID）或软件虚拟化层，如 Linux 上的逻辑卷管理器（LVM）或 Windows 上的存储空间，创建跨越多个磁盘的文件系统。如果希望在一台计算机上使用多个数据路径，则必须为每个数据路径运行一个节点。")]),s._v(" "),a("p",[s._v("如果当前在"),a("a",{attrs:{href:"/set_up_a_cluster_for_high_availability/desining_for_resilicence/desining_for_resilicence"}},[s._v("高可用集群")]),s._v("中使用多个数据路径，则可以迁移到为每个节点使用单一路径的设置，而无需使用类似于"),a("a",{attrs:{href:"/set_up_elasticsearch/full_cluster_restart_and_rolling_restart#%E6%BB%9A%E5%8A%A8%E9%87%8D%E5%90%AF"}},[s._v("滚动重启")]),s._v("的过程进行停机：依次关闭每个节点，并将其替换为一个或多个节点，每个节点都配置为使用单一数据路径。更详细地说，对于当前具有多个数据路径的每个节点，应遵循以下过程。原则上，您可以在滚动升级到 8.0 期间执行此迁移，但我们建议在开始升级之前迁移到单个数据路径设置。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("创建快照以在发生灾难时保护你的数据。")])]),s._v(" "),a("li",[a("p",[s._v("可选地，通过使用"),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/cluster_level_shard_allocation_and_routing_settings#%E9%9B%86%E7%BE%A4%E7%BA%A7%E5%88%86%E7%89%87%E5%88%86%E9%85%8D%E8%BF%87%E6%BB%A4"}},[s._v("分配过滤器")]),s._v("将数据从目标节点迁移：")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PUT _cluster/settings\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"persistent"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster.routing.allocation.exclude._name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"target-node-name"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("你可以使用 "),a("a",{attrs:{href:"/rest_apis/cat_apis/cat_allocation"}},[s._v("cat 分配 API")]),s._v(" 跟踪数据迁移的进度。如果一些分片没有迁移，那么"),a("a",{attrs:{href:"/rest_apis/cluster_apis/cluster_allocation_explain"}},[s._v("集群分配解释 API")]),s._v(" 将帮助你确定原因。")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[s._v("按照"),a("a",{attrs:{href:"/set_up_elasticsearch/full_cluster_restart_and_rolling_restart#%E6%BB%9A%E5%8A%A8%E9%87%8D%E5%90%AF"}},[s._v("滚动重启过程")]),s._v("中的步骤操作，直到关闭目标节点。")])]),s._v(" "),a("li",[a("p",[s._v("确保集群运行状况为 "),a("code",[s._v("yellow（黄色）")]),s._v("或 "),a("code",[s._v("green（绿色）")]),s._v("，以便有分配给集群中至少一个其他节点的每个分片的副本。")])]),s._v(" "),a("li",[a("p",[s._v("如果适用，请删除前面步骤中应用的分配筛选器。")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PUT _cluster/settings\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"persistent"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster.routing.allocation.exclude._name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[a("p",[s._v("通过删除已停止节点的数据路径的内容，丢弃已停止节点持有的数据。")])]),s._v(" "),a("li",[a("p",[s._v("重新配置存储。例如，使用LVM或存储空间将磁盘合并到单个文件系统中。确保重新配置的存储具有足够的空间来存放数据。")])]),s._v(" "),a("li",[a("p",[s._v("通过调整 "),a("code",[s._v("elasticsearch.yml")]),s._v(" 文件中的 "),a("code",[s._v("path.data")]),s._v(" 设置重新配置节点。如果需要，安装更多节点，每个节点都有自己的 "),a("code",[s._v("path.data")]),s._v(" 设置指向单独数据路径。")])]),s._v(" "),a("li",[a("p",[s._v("启动新节点，并对其执行其余的"),a("a",{attrs:{href:"/set_up_elasticsearch/full_cluster_restart_and_rolling_restart#%E6%BB%9A%E5%8A%A8%E9%87%8D%E5%90%AF"}},[s._v("滚动重启过程")]),s._v("过程。")])]),s._v(" "),a("li",[a("p",[s._v("确保集群运行状况为绿色，以便已分配每个分片。")])])]),s._v(" "),a("p",[s._v("你也可以向集群添加一些单数据路径节点，使用"),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/cluster_level_shard_allocation_and_routing_settings#%E9%9B%86%E7%BE%A4%E7%BA%A7%E5%88%86%E7%89%87%E5%88%86%E9%85%8D%E8%BF%87%E6%BB%A4"}},[s._v("分配过滤器")]),s._v("将所有数据迁移到这些新节点，然后从集群中删除旧节点。这种方法将使集群的大小临时增加一倍，因此只有在你有能力这样扩展集群的情况下，它才能工作。")]),s._v(" "),a("p",[s._v("如果你当前使用多个数据路径，但你的群集不是高度可用的，则可以通过创建快照，再创建具有所需配置的新集群并将快照还原到其中，用以迁移到非弃用配置。")]),s._v(" "),a("h2",{attrs:{id:"集群名设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群名设置"}},[s._v("#")]),s._v(" 集群名设置")]),s._v(" "),a("p",[s._v("节点只能在加入集群后，向集群中其他所有节点共享其 "),a("code",[s._v("cluster.name")]),s._v("。默认名称是 "),a("code",[s._v("elasticsearch")]),s._v("，但你应该将其更改为描述集群用途的适当名称。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("cluster.name: logging-prod\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("不要在不同的环境中重用相同的集群名称。否则，节点可能加入错误的集群。")]),s._v(" "),a("h2",{attrs:{id:"节点名设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#节点名设置"}},[s._v("#")]),s._v(" 节点名设置")]),s._v(" "),a("p",[s._v("Elasticsearch 使用 "),a("code",[s._v("node.name")]),s._v(" 作为 Elasticsearch 特定实例的可读标识符。此名称包含在许多 API 的响应中。节点名称默认为 Elasticsearch 启动时机器的主机名，但可以在 "),a("code",[s._v("elasticsearch.yml")]),s._v(" 中显式配置：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("node.name: prod-data-2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"网络主机设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络主机设置"}},[s._v("#")]),s._v(" 网络主机设置")]),s._v(" "),a("p",[s._v("默认情况下，Elasticsearch 仅绑定到回环地址，如 "),a("code",[s._v("127.0.0.1")]),s._v(" 和 "),a("code",[s._v("[：：1]")]),s._v("。这足以在单个服务器上运行一个或多个节点的集群进行开发和测试，但"),a("a",{attrs:{href:"/set_up_a_cluster_for_high_availability/desining_for_resilicence/desining_for_resilicence"}},[s._v("弹性生产集群")]),s._v("必须涉及其他服务器上的节点。有许多"),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/networking"}},[s._v("网络设置")]),s._v("，但通常只需要配置 "),a("code",[s._v("network.host")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("network.host: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.10\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("重要")]),s._v(" "),a("p",[s._v("当你提供 "),a("code",[s._v("network.host")]),s._v(" 值，Elasticsearch 假设你正在从开发模式转移到生产模式，并将大量系统启动检查从警告升级为异常。查看"),a("a",{attrs:{href:"set_up_elasticsearch/import_system_configuration/import_system_configuration"}},[s._v("开发和生产模式")]),s._v("之间的差异。")])]),s._v(" "),a("h2",{attrs:{id:"发现和集群构成设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发现和集群构成设置"}},[s._v("#")]),s._v(" 发现和集群构成设置")]),s._v(" "),a("p",[s._v("在投入生产之前，配置两个重要的发现和群集形成设置，以便群集中的节点可以相互发现并选择主节点。")]),s._v(" "),a("p",[a("code",[s._v("discovery.seed_hosts")])]),s._v(" "),a("p",[s._v("开箱即用，无需任何网络配置，Elasticsearch 将绑定到可用的环回地址，并扫描本地端口 "),a("code",[s._v("9300")]),s._v(" 至 "),a("code",[s._v("9305")]),s._v("，以与运行在同一服务器上的其他节点连接。这种行为提供了一种无需进行任何配置的自动集群体验。")]),s._v(" "),a("p",[s._v("当你希望与其他主机上的节点组成集群时，请使用"),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch#%E9%9D%99%E6%80%81"}},[s._v("静态")]),s._v(" "),a("code",[s._v("discovery.seed_hosts")]),s._v(" 设置。此设置提供群集中其他节点的列表，这些节点具有主资格，并且可能处于活动状态，并且可以联系以启动"),a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery-hosts-providers.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("发现过程"),a("OutboundLink")],1),s._v("。此设置接受集群中所有主合格节点的 YAML 序列或地址数组。每个地址可以是 IP 地址，也可以是通过 DNS 解析为一个或多个 IP 地址的主机名。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("discovery.seed_hosts:\n   - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.10:9300\n   - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.11 \n   - seeds.mydomain.com \n   - "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":0:0:0:0:ffff:c0a8:10c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":9301 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",[a("li",[a("p",[a("code",[s._v("192.168.1.11")]),s._v("：端口可选，默认为 "),a("code",[s._v("9300")]),s._v("，但可以被"),a("a",{attrs:{href:"/set_up_elasticsearch/discovery_and_cluster_formation/discovery"}},[s._v("覆盖")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("seeds.mydomain.com")]),s._v("：如果主机名解析为多个 IP 地址，则节点将尝试在所有解析的地址发现其他节点。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("[0:0:0:0:0:ffff:c0a8:10c]:9301")]),s._v("：IPv6 地址必须用方括号括起来。")])])]),s._v(" "),a("p",[s._v("如果符合主节点条件的节点没有固定名称或地址，请使用备用主机提供程序动态查找其地址。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("cluster.initial_master_nodes")])])]),s._v(" "),a("p",[s._v("首次启动 Elasticsearch 集群时，群集引导步骤将确定在第一次选举中计算其投票的主合格节点集。在开发模式下，如果未配置发现设置，此步骤将由节点自己自动执行。")]),s._v(" "),a("p",[s._v("由于自动引导"),a("a",{attrs:{href:"/set_up_elasticsearch/discovery_and_cluster_formation/quorum_based_decision_making"}},[s._v("原生不安全")]),s._v("，因此在生产模式下启动新集群时，必须明确列出在第一次选举中应计算其投票的主合格节点。你可以使用 "),a("code",[s._v("cluster.initial_master_nodes")]),s._v(" 设置此列表。")]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("重要")]),s._v(" "),a("p",[s._v("集群首次成功形成后，删除每个节点配置中的 "),a("code",[s._v("cluster.initial_master_nodes")]),s._v(" 设置。重新启动集群或向现有集群添加新节点时，不要使用此设置。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("discovery.seed_hosts:\n   - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.10:9300\n   - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.11\n   - seeds.mydomain.com\n   - "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":0:0:0:0:ffff:c0a8:10c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":9301\ncluster.initial_master_nodes: \n   - master-node-a\n   - master-node-b\n   - master-node-c\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ol",[a("li",[a("code",[s._v("cluster.initial_master_nodes")]),s._v("：按他们的 "),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/import_elasticsearch_configuration#%E8%8A%82%E7%82%B9%E5%90%8D%E8%AE%BE%E7%BD%AE"}},[a("code",[s._v("node.name")])]),s._v(" 标识初始主节点，默认为其主机名。确保 "),a("code",[s._v("cluster.initial_master_nodes")]),s._v(" 中的值与 "),a("code",[s._v("node.name")]),s._v(" 完全匹配。如果使用完全限定域名（FQDN），例如 "),a("code",[s._v("master-node-a.example.com")]),s._v(" 作为节点名称，则必须使用此列表中的 FQDN。相反，如果 "),a("code",[s._v("node.name")]),s._v(" 是一个没有任何尾部限定符的裸主机名，你还必须省略 "),a("code",[s._v("cluster.initial_master_nodes")]),s._v(" 中的尾部限定符。")])]),s._v(" "),a("p",[s._v("参阅"),a("a",{attrs:{href:"/set_up_elasticsearch/discovery_and_cluster_formation/bootstrapping_a_cluster"}},[s._v("引导集群")]),s._v("以及"),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/discovery_and_cluster_formation_setting"}},[s._v("发现和集群构成设置")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"堆大小设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#堆大小设置"}},[s._v("#")]),s._v(" 堆大小设置")]),s._v(" "),a("p",[s._v("默认情况下，Elasticsearch 根据节点的"),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/node#%E8%8A%82%E7%82%B9%E8%A7%92%E8%89%B2"}},[s._v("角色")]),s._v("和总内存自动设置 JVM 堆大小。我们建议大多数生产环境使用默认大小。")]),s._v(" "),a("p",[s._v("如果需要，可以通过手动"),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/advanced_configuration#%E8%AE%BE%E7%BD%AE-JVM-%E5%A0%86%E5%A4%A7%E5%B0%8F"}},[s._v("设置 JVM 堆大小")]),s._v("来覆盖默认大小。")]),s._v(" "),a("h2",{attrs:{id:"jvm-堆转储路径设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvm-堆转储路径设置"}},[s._v("#")]),s._v(" JVM 堆转储路径设置")]),s._v(" "),a("p",[s._v("默认情况下，Elasticsearch 将 JVM 配置为将内存不足异常的堆转储到默认数据目录。在 RPM 和 Debian 软件包中，数据目录是 "),a("code",[s._v("/var/lib/elasticsearch")]),s._v("。在"),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/linux"}},[s._v("Linux 和 MacOS")]),s._v(" 及 "),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/windows"}},[s._v("Windows")]),s._v(" 发行版上，"),a("code",[s._v("data")]),s._v(" 目录位于 Elasticsearch 安装的根目录下。")]),s._v(" "),a("p",[s._v("如果此路径不适合接收堆转储，请修改 "),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/advanced_configuration#%E8%AE%BE%E7%BD%AE-JVM-%E9%80%89%E9%A1%B9"}},[s._v("jvm.options")]),s._v(" 中的 "),a("code",[s._v("-XX:HeapDumpPath=…")]),s._v(" 条目：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("如果指定目录，JVM 将根据运行实例的 PID 为堆转储生成文件名。")])]),s._v(" "),a("li",[a("p",[s._v("如果指定固定文件名而不是目录，则当 JVM 需要对内存不足异常执行堆转储时，该文件必须不存在。否则，堆转储将失败。")])])]),s._v(" "),a("h2",{attrs:{id:"gc-日志设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gc-日志设置"}},[s._v("#")]),s._v(" GC 日志设置")]),s._v(" "),a("p",[s._v("默认情况下，Elasticsearch 启用垃圾收集（GC）日志。这些是在 "),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/advanced_configuration#%E8%AE%BE%E7%BD%AE-JVM-%E9%80%89%E9%A1%B9"}},[s._v("jvm.options")]),s._v(" 中配置的，并输出到与 Elasticsearch 日志相同的默认位置。默认配置每 64 MB 旋转一次日志，最多可消耗 2 GB 的磁盘空间。")]),s._v(" "),a("p",[s._v("你可以使用"),a("a",{attrs:{href:"https://openjdk.java.net/jeps/158",target:"_blank",rel:"noopener noreferrer"}},[s._v("JEP 158：统一 JVM 日志"),a("OutboundLink")],1),s._v("中描述的命令行选项重新配置 JVM 日志。除非更改默认 "),a("code",[s._v("jvm.options")]),s._v(" 文件中，除了你自己的设置之外，还将应用 Elasticsearch 默认配置。要禁用默认配置，首先通过提供 "),a("code",[s._v("-Xlog:disable")]),s._v(" 选项禁用日志记录，然后提供您自己的命令行选项。这将禁用"),a("em",[s._v("所有")]),s._v(" JVM 日志记录，因此请确保查看可用选项并启用所需的所有功能。")]),s._v(" "),a("p",[s._v("要查看原始 JEP 中未包含的其他选项，参阅"),a("a",{attrs:{href:"https://docs.oracle.com/en/java/javase/13/docs/specs/man/java.html#enable-logging-with-the-jvm-unified-logging-framework",target:"_blank",rel:"noopener noreferrer"}},[s._v("使用 JVM 统一日志框架启用日志"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("p",[s._v("使用一些示例选项，通过创建 "),a("code",[s._v("$ES_HOME/config/jvm.options.d/gc.options")]),s._v(" 来变更默认 GC 日志输出路径为 "),a("code",[s._v("/opt/my-app/gc.log")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Turn off all previous logging configuratons")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Xlog:disable")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default settings from JEP 158, but with `utctime` instead of `uptime` to match the next line")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Xlog:all")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("warning:stderr:utctime,level,tags\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enable GC logging to a custom location with a variety of options")]),s._v("\n-Xlog:gc*,gc+age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("trace,safepoint:file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/my-app/gc.log:utctime,pid,tags:filecount"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(",filesize"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("64m\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("配置 Elasticsearch Docker 容器，将 GC 调试日志发送到标准错误（stderr）。这允许容器编排器处理输出。如果使用 "),a("code",[s._v("CLI_JAVA_OPTS")]),s._v(" 环境变量，请指定：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MY_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xlog:disable -Xlog:all=warning:stderr:utctime,level,tags -Xlog:gc=debug:stderr:utctime"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CLI_JAVA_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MY_OPTS")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# etc")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"临时目录设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#临时目录设置"}},[s._v("#")]),s._v(" 临时目录设置")]),s._v(" "),a("p",[s._v("默认情况下，Elasticsearch 使用启动脚本在系统临时目录下创建的私有临时目录。")]),s._v(" "),a("p",[s._v("在某些 Linux 发行版上，如果文件和目录最近未被访问，系统实用程序将从 "),a("code",[s._v("/tmp")]),s._v(" 中清除这些文件和目录。如果长时间未使用需要临时目录的功能，则此行为可能导致在Elasticsearch运行时删除专用临时目录。如果随后使用需要此目录的功能，则删除专用临时目录会导致问题。")]),s._v(" "),a("p",[s._v("如果使用 "),a("code",[s._v(".deb")]),s._v(" 或 "),a("code",[s._v(".rpm")]),s._v(" 软件包安装 Elasticsearch 并在 "),a("code",[s._v("systemd")]),s._v(" 下运行，Elasticsearch 使用的私有临时目录将被排除在定期清理之外。")]),s._v(" "),a("p",[s._v("如果你打算运行 "),a("code",[s._v(".tar.gz")]),s._v(" 在 Linux 或 MacOS 上的长期发行版，请考虑为 Elasticsearch 创建一个专用的临时目录，该目录不在将清除旧文件和目录的路径下。该目录应设置权限，以便只有运行 Elasticsearch 的用户才能访问该目录。然后，在启动 Elasticsearch 之前，将 "),a("code",[s._v("$ES_TMPDIR")]),s._v(" 环境变量设置为指向该目录。")]),s._v(" "),a("h2",{attrs:{id:"jvm-致命错误日志设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvm-致命错误日志设置"}},[s._v("#")]),s._v(" JVM 致命错误日志设置")]),s._v(" "),a("p",[s._v("默认情况下，Elasticsearch 将 JVM 配置为将致命错误日志写入默认日志目录。在 "),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/rpm"}},[s._v("RPM")]),s._v(" 和 "),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/debian"}},[s._v("Debian")]),s._v(" 软件包中，这个目录是 "),a("code",[s._v("/var/log/elasticsearch")]),s._v("。在 "),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/linux"}},[s._v("Linux 和 MacOS")]),s._v(" 和 "),a("a",{attrs:{href:"/set_up_elasticsearch/installing_elasticsearch/windows"}},[s._v("Windows")]),s._v(" 发行版上，日志目录位于 Elasticsearch 安装的根目录下。")]),s._v(" "),a("p",[s._v("这些是 JVM 遇到致命错误（如分段错误）时生成的日志。如果此路径不适合接收日志，请修改 "),a("a",{attrs:{href:"/set_up_elasticsearch/configuring_elasticsearch/advanced_configuration#%E8%AE%BE%E7%BD%AE-JVM-%E9%80%89%E9%A1%B9"}},[s._v("jvm.options")]),s._v(" 中的 "),a("code",[s._v("-XX:ErrorFile=…")]),s._v(" 条目。")]),s._v(" "),a("h2",{attrs:{id:"集群备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群备份"}},[s._v("#")]),s._v(" 集群备份")]),s._v(" "),a("p",[s._v("在灾难中，"),a("a",{attrs:{href:"/snapshot_and_restore/snapshot_and_restore"}},[s._v("快照")]),s._v("可以防止永久数据丢失。"),a("a",{attrs:{href:"/snapshot_and_restore/create_a_snapshot#%E4%BD%BF%E7%94%A8-SLM-%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BF%AB%E7%85%A7"}},[s._v("快照生命周期管理")]),s._v("是对集群进行定期备份的最简单方法。有关详细信息，参阅"),a("a",{attrs:{href:"/snapshot_and_restore/create_a_snapshot"}},[s._v("创建快照")]),s._v("。")]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),a("p",[a("strong",[s._v("快照是备份集群的唯一可靠且受支持的方法")]),s._v("。你无法通过复制 Elasticsearch 集群节点的数据目录来备份该集群。不支持从文件系统级备份中恢复任何数据的方法。如果尝试从这样的备份中恢复集群，它可能会失败，并报告损坏或丢失文件或其他数据不一致，或者它似乎成功又悄悄地丢失了一些数据。")])]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/important-settings.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);